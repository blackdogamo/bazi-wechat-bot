import argparse
import collections
import pprint
import datetime

from lunar_python import Lunar, Solar
from colorama import init
from ganzhi import *
from datas import *
from sizi import summarys
from common import *
from yue import months
import sys
import tkinter as tk
from tkinter import ttk

global_ba = None
å…«å­—ä¿¡æ¯ä¸»å­—å…¸ = {}
  
# å¯¼å…¥Tkinteråº“ï¼Œå®ƒæ˜¯ GUI (å›¾å½¢ç”¨æˆ·ç•Œé¢) åº“ï¼Œå®ƒè®©ä½ å¯ä»¥è½»æ¾åˆ›å»ºçª—å£ã€æŒ‰é’®ã€æ–‡æœ¬æ¡†ç­‰ç•Œé¢å…ƒç´ ã€‚
from tkinter import messagebox
#å¯¼å…¥argparseåº“ï¼Œå®ƒèƒ½å¸®ä½ è½»æ¾å¤„ç†å‘½ä»¤è¡Œè¾“å…¥çš„å‚æ•°ï¼Œè¿›è¡Œå‚æ•°çš„ç±»å‹æ£€æŸ¥å’Œè½¬ã€‚
import argparse
from argparse import Namespace

# è¿™æ˜¯ä¸€ä¸ªã€GUIç•Œé¢å¹¶è·å–ç”¨æˆ·è¾“å…¥ã€‘çš„"è·å–ç”¨æˆ·åœ¨ç•Œé¢é‡Œè¾“å…¥çš„ä¿¡æ¯"å‡½æ•°
def è·å–ç”¨æˆ·åœ¨ç•Œé¢é‡Œè¾“å…¥çš„ä¿¡æ¯():
    # åˆ›å»ºä¸»çª—å£
    è¾“å…¥çª—å£ = tk.Tk()
    è¾“å…¥çª—å£.title("å…«å­—æ’ç›˜è¾“å…¥")
    è¾“å…¥çª—å£.geometry("400x500")  # ç¨å¾®å¢åŠ äº†çª—å£é«˜åº¦
    è¾“å…¥çª—å£.configure(bg='#F5F5F5')  # è®¾ç½®èƒŒæ™¯è‰²ä¸ºæµ…ç°è‰²
    
    # è®¾ç½®å­—ä½“
    æ ‡é¢˜å­—ä½“è®¾ç½® = ("Arial", 18, "bold")
    æ ‡ç­¾å­—ä½“è®¾ç½® = ("Arial", 14)
    æ¡ç›®å­—ä½“è®¾ç½® = ("Arial", 14)
    æŒ‰é’®å­—ä½“è®¾ç½® = ("Arial", 14, "bold")
    
    # åˆ›å»ºæ ‡é¢˜
    æ ‡é¢˜_æ ‡ç­¾ = tk.Label(è¾“å…¥çª—å£, text="è¯·è¾“å…¥æ‚¨çš„å‡ºç”Ÿä¿¡æ¯", font=æ ‡é¢˜å­—ä½“è®¾ç½®, bg='#F5F5F5')
    æ ‡é¢˜_æ ‡ç­¾.pack(pady=20)
    
    # åˆ›å»ºè¾“å…¥æ¡†æ¡†æ¶
    input_frame = tk.Frame(è¾“å…¥çª—å£, bg='#F5F5F5')
    input_frame.pack(pady=10)
    
    # å¹´ã€æœˆã€æ—¥ã€æ—¶çš„æ ‡ç­¾å’Œè¾“å…¥æ¡†
    labels = ["å¹´ï¼š", "æœˆï¼š", "æ—¥ï¼š", "æ—¶ï¼š"]
    text_vars = [tk.StringVar() for _ in range(4)]        #StringVar()åˆ›å»ºäº†å››ä¸ªè£…å¹´ã€æœˆã€æ—¥ã€æ—¶ä¿¡æ¯çš„"ç›’å­"ã€‚StringVar()æ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œå¯ä»¥å’Œè¾“å…¥æ¡†ï¼ˆEntryï¼‰è¿æ¥èµ·æ¥
    for i in range(4):                         #forå¾ªç¯åˆ›å»ºå®é™…è¾“å…¥æ¡†ï¼ŒæŠŠæ¯ä¸ªè¾“å…¥æ¡†å’Œå¯¹åº”çš„å¹´ã€æœˆã€æ—¥æ—¶çš„å››ä¸ª"ç›’å­"è¿æ¥èµ·æ¥ã€‚"å¹´"ä¼šè¢«å­˜åˆ°text_vars[0]è¿™ä¸ª"ç›’å­"é‡Œã€‚"æœˆ"ä¼šè¢«å­˜åˆ°text_vars[1]è¿™ä¸ª"ç›’å­"é‡Œã€‚
        label = tk.Label(input_frame, text=labels[i], font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#F5F5F5', fg='#333333')
        label.grid(row=i, column=0, padx=10, pady=5, sticky='e')
        entry = tk.Entry(input_frame, textvariable=text_vars[i], font=æ¡ç›®å­—ä½“è®¾ç½®, width=10, bg='#FFFFFF', fg='#333333', bd=1, relief='solid')
        entry.grid(row=i, column=1, padx=10, pady=5)
    
    # æ€§åˆ«é€‰æ‹©æ¡†
    global æ€§åˆ«å˜é‡
    gender_frame = tk.Frame(è¾“å…¥çª—å£, bg='#F5F5F5')
    gender_frame.pack(pady=10)
    
    gender_æ ‡ç­¾ = tk.Label(gender_frame, text="æ€§åˆ«ï¼š", font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#F5F5F5', fg='#333333')
    gender_æ ‡ç­¾.pack(side=tk.LEFT, padx=5)
    æ€§åˆ«å˜é‡ = tk.StringVar(value="ç”·")             #åˆ›å»ºäº†æ€§åˆ«å˜é‡å¯¹è±¡ï¼Œç”¨äºå­˜å‚¨ç”¨æˆ·é€‰æ‹©çš„ã€æ€§åˆ«ã€‘
    radio_male = tk.Radiobutton(gender_frame, text="ç”·", variable=æ€§åˆ«å˜é‡, value="ç”·", font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#F5F5F5', fg='#333333', selectcolor='#F5F5F5')
    radio_male.pack(side=tk.LEFT, padx=10)
    radio_female = tk.Radiobutton(gender_frame, text="å¥³", variable=æ€§åˆ«å˜é‡, value="å¥³", font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#F5F5F5', fg='#333333', selectcolor='#F5F5F5')
    radio_female.pack(side=tk.LEFT, padx=10)
    
    # å†æ³•é€‰æ‹©æ¡†
    å†æ³•_frame = tk.Frame(è¾“å…¥çª—å£, bg='#F5F5F5')
    å†æ³•_frame.pack(pady=10)
    
    å†æ³•_æ ‡ç­¾ = tk.Label(å†æ³•_frame, text="å†æ³•ï¼š", font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#F5F5F5', fg='#333333')
    å†æ³•_æ ‡ç­¾.pack(side=tk.LEFT, padx=5)
    å†æ³•_var = tk.StringVar(value="å…¬å†")         #åˆ›å»ºäº†å†æ³•_varå¯¹è±¡ï¼Œç”¨äºå­˜å‚¨ç”¨æˆ·é€‰æ‹©çš„ã€å†æ³•ã€‘
    radio_solar = tk.Radiobutton(å†æ³•_frame, text="å…¬å†", variable=å†æ³•_var, value="å…¬å†", font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#F5F5F5', fg='#333333', selectcolor='#F5F5F5')
    radio_solar.pack(side=tk.LEFT, padx=10)
    radio_lunar = tk.Radiobutton(å†æ³•_frame, text="å†œå†", variable=å†æ³•_var, value="å†œå†", font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#F5F5F5', fg='#333333', selectcolor='#F5F5F5')
    radio_lunar.pack(side=tk.LEFT, padx=10)
    
    # å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œåˆ¤æ–­æ˜¯å¦ç›´æ¥è¾“å…¥å…«å­—
    direct_input = tk.BooleanVar(value=False)
    
    # å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåˆ‡æ¢åˆ°ç›´æ¥è¾“å…¥å…«å­—çš„ç•Œé¢
    def switch_to_direct_input():
        # å°†direct_inputè®¾ç½®ä¸ºTrue
        direct_input.set(True)
        # å…³é—­å½“å‰çª—å£
        è¾“å…¥çª—å£.destroy()
    
    # åˆ›å»º"æˆ‘è¦ç›´æ¥è¾“å…¥å…«å­—ï¼"æŒ‰é’®
    direct_input_button = tk.Button(è¾“å…¥çª—å£, text="æˆ‘è¦ç›´æ¥è¾“å…¥å…«å­—ï¼", command=switch_to_direct_input,
                                    font=æŒ‰é’®å­—ä½“è®¾ç½®, bg='#eeeeee', fg='#a2a2a2',
                                    activebackground='#d0d0d0', activeforeground='#FFFFFF',
                                    bd=0, padx=10, pady=5, relief='flat')
    direct_input_button.pack(pady=10)
    
    # å®šä¹‰æäº¤æŒ‰é’®çš„å‡½æ•°
    def submit():
        # è·å–ç”¨æˆ·è¾“å…¥çš„å€¼
        year = text_vars[0].get()
        month = text_vars[1].get()
        day = text_vars[2].get()
        time = text_vars[3].get()
        gender = æ€§åˆ«å˜é‡.get()
        å†æ³• = å†æ³•_var.get()
    
        # åˆ›å»ºä¸€ä¸ªNamespaceå¯¹è±¡æ¥å­˜å‚¨è¿™äº›å€¼ï¼Œå°†è¾“å…¥çš„å€¼å­˜å‚¨åˆ°optionsä¸­ï¼ˆè¿™ä¸ªoptionså¯¹è±¡å°±æ˜¯æœ€ç»ˆä¼ é€’ç»™è„šæœ¬çš„æ•°æ®ï¼‰
        options = Namespace()
        options.year = year
        options.month = month
        options.day = day
        options.time = time
        options.n = (gender == "å¥³")
        options.g = (å†æ³• == "å…¬å†")  # æ˜¯å¦é‡‡ç”¨å…¬å†
        options.r = False  # é—°æœˆï¼Œé»˜è®¤ä¸ºFalse
        options.b = False  # æ˜¯å¦ç›´æ¥è¾“å…¥å…«å­—
        options.start = 1850  # é»˜è®¤å€¼
        options.end = '2030'  # é»˜è®¤å€¼
    
        # å…³é—­çª—å£å¹¶è¿”å›options
        è¾“å…¥çª—å£.destroy()
        è¾“å…¥çª—å£.options = options
    

    # åˆ›å»º"æäº¤"æŒ‰é’®
    submit_button = tk.Button(è¾“å…¥çª—å£, text="æäº¤", command=submit,
                              font=æŒ‰é’®å­—ä½“è®¾ç½®, bg='#eeeeee', fg='#a2a2a2',
                              activebackground='#d0d0d0', activeforeground='#FFFFFF',
                              bd=0, padx=20, pady=10, relief='flat')
    submit_button.pack(pady=10)
    
    # è¿›å…¥ä¸»å¾ªç¯ï¼Œæ˜¾ç¤ºçª—å£
    è¾“å…¥çª—å£.mainloop()
    
    # å¦‚æœdirect_inputä¸ºTrueï¼Œè·³è½¬åˆ°ç›´æ¥è¾“å…¥å…«å­—çš„ç•Œé¢
    if direct_input.get():
        # è°ƒç”¨ç›´æ¥è¾“å…¥å…«å­—çš„å‡½æ•°
        options = è·å–ç”¨æˆ·åœ¨ç•Œé¢é‡Œè¾“å…¥çš„ä¿¡æ¯_ç›´æ¥è¾“å…¥å…«å­—()
        return options
    else:
        try:
            return è¾“å…¥çª—å£.options
        except AttributeError:
            print("æ²¡æœ‰è¾“å…¥ä»»ä½•å†…å®¹ï¼Œç¨‹åºé€€å‡º")
            sys.exit(0)


# ã€ç›´æ¥è¾“å…¥å…«å­—ã€‘çš„å‡½æ•°
def è·å–ç”¨æˆ·åœ¨ç•Œé¢é‡Œè¾“å…¥çš„ä¿¡æ¯_ç›´æ¥è¾“å…¥å…«å­—():
    import sxtwl
    # åˆ›å»ºæ–°çª—å£
    è¾“å…¥çª—å£ = tk.Tk()
    è¾“å…¥çª—å£.title("ç›´æ¥è¾“å…¥å…«å­—")
    è¾“å…¥çª—å£.geometry("1100x400")

    # å®šä¹‰å¤©å¹²å’Œåœ°æ”¯çš„é€‰é¡¹
    åå¤©å¹²çš„åå­—åˆ—è¡¨ = ["ç”²", "ä¹™", "ä¸™", "ä¸", "æˆŠ", "å·±", "åºš", "è¾›", "å£¬", "ç™¸"]
    åäºŒåœ°æ”¯çš„åå­—åˆ—è¡¨ = ["å­", "ä¸‘", "å¯…", "å¯", "è¾°", "å·³", "åˆ", "æœª", "ç”³", "é…‰", "æˆŒ", "äº¥"]

    # å®šä¹‰å˜é‡ï¼Œç”¨äºå­˜å‚¨é€‰æ‹©çš„å¤©å¹²å’Œåœ°æ”¯
    å¤©å¹²_vars = [tk.StringVar() for _ in range(4)]
    åœ°æ”¯_vars = [tk.StringVar() for _ in range(4)]

    # åˆ›å»ºå››æŸ±é€‰æ‹©æ¡†
    columns = ["å¹´æŸ±", "æœˆæŸ±", "æ—¥æŸ±", "æ—¶æŸ±"]
    for i in range(4):
        frame = tk.Frame(è¾“å…¥çª—å£)
        frame.pack(side=tk.LEFT, padx=5, pady=5)

        label = tk.Label(frame, text=columns[i])
        label.pack()

        # å¤©å¹²é€‰æ‹©æ¡†
        å¤©å¹²_combo = ttk.Combobox(frame, values=åå¤©å¹²çš„åå­—åˆ—è¡¨, textvariable=å¤©å¹²_vars[i])
        å¤©å¹²_combo.pack()
        å¤©å¹²_combo.current(0)  # é»˜è®¤ä¸ºç¬¬ä¸€ä¸ªé€‰é¡¹

        # åœ°æ”¯é€‰æ‹©æ¡†
        åœ°æ”¯_combo = ttk.Combobox(frame, values=åäºŒåœ°æ”¯çš„åå­—åˆ—è¡¨, textvariable=åœ°æ”¯_vars[i])
        åœ°æ”¯_combo.pack()
        åœ°æ”¯_combo.current(0)
    # æ€§åˆ«é€‰æ‹©æ¡†
    global æ€§åˆ«å˜é‡
    gender_frame = tk.Frame(è¾“å…¥çª—å£, bg='#F5F5F5')
    gender_frame.pack(pady=10)
    gender_æ ‡ç­¾ = tk.Label(gender_frame, text="æ€§åˆ«ï¼š", bg='#F5F5F5', fg='#333333')
    gender_æ ‡ç­¾.pack(side=tk.LEFT, padx=5)
    æ€§åˆ«å˜é‡ = tk.StringVar(value="ç”·")  # åˆ›å»ºäº†æ€§åˆ«å˜é‡å¯¹è±¡ï¼Œç”¨äºå­˜å‚¨ç”¨æˆ·é€‰æ‹©çš„ã€æ€§åˆ«ã€‘
    radio_male = tk.Radiobutton(gender_frame, text="ç”·", variable=æ€§åˆ«å˜é‡, value="ç”·", bg='#F5F5F5', fg='#333333', selectcolor='#F5F5F5')
    radio_male.pack(side=tk.LEFT, padx=10)
    radio_female = tk.Radiobutton(gender_frame, text="å¥³", variable=æ€§åˆ«å˜é‡, value="å¥³", bg='#F5F5F5', fg='#333333', selectcolor='#F5F5F5')
    radio_female.pack(side=tk.LEFT, padx=10)
    
    # æ·»åŠ é»˜è®¤ç”Ÿæ—¥é€‰é¡¹
    use_default_date = tk.BooleanVar(value=True)
    # åˆ›å»º"é»˜è®¤ç”Ÿæ—¥"å¤é€‰æ¡†
    default_date_checkbutton = tk.Checkbutton(è¾“å…¥çª—å£,text="é»˜è®¤ç”Ÿæ—¥",variable=use_default_date,font=("Arial", 10),bg='#F5F5F5')
    default_date_checkbutton.pack(pady=5)


    # å®šä¹‰æ˜¾ç¤ºå¯èƒ½ç”Ÿæ—¥é€‰æ‹©çª—å£å‡½æ•°
    def æ˜¾ç¤ºå¯èƒ½ç”Ÿæ—¥é€‰æ‹©çª—å£(possible_dates):
        é€‰æ‹©çª—å£ = tk.Toplevel()
        é€‰æ‹©çª—å£.title("é€‰æ‹©å¯èƒ½çš„ç”Ÿæ—¥")
        é€‰æ‹©çª—å£.geometry("400x300")
        
        # åˆ›å»ºæ»šåŠ¨æ¡å’Œåˆ—è¡¨æ¡†
        scrollbar = tk.Scrollbar(é€‰æ‹©çª—å£)
        scrollbar.pack(side=tk.RIGHT, fill=tk.Y)
        
        listbox = tk.Listbox(é€‰æ‹©çª—å£, yscrollcommand=scrollbar.set, font=("Arial", 12))
        listbox.pack(fill=tk.BOTH, expand=True)
        
        scrollbar.config(command=listbox.yview)
        # æ·»åŠ æ—¥æœŸåˆ°åˆ—è¡¨
        for date in possible_dates:
            listbox.insert(tk.END, f"å…¬å†ï¼š{date.strftime('%Y - %m - %d - %H:%M:%S')}")
        
        # é€‰æ‹©æ—¥æœŸçš„å¤„ç†å‡½æ•°
        def on_select(event):
            selection = listbox.get(listbox.curselection())
            date_str = selection.split("ï¼š")[1].strip()
            year, month, day, time = date_str.split(" - ")
            hour = time.split(":")[0]
            
            # æ›´æ–°options
            è¾“å…¥çª—å£.selected_date = {'year': year,'month': month,'day': day,'time': hour}
            é€‰æ‹©çª—å£.destroy()
        
        listbox.bind('<<ListboxSelect>>', on_select)



    # å®šä¹‰æäº¤å‡½æ•°
    def æäº¤ç›´æ¥è¾“å…¥çš„å…«å­—ä¿¡æ¯():
        # è·å–ç”¨æˆ·è¾“å…¥çš„å€¼
        year = å¤©å¹²_vars[0].get() + åœ°æ”¯_vars[0].get()
        month = å¤©å¹²_vars[1].get() + åœ°æ”¯_vars[1].get()
        day = å¤©å¹²_vars[2].get() + åœ°æ”¯_vars[2].get()
        time = å¤©å¹²_vars[3].get() + åœ°æ”¯_vars[3].get()
        gender = æ€§åˆ«å˜é‡.get()

        # åˆ›å»ºoptionså¯¹è±¡
        options = Namespace()
        options.year = year
        options.month = month
        options.day = day
        options.time = time
        options.n = (gender == "å¥³")
        options.g = False
        options.r = False
        options.b = True
        options.start = 1801
        options.end = '2040'

        if use_default_date.get():
            # ä½¿ç”¨é»˜è®¤ç”Ÿæ—¥
            try:
                jds = sxtwl.siZhu2Year(getGZ(year), getGZ(month), getGZ(day), getGZ(time), options.start, int(options.end))
            except Exception as e:
                print(f"è®¡ç®—ç”Ÿæ—¥æ—¶å‡ºé”™ï¼š{e}")
                messagebox.showerror("é”™è¯¯", f"è®¡ç®—ç”Ÿæ—¥æ—¶å‡ºé”™ï¼š{e}")
                return

            possible_dates = []
            for jd in jds:
                t = sxtwl.JD2DD(jd)
                possible_dates.append(datetime.datetime(int(t.Y), int(t.M), int(t.D), int(t.h), 0, 0))

            if possible_dates:
                current_year = datetime.datetime.now().year
                chosen_date = min(
                    (date for date in possible_dates if date.year <= current_year),
                    key=lambda x: abs(x.year - current_year)
                )
                options.selected_datetime = chosen_date

                print(f"å·²é€‰æ‹©é»˜è®¤ç”Ÿæ—¥ï¼š{chosen_date.strftime('%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶')}")
            else:
                messagebox.showwarning("è­¦å‘Š", "æœªæ‰¾åˆ°å¯èƒ½çš„ç”Ÿæ—¥")
                return
        else:
            # æ˜¾ç¤ºå¯èƒ½ç”Ÿæ—¥é€‰æ‹©çª—å£
            try:
                jds = sxtwl.siZhu2Year(getGZ(year), getGZ(month), getGZ(day), getGZ(time), options.start, int(options.end))
            except Exception as e:
                print(f"è®¡ç®—ç”Ÿæ—¥æ—¶å‡ºé”™ï¼š{e}")
                messagebox.showerror("é”™è¯¯", f"è®¡ç®—ç”Ÿæ—¥æ—¶å‡ºé”™ï¼š{e}")
                return

            possible_dates = []
            for jd in jds:
                t = sxtwl.JD2DD(jd)
                possible_dates.append(datetime.datetime(int(t.Y), int(t.M), int(t.D), int(t.h), 0, 0))

            if possible_dates:
                æ˜¾ç¤ºå¯èƒ½ç”Ÿæ—¥é€‰æ‹©çª—å£(possible_dates)
                è¾“å…¥çª—å£.wait_window()  # ç­‰å¾…çª—å£å…³é—­
                if hasattr(è¾“å…¥çª—å£, 'selected_date'):
                    options.year = è¾“å…¥çª—å£.selected_date['year']
                    options.month = è¾“å…¥çª—å£.selected_date['month']
                    options.day = è¾“å…¥çª—å£.selected_date['day']
                    options.time = è¾“å…¥çª—å£.selected_date['time']
                else:
                    return
            else:
                messagebox.showwarning("è­¦å‘Š", "æœªæ‰¾åˆ°å¯èƒ½çš„ç”Ÿæ—¥")
                return

        if è¾“å…¥çª—å£.winfo_exists():  
            è¾“å…¥çª—å£.destroy()
        
        # æ›´æ–°è¾“å…¥çª—å£çš„optionså±æ€§
        è¾“å…¥çª—å£.options = options

    # åˆ›å»º"ç¡®å®š"æŒ‰é’®
    submit_button = tk.Button(è¾“å…¥çª—å£, text="ç¡®å®š", command=æäº¤ç›´æ¥è¾“å…¥çš„å…«å­—ä¿¡æ¯)
    submit_button.pack(pady=10)

    # è¿›å…¥ä¸»å¾ªç¯
    è¾“å…¥çª—å£.mainloop()

    # è¿”å›options
    return è¾“å…¥çª—å£.options



"""
è¿™æ˜¯ã€è¾“å‡ºã€‘çš„GUIç•Œé¢
"""
# åˆå§‹åŒ–å—åˆ¶æ¬¡æ•°å­—å…¸ï¼Œå­˜å‚¨ä¸»ä½“åå­—ä¿¡æ¯å’Œå—åˆ¶æ¬¡æ•°
å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸ = {'æœˆæ”¯': 0, 'æ—¥æ”¯': 0, 'æœˆå¹²': 0, 'æ—¶å¹²': 0}

# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåœ¨GUIä¸­æ˜¾ç¤ºå››æŸ±å…«å­—å’Œåç¥æ ‡ç­¾
def æ˜¾ç¤ºå››æŸ±å…«å­—å‘½ç›˜ç»“æœçš„ç•Œé¢(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨, å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨, å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨):
    #åœ¨GUIç•Œé¢ä¸­æ˜¾ç¤ºå››æŸ±å…«å­—å’Œåç¥æ ‡ç­¾ï¼Œå¹¶æä¾›ä¸¤ä¸ªæŒ‰é’®ï¼Œä¾›ç”¨æˆ·è‡ªè¡Œé€‰æ‹©ï¼Œæ˜¯å¦ç»§ç»­æ˜¾ç¤ºå…¶ä»–ä¹±ä¸ƒå…«ç³Ÿä¿¡æ¯ã€‚
    #å‚æ•°ï¼š1.åå¤©å¹²çš„åå­—åˆ—è¡¨: å¤©å¹²åˆ—è¡¨    2.åäºŒåœ°æ”¯çš„åå­—åˆ—è¡¨: åœ°æ”¯åˆ—è¡¨    3.å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨: å¤©å¹²å¯¹åº”çš„åç¥æ ‡ç­¾    4.å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨: åœ°æ”¯å¯¹åº”çš„åç¥æ ‡ç­¾
    #è¿”å›ï¼šshow_remaining (bool): ç”¨æˆ·æ˜¯å¦é€‰æ‹©ç»§ç»­æ˜¾ç¤ºå…¶ä»–ä¿¡æ¯
    # åˆ›å»ºä¸»çª—å£
    result_window = tk.Tk()
    result_window.title("å››æŸ±å…«å­—æ’ç›˜ç»“æœ")
    result_window.configure(bg='#F5F5F5')

    # è®¾ç½®å­—ä½“
    æ ‡é¢˜å­—ä½“è®¾ç½® = ("Arial", 20, "bold")
    æ ‡ç­¾å­—ä½“è®¾ç½® = ("Arial", 18)
    small_font = ("Arial", 14)
    shen_font = ("Arial", 12)  # ç”¨äºåç¥æ ‡ç­¾

    # åˆ›å»ºæ ‡é¢˜
    æ ‡é¢˜_æ ‡ç­¾ = tk.Label(result_window, text="å…«å­—æ’ç›˜ç»“æœ", font=æ ‡é¢˜å­—ä½“è®¾ç½®, bg='#F5F5F5')
    æ ‡é¢˜_æ ‡ç­¾.pack(pady=10)

    # åˆ›å»ºå››æŸ±å±•ç¤ºæ¡†æ¶
    å››æŸ±ä»¬çš„æ¡†æ¶ = tk.Frame(result_window, bg='#F5F5F5')
    å››æŸ±ä»¬çš„æ¡†æ¶.pack(pady=30)

    # å®šä¹‰æŸ±å
    pillars = ["å¹´æŸ±", "æœˆæŸ±", "æ—¥æŸ±", "æ—¶æŸ±"]

    for i in range(4):
        # åˆ›å»ºæ¯ä¸€æŸ±çš„æ¡†æ¶
        æŸ±_æ¡†æ¶ = tk.Frame(å››æŸ±ä»¬çš„æ¡†æ¶, bg='#F5F5F5', bd=0)
        æŸ±_æ¡†æ¶.grid(row=0, column=i, padx=30)

        # æ˜¾ç¤ºæŸ±å
        pillar_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=pillars[i], font=small_font, bg='#F5F5F5', fg='#A0A0A0')
        pillar_æ ‡ç­¾.pack(pady=5)

        # æ˜¾ç¤ºå¤©å¹²çš„åç¥æ ‡ç­¾
        å¤©å¹²_shen_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[i], font=shen_font, bg='#F5F5F5', fg='#C0C0C0')
        å¤©å¹²_shen_æ ‡ç­¾.pack()

        # æ˜¾ç¤ºå¤©å¹²
        å¤©å¹²_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[i], font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#F5F5F5')
        å¤©å¹²_æ ‡ç­¾.pack()

        # æ˜¾ç¤ºåœ°æ”¯
        åœ°æ”¯_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[i], font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#F5F5F5')
        åœ°æ”¯_æ ‡ç­¾.pack()

        # æ˜¾ç¤ºåœ°æ”¯çš„åç¥æ ‡ç­¾
        åœ°æ”¯_shen_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨[i], font=shen_font, bg='#F5F5F5', fg='#C0C0C0', bd=0)
        åœ°æ”¯_shen_æ ‡ç­¾.pack()

    # å®šä¹‰å›è°ƒå‡½æ•°
    def quit_without_print():
        result_window.quit()
        result_window.destroy()
    
    def quit_with_print():
        # è¿™é‡Œå¯ä»¥æ·»åŠ æ˜¾ç¤ºå…¶ä»–ä¿¡æ¯çš„é€»è¾‘
        result_window.quit()
        result_window.destroy()
        
        # è¿›å…¥æ–°çš„ç•Œé¢
        result_window.quit()
        result_window.destroy()
        
        # è°ƒç”¨æ–°çš„å‡½æ•°æ˜¾ç¤ºåˆ†æç»“æœ
        å‘½ç›˜åˆ†æç•Œé¢(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨)

    # åˆ›å»ºæŒ‰é’®æ¡†æ¶
    buttons_frame = tk.Frame(result_window, bg='#F5F5F5')
    buttons_frame.pack(pady=20)

    # å®šä¹‰æŒ‰é’®æ ·å¼
    style = ttk.Style()
    style.theme_use('default')  # ä½¿ç”¨é»˜è®¤ä¸»é¢˜ä»¥ç¡®ä¿è‡ªå®šä¹‰æ ·å¼ç”Ÿæ•ˆ
    style.configure('TButton',
                    font=("Arial", 14),
                    padding=10,
                    relief="flat",
                    foreground="#333333",  # æ”¹ä¸ºæ·±ç°è‰²æ–‡å­—
                    background="#eeeeee",
                    borderwidth=0)
    style.map('TButton',
              background=[('active', '#d5d5d5')],
              foreground=[('active', '#FFFFFF')])  # é¼ æ ‡æ‚¬åœæ—¶æ–‡å­—å˜ç™½

    import time


    # å®šä¹‰"æ–­æ—ºè¡°ï¼Œæ‰¾ç”¨ç¥"æŒ‰é’®çš„äº‹ä»¶å‡½æ•°ï¼Œåœ¨åŒä¸€ä½ç½®æ·»åŠ ï¼š
    def å‡ºç°åˆ†æå‘½ç›˜ç•Œé¢çª—å£():
        # å‘å…‰ç‰¹æ•ˆï¼ˆæŒç»­ 0.1 ç§’ï¼‰
        for _ in range(1):
            result_window.configure(bg='#FFFFE0')  # å‘å…‰é¢œè‰²
            result_window.update()
            time.sleep(0.1)
            result_window.configure(bg='#F5F5F5')  # æ¢å¤åŸå§‹èƒŒæ™¯è‰²
            result_window.update()
            time.sleep(0.1)
        
        # è°ƒç”¨æ–°çš„å‡½æ•°æ˜¾ç¤ºåˆ†æç»“æœ
        å‘½ç›˜åˆ†æç•Œé¢(result_window,æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨, å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨, å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨, æ€§åˆ«å˜é‡)

    # åˆ›å»º"æ–­æ—ºè¡°ï¼Œæ‰¾ç”¨ç¥"æŒ‰é’®
    btn_analyze = ttk.Button(buttons_frame, text="æ–­æ—ºè¡°ï¼Œæ‰¾ç”¨ç¥", command=å‡ºç°åˆ†æå‘½ç›˜ç•Œé¢çª—å£)
    btn_analyze.pack(side=tk.LEFT, padx=10)

    # åˆ›å»ºå…¶ä»–æŒ‰é’®
    btn_quit_no = ttk.Button(buttons_frame, text="ä¸æ˜¾ç¤ºå…¶ä»–ä¿¡æ¯", command=quit_without_print)
    btn_quit_no.pack(side=tk.LEFT, padx=10)
 
    # åˆ›å»º"æ˜¾ç¤ºå…¶ä»–ä¿¡æ¯"æŒ‰é’®
    btn_quit_yes = ttk.Button(buttons_frame, text="é™¤äº†å››æŸ±å…«å­—ï¼Œå†å‘Šè¯‰æˆ‘å…¶ä»–ä¿¡æ¯", command=quit_with_print)
    btn_quit_yes.pack(side=tk.LEFT, padx=10)

    # è¿è¡Œä¸»å¾ªç¯
    result_window.mainloop()
    return æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨, å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨, å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨



# ä½¿ç”¨GUIè·å–ç”¨æˆ·è¾“å…¥çš„options
options = è·å–ç”¨æˆ·åœ¨ç•Œé¢é‡Œè¾“å…¥çš„ä¿¡æ¯()
Gans = collections.namedtuple("Gans", "year month day time")  #åˆ›å»ºä¸€ä¸ªåä¸º Gans çš„ namedtupleï¼Œå®ƒæœ‰å››ä¸ªå­—æ®µï¼šyearã€monthã€dayã€time
Zhis = collections.namedtuple("Zhis", "year month day time")

#å¦‚æœç”¨æˆ·é€‰æ‹©ç›´æ¥è¾“å…¥å…«å­—ï¼ˆoptions.bä¸ºTrueï¼‰ï¼Œä½¿ç”¨sxtwlåº“ï¼ˆä¸€ä¸ªä¸­å›½å†æ³•åº“ï¼‰æ¥å¤„ç†è¾“å…¥çš„å…«å­—ï¼Œå°†è¾“å…¥çš„å¤©å¹²åœ°æ”¯è½¬æ¢ä¸ºå¯èƒ½çš„å‡ºç”Ÿæ—¶é—´ã€‚
#å¦‚æœç”¨æˆ·è¾“å…¥çš„æ˜¯ç”Ÿè¾°ï¼ˆoptions.bä¸ºFalseï¼‰ï¼Œä»£ç ä¼šï¼šæ ¹æ®æ˜¯å¦ä½¿ç”¨å…¬å†ï¼ˆoptions.gï¼‰æ¥é€‰æ‹©å¤„ç†æ–¹æ³•ã€‚å¦‚æœæ˜¯å…¬å†ï¼Œå…ˆè½¬æ¢ä¸ºå†œå†ï¼›å¦‚æœæ˜¯å†œå†ï¼Œç›´æ¥ä½¿ç”¨ã€‚ä½¿ç”¨lunar_pythonåº“æ¥è®¡ç®—å…«å­—ï¼ˆè¿™åæ˜ äº†ä¼ ç»Ÿå…«å­—æ’ç›˜ä¸­ï¼Œéœ€è¦å…ˆç¡®å®šå†œå†æ—¥æœŸçš„æ­¥éª¤ï¼‰
#ä»£ç ä½¿ç”¨ba.getYearGan()ç­‰æ–¹æ³•è·å–å¹´ã€æœˆã€æ—¥ã€æ—¶çš„å¤©å¹²ã€‚ä½¿ç”¨ba.getYearZhi()ç­‰æ–¹æ³•è·å–å¹´ã€æœˆã€æ—¥ã€æ—¶çš„åœ°æ”¯ã€‚ï¼ˆä»£ç ä¸­çš„options.rç”¨äºå¤„ç†é—°æœˆæƒ…å†µï¼‰
#ã€è¾“å…¥å¤„ç†ã€‘
from ganzhi import åç¥å…³ç³»è¡¨,åœ°æ”¯è—å¹²å­—å…¸,åœ°æ”¯åˆä¼šç ´åˆ‘å®³å­—å…¸
from datas import åœ°æ”¯ç©ºäº¡å­—å…¸,year_shens,month_shens,day_shens,g_shens
from common import è®¡ç®—é˜´é˜³å±æ€§,å¤©å¹²é—´åˆå†²å…³ç³»åˆ¤æ–­

if options.b:
    if hasattr(options, 'selected_datetime'):
        # ç”¨æˆ·é€‰æ‹©äº†é»˜è®¤ç”Ÿæ—¥ï¼Œä½¿ç”¨å…¬å†æ—¥æœŸè®¡ç®—å…«å­—
        from lunar_python import Solar, Lunar

        # åˆ›å»º Solar å¯¹è±¡
        solar = Solar.fromYmdHms(
            options.selected_datetime.year,
            options.selected_datetime.month,
            options.selected_datetime.day,
            options.selected_datetime.hour,
            0,
            0
        )
        # è·å– Lunar å¯¹è±¡
        lunar = solar.getLunar()
        # è·å–å…«å­—å¯¹è±¡
        ba = lunar.getEightChar()

        # è·å–å¤©å¹²å’Œåœ°æ”¯åˆ—è¡¨
        æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨ = Gans(
            year=ba.getYearGan(),
            month=ba.getMonthGan(),
            day=ba.getDayGan(),
            time=ba.getTimeGan()
        )
        æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨ = Zhis(
            year=ba.getYearZhi(),
            month=ba.getMonthZhi(),
            day=ba.getDayZhi(),
            time=ba.getTimeZhi()
        )

    else:
        # ç”¨æˆ·æœªé€‰æ‹©é»˜è®¤ç”Ÿæ—¥ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„ BaZi ç±»
        ba = BaZi(options.year, options.month, options.day, options.time)
        æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨ = Gans(
            year=options.year[0],
            month=options.month[0],
            day=options.day[0],
            time=options.time[0]
        )
        æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨ = Zhis(
            year=options.year[1],
            month=options.month[1],
            day=options.day[1],
            time=options.time[1]
        )
else:
    # åŸæœ‰çš„å¤„ç†ç”Ÿè¾°çš„ä»£ç 
    if options.g:
        solar = Solar.fromYmdHms(int(options.year), int(options.month), int(options.day), int(options.time), 0, 0)
        lunar = solar.getLunar()
    else:
        month_ = int(options.month)*-1 if options.r else int(options.month)
        lunar = Lunar.fromYmdHms(int(options.year), month_, int(options.day),int(options.time), 0, 0)
        solar = lunar.getSolar()
    #å¦‚æœç”¨æˆ·è¾“å…¥ç”Ÿè¾°
    day = lunar
    ba = lunar.getEightChar() 
    æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨ = Gans(year=ba.getYearGan(), month=ba.getMonthGan(), day=ba.getDayGan(), time=ba.getTimeGan())
    æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨ = Zhis(year=ba.getYearZhi(), month=ba.getMonthZhi(), day=ba.getDayZhi(), time=ba.getTimeZhi())
    
    global_ba = ba

æ‰€æœ‰æ–­è¯­ = []  # ç”¨æ¥å­˜å‚¨æ‰€æœ‰æ–­è¯­
å½“å‰é€‰ä¸­æµå¹´åˆ—è¡¨ = []
å½“å‰é€‰ä¸­å¤§è¿ = None
def æ”¶é›†æ–­è¯­(æ–­è¯­å†…å®¹):   # æ”¶é›†æ–­è¯­ï¼Œå¹¶æ‰“å°å‡ºæ¥
    global æ‰€æœ‰æ–­è¯­
    æ‰€æœ‰æ–­è¯­.append(æ–­è¯­å†…å®¹)


# å…ˆè®¡ç®—å¤§è¿ä¿¡æ¯
def è®¡ç®—å¤§è¿ä¿¡æ¯():
    from lunar_python import Solar, Lunar
    global å¤§è¿å¤©å¹²å­—å…¸, å¤§è¿åœ°æ”¯å­—å…¸, global_ba
    # å…³é”®çš„ã€Šå¤§è¿å­—å…¸ã€‹çš„åˆ›å»º
    å¤§è¿å¤©å¹²å­—å…¸ = {}
    å¤§è¿åœ°æ”¯å­—å…¸ = {}
    
    if options.b:
        if hasattr(options, 'selected_datetime'):
            # å¦‚æœæœ‰é€‰å®šçš„å…¬å†æ—¥æœŸï¼Œä½¿ç”¨å…¬å†æ—¥æœŸåˆ›å»ºlunarå¯¹è±¡
            lunar = Lunar.fromSolar(Solar.fromYmdHms(
                options.selected_datetime.year,
                options.selected_datetime.month,
                options.selected_datetime.day,
                options.selected_datetime.hour,
                0,
                0
            ))
            lunar = solar.getLunar()
            global_ba = lunar.getEightChar()  # é‡è¦ï¼šæ›´æ–°global_ba
        else:
            lunar = Lunar.fromYmdHms(int(options.year), int(options.month), int(options.day),int(options.time), 0, 0)    # ä½¿ç”¨æ¨ç®—å‡ºçš„å‡ºç”Ÿæ—¶é—´åˆ›å»ºlunarå¯¹è±¡
            global_ba = lunar.getEightChar() 
    
    else:  # æ­£å¸¸è¾“å…¥ç”Ÿæ—¥çš„æƒ…å†µ
        lunar = Lunar.fromYmdHms(int(options.year), int(options.month), int(options.day),int(options.time), 0, 0)    # ä½¿ç”¨æ¨ç®—å‡ºçš„å‡ºç”Ÿæ—¶é—´åˆ›å»ºlunarå¯¹è±¡
        global_ba = lunar.getEightChar()   # ä½¿ç”¨lunarå¯¹è±¡è·å–å…«å­—å’Œå¤§è¿ä¿¡æ¯
        
    yun = global_ba.getYun(not options.n)
    for dayun in yun.getDaYun()[1:]:
        ganzhi = dayun.getGanZhi()
        å¤§è¿å¤©å¹² = ganzhi[0]
        å¤§è¿åœ°æ”¯ = ganzhi[1]
        zhus = [item for item in zip(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨)]
        # å¡«å……â€œå¤§è¿å¤©å¹²å­—å…¸â€å’Œâ€œå¤§è¿åœ°æ”¯å­—å…¸â€çš„ä¸€çº§é”®å’ŒäºŒçº§é”®çš„å€¼
        å¤§è¿å¤©å¹²å­—å…¸[å¤§è¿å¤©å¹²] = {"é˜´é˜³å±æ€§": è®¡ç®—é˜´é˜³å±æ€§(å¤§è¿å¤©å¹²),"æ—ºå¼±çŠ¶æ€": "","æ˜¯å¦å®ç¥": ""}
        å¤§è¿åœ°æ”¯å­—å…¸[å¤§è¿åœ°æ”¯] = {"é˜´é˜³å±æ€§": è®¡ç®—é˜´é˜³å±æ€§(å¤§è¿åœ°æ”¯),"æ—ºå¼±çŠ¶æ€": "","æ˜¯å¦å®ç¥": "","æ˜¯å¦ç©ºäº¡": "ç©ºäº¡" if å¤§è¿åœ°æ”¯ in åœ°æ”¯ç©ºäº¡å­—å…¸[zhus[2]] else "ä¸ç©ºäº¡"}
    # æ‰“å°è°ƒè¯•ä¿¡æ¯
    print("\n=== ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸å¤§è¿å¤©å¹²å­—å…¸ ===")
    for å¤©å¹², å±æ€§ in å¤§è¿å¤©å¹²å­—å…¸.items():
        print(f"{å¤©å¹²}: {å±æ€§}")
    print("\n=== ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸ğŸ§˜â€â™€ï¸å¤§è¿åœ°æ”¯å­—å…¸ ===")
    for åœ°æ”¯, å±æ€§ in å¤§è¿åœ°æ”¯å­—å…¸.items():
        print(f"{åœ°æ”¯}: {å±æ€§}")
    return å¤§è¿å¤©å¹²å­—å…¸, å¤§è¿åœ°æ”¯å­—å…¸
è®¡ç®—å¤§è¿ä¿¡æ¯()



def å‘½ç›˜åˆ†æç•Œé¢(parent, æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨,å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨, å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨, æ€§åˆ«):
    # å¯¼å…¥å¿…è¦çš„åº“
    import tkinter as tk
    from tkinter import ttk
    import time  # ç”¨äºå¯èƒ½çš„åŠ¨ç”»æ•ˆæœ
    from datas import åœ°æ”¯ç©ºäº¡å­—å…¸  # å¯¼å…¥ç©ºäº¡åœ°æ”¯çš„æ•°æ®
    global æ€§åˆ«å˜é‡, æ‰€æœ‰æ–­è¯­,æ‰€æœ‰æ–­è¯­,å¤§è¿å¤©å¹²å­—å…¸,å¤§è¿åœ°æ”¯å­—å…¸
    æ‰€æœ‰æ–­è¯­.clear()
    æ€§åˆ«å˜é‡ = æ€§åˆ«

    bazi_strength_analysis = {}   # åˆå§‹åŒ–å…«å­—åŠ›é‡åˆ†æå­—å…¸ï¼Œå­˜å‚¨ä¸»ä½“åå­—ä¿¡æ¯ã€å±æ€§ã€åŠ›é‡æ•°å€¼
    åœ°æ”¯_æ ‡ç­¾_åˆ—è¡¨ = []   # åˆå§‹åŒ–åˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨åœ°æ”¯æ ‡ç­¾

    # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸åˆ›å»ºæ–°çª—å£ï¼ŒæŒ‡å®šçˆ¶çª—å£ä¸ºparent
    åˆ†æå‘½ç›˜ç•Œé¢çª—å£ = tk.Toplevel(parent)
    åˆ†æå‘½ç›˜ç•Œé¢çª—å£.title("æ–­æ—ºè¡°æ‰¾ç”¨ç¥ï¼ˆæ–°æ´¾ç‹æ˜“æˆç®—æ³•ï¼‰")
    åˆ†æå‘½ç›˜ç•Œé¢çª—å£.configure(bg='#f5f5f1')  # è®¾ç½®"æ–­æ—ºè¡°æ‰¾ç”¨ç¥ï¼ˆæ–°æ´¾ç‹æ˜“æˆç®—æ³•ï¼‰"å­è¾“å‡ºç•Œé¢çš„èƒŒæ™¯é¢œè‰²
    åˆ†æå‘½ç›˜ç•Œé¢çª—å£.geometry("1550x850")  # è®¾ç½®çª—å£é•¿å®½
    # è®¾ç½®å­—ä½“å’Œæ ·å¼ï¼Œä¸æ˜¾ç¤ºç•Œé¢ä¿æŒä¸€è‡´
    æ ‡é¢˜å­—ä½“è®¾ç½® = ("Arial", 20, "bold")  # æ ‡é¢˜å­—ä½“
    æ ‡ç­¾å­—ä½“è®¾ç½® = ("Arial", 18)          # æ ‡ç­¾å­—ä½“
    small_font = ("Arial", 14)          # å°å·å­—ä½“
    shen_font = ("Arial", 10)           # åç¥æ ‡ç­¾å­—ä½“
    # åˆ›å»ºæ ‡é¢˜
    æ ‡é¢˜_æ ‡ç­¾ = tk.Label(åˆ†æå‘½ç›˜ç•Œé¢çª—å£, text="å…«å­—æ’ç›˜ç»“æœ", font=æ ‡é¢˜å­—ä½“è®¾ç½®, bg='#f5f5f1')
    æ ‡é¢˜_æ ‡ç­¾.pack(pady=20)
    # åˆ›å»ºå››æŸ±å±•ç¤ºæ¡†æ¶å¹¶ä½¿å…¶å±…ä¸­
    å››æŸ±ä»¬çš„æ¡†æ¶ = tk.Frame(åˆ†æå‘½ç›˜ç•Œé¢çª—å£, bg='#f5f5f1', width=900, height=300)   # widthã€heihtè®¾ç½®æ¡†æ¶çš„å®½åº¦å’Œé«˜åº¦ä¸ºå›ºå®šå€¼
    å››æŸ±ä»¬çš„æ¡†æ¶.pack(expand=False)
    # å®šä¹‰æŸ±å
    å¤©å¹²_shen_æ ‡ç­¾_åˆ—è¡¨ = []
    åœ°æ”¯_æ ‡ç­¾_åˆ—è¡¨ = []
    pillars = ["å¹´æŸ±", "æœˆæŸ±", "æ—¥æŸ±", "æ—¶æŸ±"]
    æŸ±_æ¡†æ¶_åˆ—è¡¨ = []  # å®šä¹‰ä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºå­˜å‚¨æ¯ä¸€æŸ±çš„æ¡†æ¶
    for i in range(4):
        # åˆ›å»ºæ¯ä¸€æŸ±çš„æ¡†æ¶å¹¶ä½¿å…¶åœ¨çˆ¶æ¡†æ¶ä¸­å±…ä¸­
        æŸ±_æ¡†æ¶ = tk.Frame(å››æŸ±ä»¬çš„æ¡†æ¶, bg='#f5f5f1', bd=0, width=300, height=200)  # widthã€heihtè®¾ç½®æ¡†æ¶çš„å®½åº¦å’Œé«˜åº¦ä¸ºå›ºå®šå€¼
        æŸ±_æ¡†æ¶.grid(row=1, column=i, padx=50, pady=(20, 20))
        æŸ±_æ¡†æ¶_åˆ—è¡¨.append(æŸ±_æ¡†æ¶)    # å°†æŸ±_æ¡†æ¶æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œæ–¹ä¾¿åç»­å®šä½
        # æ˜¾ç¤ºæŸ±å
        pillar_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=pillars[i], font=small_font, bg='#f5f5f1', fg='#A0A0A0')
        pillar_æ ‡ç­¾.pack(pady=5)
        # æ˜¾ç¤ºå¤©å¹²çš„åç¥æ ‡ç­¾ï¼ˆæš‚æ—¶åªæ˜¾ç¤ºåç¥ï¼Œå¿Œç”¨ç¥å½’å±ç¨åæ›´æ–°ï¼‰
        å¤©å¹²_shen_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[i], font=shen_font, bg='#f5f5f1', fg='#C0C0C0')
        å¤©å¹²_shen_æ ‡ç­¾.pack()
        å¤©å¹²_shen_æ ‡ç­¾_åˆ—è¡¨.append(å¤©å¹²_shen_æ ‡ç­¾)  # å°†å¤©å¹²åç¥æ ‡ç­¾å­˜å‚¨åˆ°åˆ—è¡¨ä¸­
        # æ˜¾ç¤ºå¤©å¹²
        å¤©å¹²_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[i], font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#f5f5f1')
        å¤©å¹²_æ ‡ç­¾.pack()
        # æ˜¾ç¤ºåœ°æ”¯
        åœ°æ”¯_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[i], font=æ ‡ç­¾å­—ä½“è®¾ç½®, bg='#f5f5f1', bd=0, padx=8, pady=8)
        åœ°æ”¯_æ ‡ç­¾.pack()
        # å°†åœ°æ”¯æ ‡ç­¾æ·»åŠ åˆ°åˆ—è¡¨ä¸­
        åœ°æ”¯_æ ‡ç­¾_åˆ—è¡¨.append(åœ°æ”¯_æ ‡ç­¾)
        # æ˜¾ç¤ºåœ°æ”¯çš„åç¥æ ‡ç­¾
        åœ°æ”¯_shen_æ ‡ç­¾ = tk.Label(æŸ±_æ¡†æ¶, text=å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨[i], font=shen_font, bg='#f5f5f1', fg='#d9d9d9', bd=0,padx=8, pady=2)
        åœ°æ”¯_shen_æ ‡ç­¾.pack()






    from ganzhi import  åå¤©å¹²äº”è¡Œå¯¹ç…§è¡¨, åäºŒåœ°æ”¯äº”è¡Œå¯¹ç…§è¡¨, äº”è¡Œä½œç”¨å…³ç³»å­—å…¸, æ™¦è„†å†²ç‰¹æ®Šå…³ç³»å­—å…¸, åå¤©å¹²çš„åå­—åˆ—è¡¨, åäºŒåœ°æ”¯çš„åå­—åˆ—è¡¨, åç¥å…³ç³»è¡¨, æœ‰æ ¹å­—å…¸
    # åˆå§‹åŒ–å…«å­—ä¿¡æ¯ä¸»å­—å…¸å­—å…¸
    å…«å­—ä¿¡æ¯ä¸»å­—å…¸ = {'å¹´å¹²': {}, 'å¹´æ”¯': {}, 'æœˆå¹²': {}, 'æœˆæ”¯': {}, 'æ—¥å¹²': {}, 'æ—¥æ”¯': {}, 'æ—¶å¹²': {}, 'æ—¶æ”¯': {}}

    # å®šä¹‰æ‰€æœ‰çš„ä¸€çº§é”®å’ŒäºŒçº§é”®
    ä¸€çº§é”®åˆ—è¡¨ = ['å¹´å¹²', 'å¹´æ”¯', 'æœˆå¹²', 'æœˆæ”¯', 'æ—¥å¹²', 'æ—¥æ”¯', 'æ—¶å¹²', 'æ—¶æ”¯']
    äºŒçº§é”®åˆ—è¡¨ = ['åç¥', 'åå­—', 'äº”è¡Œå±æ€§', 'æ˜¯å¦ç©ºäº¡', 'æ­£è´Ÿå±æ€§', 'åŠ›é‡æ•°å€¼', 'å¿Œç”¨ç¥å½’å±', 'å¤–ç¯å¢ƒ', 'å†…ç¯å¢ƒ', 'é˜´é˜³å±æ€§','æ—ºå¼±çŠ¶æ€']

    # ä½¿ç”¨å¾ªç¯ä¸ºæ¯ä¸ªä¸€çº§é”®æ·»åŠ æ‰€æœ‰äºŒçº§é”®
    for ä¸€çº§é”® in ä¸€çº§é”®åˆ—è¡¨:
        for äºŒçº§é”® in äºŒçº§é”®åˆ—è¡¨:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®][äºŒçº§é”®] = None              # åˆå§‹åŒ–æ‰€æœ‰å€¼ä¸º None

    # æ·»åŠ åç¥ä¿¡æ¯
    for i, é”® in enumerate(['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']):
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[é”®]['åç¥'] = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[i]
    for i, é”® in enumerate(['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']):
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[é”®]['åç¥'] = å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨[i]

    # æ·»åŠ åå­—å’Œäº”è¡Œå±æ€§
    for i, (å¹²é”®, æ”¯é”®) in enumerate(zip(['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²'], ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'])):
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²é”®]['åå­—'] = æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[i]
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²é”®]['äº”è¡Œå±æ€§'] = åå¤©å¹²äº”è¡Œå¯¹ç…§è¡¨[æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[i]]
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æ”¯é”®]['åå­—'] = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[i]
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æ”¯é”®]['äº”è¡Œå±æ€§'] = åäºŒåœ°æ”¯äº”è¡Œå¯¹ç…§è¡¨[æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[i]]

    # è®¾ç½®ç‰¹å®šçš„æ­£è´Ÿå±æ€§
    for é”® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¶å¹²', 'æ—¥æ”¯']:
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[é”®]['æ­£è´Ÿå±æ€§'] = 'é›¶'

    # è®¾ç½®ç©ºäº¡åˆå§‹å€¼
    for é”® in ['å¹´æ”¯','æœˆæ”¯','æ—¥æ”¯','æ—¶æ”¯']:
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[é”®]['æ˜¯å¦ç©ºäº¡'] = 'å¦'

    # è®¾ç½®åŠ›é‡æ•°å€¼
    for ä¸€çº§é”® in ä¸€çº§é”®åˆ—è¡¨:
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®]['åŠ›é‡æ•°å€¼'] = 0  # è®¾ç½®ä¸ºæ•°å­— 0

    #åˆ¤æ–­å¹¶è®¾ç½®é˜´é˜³å±æ€§
    for ä¸€çº§é”® in ä¸€çº§é”®åˆ—è¡¨:
        åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®]['åå­—']
        if ä¸€çº§é”®.endswith('å¹²'):
            if åå­— in é˜³å±æ€§å¤©å¹²åˆ—è¡¨:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®]['é˜´é˜³å±æ€§'] = 'é˜³'
            elif åå­— in é˜´å±æ€§å¤©å¹²åˆ—è¡¨:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®]['é˜´é˜³å±æ€§'] = 'é˜´'
        elif ä¸€çº§é”®.endswith('æ”¯'):
            if åå­— in é˜³å±æ€§åœ°æ”¯åˆ—è¡¨:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®]['é˜´é˜³å±æ€§'] = 'é˜³'
            elif åå­— in é˜´å±æ€§åœ°æ”¯åˆ—è¡¨:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®]['é˜´é˜³å±æ€§'] = 'é˜´'



#1. çœ‹ç©ºäº¡
    # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ åˆ›å»ºä¸€ä¸ªç©ºç™½çš„æ ‡ç­¾ï¼Œç”¨äºåœ¨å³ä¸Šè§’æ˜¾ç¤ºç©ºäº¡çš„åœ°æ”¯    # ä½¿ä¸»çª—å£ä¸­çš„æ‰€æœ‰ç»„ä»¶å±…ä¸­
    åˆ†æå‘½ç›˜ç•Œé¢çª—å£.grid_columnconfigure(0, weight=1)
    åˆ†æå‘½ç›˜ç•Œé¢çª—å£.grid_rowconfigure(0, weight=1)
    å››æŸ±ä»¬çš„æ¡†æ¶.grid_columnconfigure(0, weight=1)
    å››æŸ±ä»¬çš„æ¡†æ¶.grid_rowconfigure(0, weight=1)
    # è·å–ç©ºäº¡çš„åœ°æ”¯åˆ—è¡¨ï¼Œä½¿ç”¨æ—¥æŸ±çš„å¤©å¹²å’Œåœ°æ”¯ä½œä¸ºé”®
    ç©ºäº¡_åœ°æ”¯_åˆ—è¡¨ = åœ°æ”¯ç©ºäº¡å­—å…¸.get((æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2], æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[2]), ())
    ç©ºäº¡_åœ°æ”¯_text = "ç©ºäº¡çš„åœ°æ”¯ï¼š" + 'ã€'.join(ç©ºäº¡_åœ°æ”¯_åˆ—è¡¨)
    ç©ºäº¡_æ ‡ç­¾ = tk.Label(åˆ†æå‘½ç›˜ç•Œé¢çª—å£, text=ç©ºäº¡_åœ°æ”¯_text, font=small_font, fg='#A9A9A9', bg='#f5f5f1')
    ç©ºäº¡_æ ‡ç­¾.place(relx=0.95, rely=0.05, anchor='ne')
    åˆ†æå‘½ç›˜ç•Œé¢çª—å£.update_idletasks()         # æ›´æ–°çª—å£ï¼Œä»¥ç¡®ä¿å¯ä»¥è·å–æ­£ç¡®çš„åæ ‡
    
    # æ–°å¢ä»£ç ï¼šæ›´æ–°"å…«å­—ä¿¡æ¯ä¸»å­—å…¸"ä¸­çš„ç©ºäº¡ä¿¡æ¯
    åœ°æ”¯ä¸€çº§é”®åˆ—è¡¨ = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']
    for i, åœ°æ”¯ in enumerate(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨):
        if åœ°æ”¯ in ç©ºäº¡_åœ°æ”¯_åˆ—è¡¨:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åœ°æ”¯ä¸€çº§é”®åˆ—è¡¨[i]]['æ˜¯å¦ç©ºäº¡'] = 'ç©ºäº¡'
    
    # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ åœ¨åˆé€‚çš„ä½ç½®åˆ›å»º[ç©ºäº¡]æ ‡ç­¾
    for i in range(4):
        if æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[i] in ç©ºäº¡_åœ°æ”¯_åˆ—è¡¨:
            åœ°æ”¯_æ ‡ç­¾ = åœ°æ”¯_æ ‡ç­¾_åˆ—è¡¨[i]  # è·å–å¯¹åº”çš„åœ°æ”¯æ ‡ç­¾
            # åˆ›å»º '[ç©ºäº¡]' æ ‡ç­¾
            ç©ºäº¡_åœ°æ”¯_æ ‡ç­¾ = tk.Label(åœ°æ”¯_æ ‡ç­¾.master, text='[ç©ºäº¡]', font=("Arial", 7), fg='#9d8383', bg='#f7e5e5', padx=0, pady=1, bd=0, highlightthickness=0)
            # è·å– åœ°æ”¯_æ ‡ç­¾ åœ¨çˆ¶å®¹å™¨ä¸­çš„ä½ç½®
            x = åœ°æ”¯_æ ‡ç­¾.winfo_x() + 24
            y = åœ°æ”¯_æ ‡ç­¾.winfo_y() + åœ°æ”¯_æ ‡ç­¾.winfo_height() - 8
            # å°† ç©ºäº¡_åœ°æ”¯_æ ‡ç­¾ æ”¾ç½®åœ¨æŒ‡å®šä½ç½®
            ç©ºäº¡_åœ°æ”¯_æ ‡ç­¾.place(x=x, y=y)





    #å…ˆæŠŠ"æœªç°æ­£ååç¥ä¸»å­—å…¸"å®Œå–„èµ·æ¥ï¼Œè‡ªæˆä¸€æ´¾ã€‚ä»£ç å—å®ç°äº†"æœªç°æ­£ååç¥ä¸»å­—å…¸"é‡Œæ‰€æœ‰ä¸€çº§é”®çš„å¡«å……ï¼Œä¹Ÿå®Œæˆèµ‹å€¼äº†'åç¥'ã€'åå­—'ã€'äº”è¡Œå±æ€§'ä¸‰ä¸ªäºŒçº§é”®
    åå¤©å¹²çš„åå­—åˆ—è¡¨ = ["ç”²", "ä¹™", "ä¸™", "ä¸", "æˆŠ", "å·±", "åºš", "è¾›", "å£¬", "ç™¸"]
    äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ = ['æ­£å°', 'æ­£å®˜', 'æ­£è´¢', 'åŠ«è´¢', 'ä¼¤å®˜'] 
    äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨ = ['åå°(æ­)', 'ä¸ƒæ€', 'åè´¢', 'æ¯”è‚©', 'é£Ÿç¥']
    å¹´å¹²åç¥ = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[0]  # è·å–å¹´å¹²åç¥
    æœˆå¹²åç¥ = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[1]  # è·å–æœˆå¹²åç¥
    æ—¶å¹²åç¥ = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[3]  # è·å–æ—¶å¹²åç¥
    me = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']      # è·å–æ—¥å¹²ï¼ˆç¬¬ä¸‰ä¸ªå¤©å¹²ï¼‰
    global æœªç°æ­£ååç¥ä¸»å­—å…¸   # å£°æ˜å…¨å±€å˜é‡ï¼Œå­˜å‚¨æœªç°æ­£ååç¥ä¿¡æ¯
    æœªç°æ­£ååç¥ä¸»å­—å…¸ = {}
    global å®ç¥è™šç¥ä½œç”¨å…³ç³»å­—å…¸
    å®ç¥è™šç¥ä½œç”¨å…³ç³»å­—å…¸ = {} 

    æœˆå¹²å’Œæ—¶å¹²çš„åç¥ä¿¡æ¯åˆ—è¡¨ = [å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[1], å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[3]]                                  # è·å–æœˆå¹²ğŸŒ•å’Œæ—¶å¹²â°çš„åç¥ï¼Œç»„æˆä¸€ä¸ªåˆ—è¡¨  ï¼ˆå³ä½¿åœ¨æ²¡æœ‰åŒ¹é…é¡¹æ—¶ï¼ˆå‘½ç›˜ä¸Šé¢æ²¡æœ‰"å·²ç°æ­£åç¥"æˆ–è€…æ²¡æœ‰"å·²ç°ååç¥"ï¼‰ä¹Ÿä¼šå®‰å…¨åœ°è¿”å›ç©ºåˆ—è¡¨ï¼‰
                                    
    å·²ç°æ­£åç¥ = [shen for shen in æœˆå¹²å’Œæ—¶å¹²çš„åç¥ä¿¡æ¯åˆ—è¡¨ if shen in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨]                   # æ‰¾å‡ºå·²ç°æ­£åç¥ï¼ˆåœ¨æœˆå¹²å’Œæ—¶å¹²ä¸­ï¼‰
    æœªç°æ­£åç¥ = [shen for shen in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ if shen not in å·²ç°æ­£åç¥ and shen != å¹´å¹²åç¥]    # æ‰¾å‡ºæœªç°æ­£åç¥ï¼ˆæ’é™¤å¹´å¹²çš„åç¥ï¼‰
    å·²ç°ååç¥ = [shen for shen in æœˆå¹²å’Œæ—¶å¹²çš„åç¥ä¿¡æ¯åˆ—è¡¨ if shen in äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨]                   # å·²ç°ååç¥
    æœªç°ååç¥ = [shen for shen in äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨ if shen not in å·²ç°ååç¥ and shen != å¹´å¹²åç¥]   # æœªç°ååç¥

    æœªç°åç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸ = {}      # åˆ›å»ºæœªç°æ­£åç¥åŠå…¶å¯¹åº”çš„å¤©å¹²åçš„å­—å…¸
    for å¤©å¹²å in åå¤©å¹²çš„åå­—åˆ—è¡¨:
        shen = åç¥å…³ç³»è¡¨[me][å¤©å¹²å]      # è·å–æŸ¥è¯¢æ—¥ä¸»ä¸å½“å‰å¤©å¹²çš„å…³ç³»ï¼Œæ¨å¯¼å‡º"æœªç°æ­£åç¥"çš„"åç¥"
        if shen in æœªç°æ­£åç¥:
            æœªç°åç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸[shen] = å¤©å¹²å     # è®°å½•åç¥å’Œå¯¹åº”çš„å¤©å¹²å
        if shen in æœªç°ååç¥:
            æœªç°åç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸[shen] = å¤©å¹²å     # è®°å½•åç¥å’Œå¯¹åº”çš„å¤©å¹²å

    for shen, å¤©å¹²å in æœªç°åç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸.items():         # éå†æœªç°æ­£åç¥ï¼Œå¡«å……æœªç°æ­£ååç¥ä¸»å­—å…¸
        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²å] = {'åç¥': shen,  'åå­—': å¤©å¹²å,  'äº”è¡Œå±æ€§': åå¤©å¹²äº”è¡Œå¯¹ç…§è¡¨[å¤©å¹²å]}            #æœªç°æ­£ååç¥ä¸»å­—å…¸æ­£å¼èµ‹å€¼å®Œæˆ







    def å…ƒç´ é—´å…³ç³»åˆ†æ(ä¸€çº§é”®1, ä¸€çº§é”®2):
        from ganzhi import åäºŒåœ°æ”¯äº”è¡Œå¯¹ç…§è¡¨
        global æœªç°æ­£ååç¥ä¸»å­—å…¸
        global å®ç¥è™šç¥ä½œç”¨å…³ç³»å­—å…¸

        if ä¸€çº§é”®1 in å¤§è¿åœ°æ”¯å­—å…¸:   # å…ˆæ£€æŸ¥æ˜¯å¦åœ¨â€œå¤§è¿åœ°æ”¯å­—å…¸â€é‡Œ
            ä¸€çº§é”®1çš„å­å­—å…¸ = {'åå­—': ä¸€çº§é”®1, 'äº”è¡Œå±æ€§': åäºŒåœ°æ”¯äº”è¡Œå¯¹ç…§è¡¨[ä¸€çº§é”®1], 'é˜´é˜³å±æ€§': å¤§è¿åœ°æ”¯å­—å…¸[ä¸€çº§é”®1]['é˜´é˜³å±æ€§']}
        else:
            try:
                ä¸€çº§é”®1çš„å­å­—å…¸ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®1]
            except KeyError:
                ä¸€çº§é”®1çš„å­å­—å…¸ = æœªç°æ­£ååç¥ä¸»å­—å…¸.get(ä¸€çº§é”®1, None)  # å¦‚æœåœ¨å…«å­—ä¿¡æ¯ä¸»å­—å…¸ä¸­æ‰¾ä¸åˆ°ï¼Œåˆ™å°è¯•ä»æœªç°æ­£ååç¥ä¸»å­—å…¸ä¸­è·å–

        if ä¸€çº§é”®2 in å¤§è¿åœ°æ”¯å­—å…¸:  
            ä¸€çº§é”®2çš„å­å­—å…¸ = {'åå­—': ä¸€çº§é”®2, 'äº”è¡Œå±æ€§': åäºŒåœ°æ”¯äº”è¡Œå¯¹ç…§è¡¨[ä¸€çº§é”®2], 'é˜´é˜³å±æ€§': å¤§è¿åœ°æ”¯å­—å…¸[ä¸€çº§é”®2]['é˜´é˜³å±æ€§']}
        else:
            try:
                ä¸€çº§é”®2çš„å­å­—å…¸ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®2]
            except KeyError:
                ä¸€çº§é”®2çš„å­å­—å…¸ = æœªç°æ­£ååç¥ä¸»å­—å…¸.get(ä¸€çº§é”®2, None)  # å¦‚æœåœ¨å…«å­—ä¿¡æ¯ä¸»å­—å…¸ä¸­æ‰¾ä¸åˆ°ï¼Œåˆ™å°è¯•ä»æœªç°æ­£ååç¥ä¸»å­—å…¸ä¸­è·å–   

        def æŸ¥æ‰¾äºŒçº§é”®å¯¹åº”çš„ä¸€çº§é”®(é”®):
            for æŸ±, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items():
                if ä¿¡æ¯.get('åå­—') == é”®:
                    return å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æŸ±]
            return None

        if ä¸€çº§é”®1çš„å­å­—å…¸ is None:
            ä¸€çº§é”®1çš„å­å­—å…¸ = æŸ¥æ‰¾äºŒçº§é”®å¯¹åº”çš„ä¸€çº§é”®(ä¸€çº§é”®1)
            if ä¸€çº§é”®1çš„å­å­—å…¸ is None:
                print(f"{ä¸€çº§é”®1}çš„å€¼ä¸ºç©ºï¼Œæ— æ³•åˆ†æå…³ç³»ã€‚")
                return None

        if ä¸€çº§é”®2çš„å­å­—å…¸ is None:
            ä¸€çº§é”®2çš„å­å­—å…¸ = æŸ¥æ‰¾äºŒçº§é”®å¯¹åº”çš„ä¸€çº§é”®(ä¸€çº§é”®2)
            if ä¸€çº§é”®2çš„å­å­—å…¸ is None:
                print(f"{ä¸€çº§é”®2}çš„å€¼ä¸ºç©ºï¼Œæ— æ³•åˆ†æå…³ç³»ã€‚")
                return

        # åˆ›å»ºç”¨äºæŸ¥æ‰¾å…³ç³»çš„å…ƒç»„
        ä¸´æ—¶å…ƒç»„ = (ä¸€çº§é”®1çš„å­å­—å…¸['åå­—'], ä¸€çº§é”®2çš„å­å­—å…¸['åå­—'])

        # æŸ¥è¯¢ç‰¹æ®Šå…³ç³»å­—å…¸
        if ä¸´æ—¶å…ƒç»„ in æ™¦è„†å†²ç‰¹æ®Šå…³ç³»å­—å…¸:
            ä¸¤è€…å…³ç³» = æ™¦è„†å†²ç‰¹æ®Šå…³ç³»å­—å…¸[ä¸´æ—¶å…ƒç»„]   # å¦‚æœå­˜åœ¨ç‰¹æ®Šå…³ç³»ï¼Œè·å–å…³ç³»çš„å€¼
        else:
            äº”è¡Œå…³ç³»åˆ†æ_ä¸´æ—¶å…ƒç»„ = (ä¸€çº§é”®1çš„å­å­—å…¸['äº”è¡Œå±æ€§'], ä¸€çº§é”®2çš„å­å­—å…¸['äº”è¡Œå±æ€§'])
            ä¸¤è€…å…³ç³» = äº”è¡Œä½œç”¨å…³ç³»å­—å…¸.get(äº”è¡Œå…³ç³»åˆ†æ_ä¸´æ—¶å…ƒç»„, 'é›¶')  # é»˜è®¤å…³ç³»ä¸º 'é›¶'

        ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ = 'ä¸æ—ºä¸å¼±å…³ç³»'

        if ä¸¤è€…å…³ç³» in ('åŒ', 'ç”Ÿ', 'æ—º'):
            ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ = 'ç”Ÿæ‰¶å…³ç³»'
            æ­£è´Ÿå±æ€§ = 'æ­£'
            åŠ›é‡æ•°å€¼ = 51
        elif ä¸¤è€…å…³ç³» in ('å…‹', 'æ³„', 'è€—', 'åˆ‘', 'å†²', 'æ™¦', 'è„†', 'å¼±'):
            ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ = 'å—åˆ¶å…³ç³»'
            æ­£è´Ÿå±æ€§ = 'æ­£'
            åŠ›é‡æ•°å€¼ = 51
        elif ä¸¤è€…å…³ç³» == 'é›¶':
            ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ = 'ä¸æ—ºä¸å¼±å…³ç³»'
            æ­£è´Ÿå±æ€§ = 'é›¶'
            åŠ›é‡æ•°å€¼ = 0
            print(f"{ä¸€çº§é”®1çš„å­å­—å…¸['åå­—']} æ˜¯ {ä¸€çº§é”®2çš„å­å­—å…¸['åå­—']} çš„å¢“åº“")

        else:
            print(f"è­¦å‘Šï¼šå‘ç°æœªå¤„ç†çš„å…³ç³»ç±»å‹ï¼š{ä¸¤è€…å…³ç³»}")   # å¦‚æœå‡ºç°äº†é¢„æœŸä¹‹å¤–çš„å…³ç³»å€¼ï¼Œæ‰“å°å‡ºæ¥ä»¥ä¾¿è°ƒè¯•

        # åˆ¤æ–­ä¸€çº§é”®1å’Œä¸€çº§é”®2æ˜¯å¦åœ¨å…«å­—ä¿¡æ¯ä¸»å­—å…¸ä¸­
        ä¸€çº§é”®1æ˜¯å®ç¥ = ä¸€çº§é”®1çš„å­å­—å…¸ is not None
        ä¸€çº§é”®2æ˜¯å®ç¥ = ä¸€çº§é”®2çš„å­å­—å…¸ is not None

        if ('å¹²' in ä¸€çº§é”®1 and 'å¹²' in ä¸€çº§é”®2) or ('æ”¯' in ä¸€çº§é”®1 and 'æ”¯' in ä¸€çº§é”®2):
            if (ä¸€çº§é”®1æ˜¯å®ç¥ and not ä¸€çº§é”®2æ˜¯å®ç¥) or (not ä¸€çº§é”®1æ˜¯å®ç¥ and ä¸€çº§é”®2æ˜¯å®ç¥):    # ä¸€ä¸ªå®ç¥ä¸€ä¸ªè™šç¥ï¼Œå­˜å‚¨åˆ°å®ç¥è™šç¥ä½œç”¨å…³ç³»å­—å…¸
                å®ç¥è™šç¥ä½œç”¨å…³ç³»å­—å…¸[f'{ä¸€çº§é”®1}_{ä¸€çº§é”®2}_å…³ç³»'] = {'å…³ç³»': ä¸¤è€…å…³ç³», 'æ¦‚æ‹¬': ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, 'å¤–ç¯å¢ƒ': '', 'å†…ç¯å¢ƒ': ''}
            elif ä¸€çº§é”®1æ˜¯å®ç¥ and ä¸€çº§é”®2æ˜¯å®ç¥:    # ä¸¤ä¸ªéƒ½æ˜¯å®ç¥ï¼Œå­˜å‚¨åˆ°å…«å­—ä¿¡æ¯ä¸»å­—å…¸
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[f'{ä¸€çº§é”®1}_{ä¸€çº§é”®2}_å…³ç³»'] = {'å…³ç³»': ä¸¤è€…å…³ç³», 'æ¦‚æ‹¬': ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, 'æ­£è´Ÿå±æ€§': æ­£è´Ÿå±æ€§, 'åŠ›é‡æ•°å€¼': åŠ›é‡æ•°å€¼}
            else:
                print("ä¸€çº§é”®1å’Œä¸€çº§é”®2æ— æ³•ä½œç”¨")

        return ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼
    




#1. çœ‹æœˆæ”¯ğŸŒ™
    #1.2 ä¸¤å¹²ä¸€æ”¯çš„åˆ†æ

    # è°ƒç”¨ å…ƒç´ é—´å…³ç³»åˆ†æ å‡½æ•°å¹¶è·å–è¿”å›å€¼
    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('æœˆæ”¯', 'æ—¥å¹²')    # 1ã€è·å¾—"æœˆæ”¯"ğŸŒ™ä¸ã€æ—¥å¹²ã€‘ğŸ‘§ğŸ»çš„å…³ç³»

    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼'] = åŠ›é‡æ•°å€¼     
    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['æ­£è´Ÿå±æ€§'] = æ­£è´Ÿå±æ€§

    print(f"{'æœˆæ”¯'} å’Œ {'æ—¥å¹²'} çš„å…³ç³»ä¸ºï¼š{ä¸¤è€…å…³ç³»}ï¼Œæ¦‚æ‹¬ä¸ºï¼š{ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬}")   
    print(f"æœˆæ”¯ğŸŒ™çš„åŠ›é‡å€¼ï¼šå±æ€§ = {å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['æ­£è´Ÿå±æ€§']}ï¼ŒåŠ›é‡æ•°å€¼ = {å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼']}")    

    æ–°çš„åŠ›é‡å€¼ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼']    # åˆå§‹åŒ– æ–°çš„åŠ›é‡å€¼ï¼Œé»˜è®¤å€¼ä¸ºå½“å‰çš„åŠ›é‡æ•°å€¼
    å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸.setdefault('æœˆæ”¯', 0)   # å¦‚æœ 'æœˆæ”¯' ä¸å­˜åœ¨ï¼Œåˆ™åˆå§‹åŒ–ä¸º 0

    # è°ƒç”¨å‡½æ•°å¹¶è·å–è¿”å›å€¼
    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('å¹´æ”¯', 'æœˆæ”¯')    # 2ã€è·å¾—"å¹´æ”¯"ğŸ§¨ä¸"æœˆæ”¯"ğŸŒ™çš„å…³ç³»ã€‚ï¼ŒæŸ¥çœ‹"æœˆæ”¯"æ˜¯å¦å—åˆ¶äº†ä¸€æ¬¡ï¼Œå¦‚æœå—åˆ¶ä¸€æ¬¡ï¼Œ'åŠ›é‡æ•°å€¼'å°±æ›´æ–°ä¸ºåŸå…ˆæ•°å€¼å‡å»17ï¼ˆç­‰äº34ï¼‰ï¼ˆç‰¹æ®Šæƒ…å†µï¼šå¦‚æœå…ƒç´ é—´å…³ç³»åˆ†ææ˜¯'è€—'ï¼Œå°±ä¸ç”¨å‡å»17ï¼Œ'åŠ›é‡æ•°å€¼'ç»§æ‰¿ä¹‹å‰çš„æ•°å€¼ä¸å˜ï¼‰ã€‚

    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
        å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯'] += 1                                # æ— è®ºå…³ç³»ä¸ºä½•ï¼Œéƒ½å¢åŠ å—åˆ¶æ¬¡æ•°
        if ä¸¤è€…å…³ç³» != 'è€—':                                       # å¦‚æœå…³ç³»ä¸æ˜¯ 'è€—'
            æ—§çš„åŠ›é‡å€¼ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼']
            æ–°çš„åŠ›é‡å€¼ = æ—§çš„åŠ›é‡å€¼ - 17                             # åŸåŠ›é‡å€¼å‡å» 17
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼'] = æ–°çš„åŠ›é‡å€¼
            print(f"å¹´æ”¯ğŸ§¨ä¸æœˆæ”¯ğŸŒ™å…³ç³»åˆ†æï¼šæœˆæ”¯ğŸŒ™å—åˆ¶{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯']}æ¬¡ï¼ŒåŠ›é‡æ•°å€¼å‡17ï¼Œç°åœ¨æ˜¯ï¼š{æ–°çš„åŠ›é‡å€¼}")
        else:
            å½“å‰_åŠ›é‡æ•°å€¼ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼']    # åŠ›é‡å€¼ä¸å˜ï¼Œç›´æ¥å¼•ç”¨å½“å‰å€¼
            print(f"å¹´æ”¯ğŸ§¨ä¸æœˆæ”¯ğŸŒ™å…³ç³»åˆ†æï¼šæœˆæ”¯ğŸŒ™å—åˆ¶{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯']}æ¬¡ï¼Œå…³ç³»ä¸º'è€—'ï¼ŒåŠ›é‡æ•°å€¼ä¸å˜ï¼š{å½“å‰_åŠ›é‡æ•°å€¼}")
    else:
        print("å¹´æ”¯ğŸ§¨ä¸æœˆæ”¯ğŸŒ™å…³ç³»åˆ†æï¼šæœˆæ”¯ğŸŒ™æœªå—åˆ¶ï¼ŒåŠ›é‡å€¼ä¸å˜ã€‚")


    å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸.setdefault('æœˆæ”¯', 0)          # å¦‚æœ 'æœˆæ”¯' ä¸å­˜åœ¨äºå—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸ï¼Œåˆ™'æœˆæ”¯'çš„å—åˆ¶æ¬¡æ•°åˆå§‹åŒ–ä¸º 0
    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('æ—¥æ”¯', 'æœˆæ”¯')    # 3ã€è·å¾—"æ—¥æ”¯"ğŸ“…ä¸"æœˆæ”¯"ğŸŒ™çš„å…³ç³»ã€‚ï¼ŒæŸ¥çœ‹"æœˆæ”¯"æ˜¯å¦å—åˆ¶äº†ä¸€æ¬¡ï¼Œå¦‚æœåˆå—åˆ¶ä¸€æ¬¡ï¼Œ'åŠ›é‡æ•°å€¼'å°±æ›´æ–°ä¸ºåŸå…ˆæ•°å€¼å†å‡å»17ï¼ˆç‰¹æ®Šæƒ…å†µï¼šæ˜¯'è€—'ï¼Œå°±ä¸ç”¨å‡å»17ï¼Œ'åŠ›é‡æ•°å€¼'ä¸å˜ï¼‰ã€‚

    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
        å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯'] += 1                        # æ— è®ºå…³ç³»ä¸ºä½•ï¼Œéƒ½å¢åŠ å—åˆ¶æ¬¡æ•°
        if ä¸¤è€…å…³ç³» != 'è€—':                                  # å¦‚æœå…³ç³»ä¸æ˜¯ 'è€—'
            æ—§çš„åŠ›é‡å€¼ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼']
            æ–°çš„åŠ›é‡å€¼ = æ—§çš„åŠ›é‡å€¼ - 17                 # åŸåŠ›é‡å€¼å‡å» 17
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼'] = æ–°çš„åŠ›é‡å€¼
            print(f"æ—¥æ”¯ğŸ“…ä¸æœˆæ”¯ğŸŒ™å…³ç³»åˆ†æï¼šæœˆæ”¯ğŸŒ™å—åˆ¶{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯']}æ¬¡ï¼ŒåŠ›é‡æ•°å€¼å‡å»17ï¼Œç°åœ¨æ˜¯ï¼š{æ–°çš„åŠ›é‡å€¼}")
        else:
            å½“å‰_åŠ›é‡æ•°å€¼ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼']    # åŠ›é‡å€¼ä¸å˜ï¼Œç›´æ¥å¼•ç”¨å½“å‰å€¼
            print(f"æ—¥æ”¯ğŸ“…ä¸æœˆæ”¯ğŸŒ™å…³ç³»åˆ†æï¼šæœˆæ”¯ğŸŒ™å—åˆ¶{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯']}æ¬¡ï¼Œå› ä¸ºå…³ç³»ä¸º'è€—'(ä¸»å…‹è€…ä¸å‡åŠ›)ï¼Œæ‰€ä»¥æœˆæ”¯ğŸŒ™åŠ›é‡æ•°å€¼ç°åœ¨æ˜¯ï¼š{æ–°çš„åŠ›é‡å€¼}")
    else:
        print(f"çºµè§‚æœˆæ”¯å·¦å³åˆ†æï¼šæœˆæ”¯ğŸŒ™æ€»å…±å—åˆ¶{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯']}æ¬¡ï¼Œæ‰€ä»¥æœˆæ”¯ğŸŒ™åŠ›é‡æ•°å€¼ç°åœ¨æ˜¯ï¼š{æ–°çš„åŠ›é‡å€¼}")

    

#2. çœ‹æ—¥æ”¯ğŸ“…
 
    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('æ—¥æ”¯', 'æ—¥å¹²')         # ç¬¬ä¸€æ­¥ï¼Œåˆ†ææ—¥æ”¯ğŸ“…å’Œæ—¥å¹²ğŸ‘§ğŸ»çš„å…³ç³»
    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'ç”Ÿæ‰¶å…³ç³»':     # æ ¹æ®å…³ç³»æ›´æ–°æ—¥æ”¯çš„å±æ€§å’ŒåŠ›é‡æ•°å€¼
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['æ­£è´Ÿå±æ€§'] = 'æ­£'
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['åŠ›é‡æ•°å€¼'] = 15
    elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['æ­£è´Ÿå±æ€§'] = 'è´Ÿ'
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['åŠ›é‡æ•°å€¼'] = 15
    elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'ä¸æ—ºä¸å¼±å…³ç³»':
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['æ­£è´Ÿå±æ€§'] = 'é›¶'
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['åŠ›é‡æ•°å€¼'] = 0

    
    å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¥æ”¯'] = 0      # ç¬¬äºŒæ­¥ï¼Œåˆå§‹åŒ–æ—¥æ”¯çš„å—åˆ¶æ¬¡æ•°ä¸º0
    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('æœˆæ”¯', 'æ—¥æ”¯')       # åˆ†ææœˆæ”¯ğŸŒ™å’Œæ—¥æ”¯ğŸ“…çš„å…³ç³»
    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
        if ä¸¤è€…å…³ç³» != 'è€—':
            å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¥æ”¯'] += 1     
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['åŠ›é‡æ•°å€¼'] -= 8        
        elif ä¸¤è€…å…³ç³» == 'è€—':
            å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¥æ”¯'] += 1

    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('æ—¶æ”¯', 'æ—¥æ”¯')       # åˆ†ææ—¶æ”¯âŒšï¸å’Œæ—¥æ”¯ğŸ“…çš„å…³ç³»
    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
        if ä¸¤è€…å…³ç³» != 'è€—':
            å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¥æ”¯'] += 1    
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['åŠ›é‡æ•°å€¼'] -= 8 
        elif ä¸¤è€…å…³ç³» == 'è€—':
            å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¥æ”¯'] += 1

    # ç‰¹æ®Šæƒ…å†µï¼Œæ£€æŸ¥æœˆæ”¯å’Œæ—¥æ”¯çš„å—åˆ¶æ¬¡æ•°
    if å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯'] == 2 and å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¥æ”¯'] == 2:
        å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯'] = 1      # æœˆæ”¯å—åˆ¶æ¬¡æ•°æ›´æ–°ä¸º1æ¬¡
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼'] += 17       # æœˆæ”¯åŠ›é‡æ•°å€¼åŠ å›17
        print(f"æœˆæ”¯ğŸŒ™åœ¨æ­¥éª¤ä¸‰æ—¶å—åˆ¶æ¬¡æ•°ä¸ºï¼š{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆæ”¯']}ã€‚åŠ›é‡æ•°å€¼ä¸ºï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯']['åŠ›é‡æ•°å€¼']}")

    #print(f"æ—¥æ”¯ğŸ“…åœ¨æ­¥éª¤ä¸‰æ—¶å—åˆ¶æ¬¡æ•°ä¸ºï¼š{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¥æ”¯']}ã€‚å±æ€§ä¸ºï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['æ­£è´Ÿå±æ€§']}ï¼ŒåŠ›é‡æ•°å€¼ä¸ºï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['åŠ›é‡æ•°å€¼']}")



# 3. çœ‹æœˆå¹²ğŸŒ•

    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('æœˆå¹²', 'æ—¥å¹²')  # åˆ†ææœˆå¹²ğŸŒ•å¯¹æ—¥å¹²ğŸ‘§ğŸ»çš„å…³ç³»
    print(f"æœˆå¹²ä¸æ—¥å¹²çš„å…³ç³»: {ä¸¤è€…å…³ç³»}ï¼Œæ¦‚æ‹¬ä¸º: {ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬}")       
    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'ç”Ÿæ‰¶å…³ç³»':                # æ ¹æ®å…³ç³»æ›´æ–°æœˆå¹²çš„å±æ€§å’ŒåŠ›é‡æ•°å€¼
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['æ­£è´Ÿå±æ€§'] = 'æ­£'
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åŠ›é‡æ•°å€¼'] = 15
    elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['æ­£è´Ÿå±æ€§'] = 'è´Ÿ'
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åŠ›é‡æ•°å€¼'] = 15
    elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'ä¸æ—ºä¸å¼±å…³ç³»':
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['æ­£è´Ÿå±æ€§'] = 'é›¶'
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åŠ›é‡æ•°å€¼'] = 15

    å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆå¹²'] = 0                # åˆå§‹åŒ–æœˆå¹²ğŸŒ•çš„å—åˆ¶æ¬¡æ•°ä¸º0

    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('æœˆæ”¯', 'æœˆå¹²')       # åˆ†ææœˆæ”¯ğŸŒ™å’Œæœˆå¹²ğŸŒ•çš„å…³ç³»

    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
        å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆå¹²'] += 1

    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('å¹´å¹²', 'æœˆå¹²')        # åˆ†æå¹´å¹²ğŸ§¨å’Œæœˆå¹²ğŸŒ•çš„å…³ç³»

    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
        å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆå¹²'] += 1        

    #print(f"æœˆå¹²ğŸŒ•åœ¨æ­¥éª¤å››æ—¶å—åˆ¶æ¬¡æ•°ä¸ºï¼š{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆå¹²']}ã€‚å±æ€§ä¸ºï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['æ­£è´Ÿå±æ€§']}ï¼ŒåŠ›é‡æ•°å€¼ä¸ºï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åŠ›é‡æ•°å€¼']}")


# 4. çœ‹æ—¶å¹²â°

    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('æ—¶å¹²', 'æ—¥å¹²')         # åˆ†ææ—¶å¹²â°å¯¹æ—¥å¹²ğŸ‘§ğŸ»çš„å…³ç³»
    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'ç”Ÿæ‰¶å…³ç³»':
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['æ­£è´Ÿå±æ€§'] = 'æ­£'
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åŠ›é‡æ•°å€¼'] = 10
    elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»' and ä¸¤è€…å…³ç³» != 'è€—':
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['æ­£è´Ÿå±æ€§'] = 'è´Ÿ'
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åŠ›é‡æ•°å€¼'] = 10
    elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'ä¸æ—ºä¸å¼±å…³ç³»':
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['æ­£è´Ÿå±æ€§'] = 'é›¶'
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åŠ›é‡æ•°å€¼'] = 0

    å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¶å¹²'] = 0                # åˆå§‹åŒ–æ—¶å¹²â°çš„å—åˆ¶æ¬¡æ•°ä¸º0
    ä¸¤è€…å…³ç³», ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, æ­£è´Ÿå±æ€§, åŠ›é‡æ•°å€¼ = å…ƒç´ é—´å…³ç³»åˆ†æ('æ—¶æ”¯', 'æ—¶å¹²')       # åˆ†ææ—¶æ”¯âŒšï¸å’Œæ—¶å¹²â°çš„å…³ç³»
    if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'ç”Ÿæ‰¶å…³ç³»':
        å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¶å¹²'] += 1        # å—åˆ¶æ¬¡æ•°åŠ 1
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åŠ›é‡æ•°å€¼'] += 10          # åŠ›é‡æ•°å€¼åŠ 10

    #print(f"æ—¶å¹²â°åœ¨æ­¥éª¤äº”æ—¶å—åˆ¶æ¬¡æ•°ä¸ºï¼š{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¶å¹²']}ã€‚å±æ€§ä¸ºï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['æ­£è´Ÿå±æ€§']}ï¼ŒåŠ›é‡æ•°å€¼ä¸ºï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åŠ›é‡æ•°å€¼']}")


# 5. åŒå…šæŸ¥æ‰¾
    # è·å–å…ƒç´ çš„å±æ€§å’ŒåŠ›é‡æ•°å€¼ï¼Œå­˜å…¥åŒå…šæŸ¥æ‰¾å­—å…¸
    ä¸¤å¹²ä¸€æ”¯éå†åˆ—è¡¨ = ['æœˆå¹²', 'æ—¥æ”¯', 'æ—¶å¹²']
    åŒå…šæŸ¥æ‰¾å­—å…¸ = {}
    for éå†åˆ—è¡¨çš„å˜é‡ in ä¸¤å¹²ä¸€æ”¯éå†åˆ—è¡¨:
        æ­£è´Ÿå±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[éå†åˆ—è¡¨çš„å˜é‡]['æ­£è´Ÿå±æ€§']
        åŠ›é‡æ•°å€¼ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[éå†åˆ—è¡¨çš„å˜é‡]['åŠ›é‡æ•°å€¼']
        if åŠ›é‡æ•°å€¼ != 0:
            if æ­£è´Ÿå±æ€§ not in åŒå…šæŸ¥æ‰¾å­—å…¸:
                åŒå…šæŸ¥æ‰¾å­—å…¸[æ­£è´Ÿå±æ€§] = []
            åŒå…šæŸ¥æ‰¾å­—å…¸[æ­£è´Ÿå±æ€§].append(éå†åˆ—è¡¨çš„å˜é‡)

    # å¤„ç†æœˆå¹²ğŸŒ™
    æ­£è´Ÿå±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['æ­£è´Ÿå±æ€§']
    if æ­£è´Ÿå±æ€§ in åŒå…šæŸ¥æ‰¾å­—å…¸ and len(åŒå…šæŸ¥æ‰¾å­—å…¸[æ­£è´Ÿå±æ€§]) > 1:
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åŠ›é‡æ•°å€¼'] += 10

    # å¤„ç†æ—¶å¹²â°
    æ­£è´Ÿå±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['æ­£è´Ÿå±æ€§']
    if æ­£è´Ÿå±æ€§ in åŒå…šæŸ¥æ‰¾å­—å…¸ and len(åŒå…šæŸ¥æ‰¾å­—å…¸[æ­£è´Ÿå±æ€§]) > 1:
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åŠ›é‡æ•°å€¼'] += 10

    # å¤„ç†æ—¥æ”¯ğŸ“…
    æ­£è´Ÿå±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['æ­£è´Ÿå±æ€§']
    if æ­£è´Ÿå±æ€§ in åŒå…šæŸ¥æ‰¾å­—å…¸ and len(åŒå…šæŸ¥æ‰¾å­—å…¸[æ­£è´Ÿå±æ€§]) > 1:
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['åŠ›é‡æ•°å€¼'] += 10

    # ç¡®ä¿åŠ›é‡æ•°å€¼åœ¨0åˆ°10ä¹‹é—´
    for éå†å¤„ç†ç›®æ ‡ in ['æœˆå¹²', 'æ—¶å¹²', 'æ—¥æ”¯']:
        åŠ›é‡æ•°å€¼ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[éå†å¤„ç†ç›®æ ‡]['åŠ›é‡æ•°å€¼']
        if åŠ›é‡æ•°å€¼ > 10:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[éå†å¤„ç†ç›®æ ‡]['åŠ›é‡æ•°å€¼'] = 10
        elif åŠ›é‡æ•°å€¼ < 0:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[éå†å¤„ç†ç›®æ ‡]['åŠ›é‡æ•°å€¼'] = 0

    # åˆ†åˆ«æ‰“å‡ºæœ€ç»ˆçš„å—åˆ¶æ¬¡æ•°ã€å±æ€§å’ŒåŠ›é‡æ•°å€¼
    print(f"æœˆå¹²ğŸŒ™æœ€ç»ˆå—åˆ¶æ¬¡æ•°ï¼š{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æœˆå¹²']},  å±æ€§ï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['æ­£è´Ÿå±æ€§']},  åŠ›é‡æ•°å€¼ï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åŠ›é‡æ•°å€¼']}")
    print(f"æ—¶å¹²â°æœ€ç»ˆå—åˆ¶æ¬¡æ•°ï¼š{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¶å¹²']},  å±æ€§ï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['æ­£è´Ÿå±æ€§']},  åŠ›é‡æ•°å€¼ï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åŠ›é‡æ•°å€¼']}")
    print(f"æ—¥æ”¯ğŸ“…æœ€ç»ˆå—åˆ¶æ¬¡æ•°ï¼š{å—åˆ¶æ¬¡æ•°ç»Ÿè®¡å­—å…¸['æ—¥æ”¯']},  å±æ€§ï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['æ­£è´Ÿå±æ€§']},  åŠ›é‡æ•°å€¼ï¼š{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯']['åŠ›é‡æ•°å€¼']}")




# 6. æœ¬å‘½ç›˜çš„ã€æ ¼å±€åˆ¤å®šã€‘
    def æœ¬å‘½ç›˜çš„æ ¼å±€åˆ¤å®š():
        ç”Ÿæ‰¶åŠ›é‡æ€»å€¼ = sum(å…«å­—ä¿¡æ¯ä¸»å­—å…¸[éå†åˆ—è¡¨çš„å˜é‡]['åŠ›é‡æ•°å€¼'] for éå†åˆ—è¡¨çš„å˜é‡ in åŒå…šæŸ¥æ‰¾å­—å…¸.get('æ­£', []))
        å—åˆ¶åŠ›é‡æ€»å€¼ = sum(å…«å­—ä¿¡æ¯ä¸»å­—å…¸[éå†åˆ—è¡¨çš„å˜é‡]['åŠ›é‡æ•°å€¼'] for éå†åˆ—è¡¨çš„å˜é‡ in åŒå…šæŸ¥æ‰¾å­—å…¸.get('è´Ÿ', []))
        if ç”Ÿæ‰¶åŠ›é‡æ€»å€¼ > å—åˆ¶åŠ›é‡æ€»å€¼:
            if å—åˆ¶åŠ›é‡æ€»å€¼ == 0:
                æ ¼å±€ = 'ä»æ—ºæ ¼å±€'
                print("â˜¯ï¸æœ¬å‘½å±€æ ¼å±€ä¸ºï¼šä»æ—ºæ ¼å±€")
            else:
                æ ¼å±€ = 'èº«æ—ºæ ¼å±€'
                print("â˜¯ï¸æœ¬å‘½å±€æ ¼å±€ä¸ºï¼šèº«æ—ºæ ¼å±€")
        elif ç”Ÿæ‰¶åŠ›é‡æ€»å€¼ < å—åˆ¶åŠ›é‡æ€»å€¼:
            if ç”Ÿæ‰¶åŠ›é‡æ€»å€¼ == 0:
                æ ¼å±€ = 'ä»å¼±æ ¼å±€'
                print("â˜¯ï¸æœ¬å‘½å±€æ ¼å±€ä¸ºï¼šä»å¼±æ ¼å±€")
            else:
                æ ¼å±€ = 'èº«å¼±æ ¼å±€'
                print("â˜¯ï¸æœ¬å‘½å±€æ ¼å±€ä¸ºï¼šèº«å¼±æ ¼å±€")
        return æ ¼å±€
    æ ¼å±€ = æœ¬å‘½ç›˜çš„æ ¼å±€åˆ¤å®š()




# 7. æ—¥æ”¯ğŸŒ³ã€æœˆå¹²ğŸŒ•ã€æ—¶å¹²â° å®šç”¨ç¥/å¿Œç¥

    def åˆ¤å®šç”¨å¿Œç¥(ä¸€çº§é”®1, ä¸€çº§é”®2, æ ¼å±€):
        # è°ƒç”¨å…ƒç´ é—´å…³ç³»åˆ†æå‡½æ•°ï¼Œè·å–ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬
        _, ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, _, _ = å…ƒç´ é—´å…³ç³»åˆ†æ(ä¸€çº§é”®1, ä¸€çº§é”®2)
        
        # åˆå§‹åŒ–å¿Œç”¨ç¥å½’å±
        å¿Œç”¨ç¥å½’å± = None
        
        # æ ¹æ®æ ¼å±€å’Œå…³ç³»æ¦‚æ‹¬ï¼Œåˆ¤å®šå¿Œç”¨ç¥å½’å±
        if æ ¼å±€ in ['ä»å¼±æ ¼å±€', 'èº«æ—ºæ ¼å±€']:
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'ç”Ÿæ‰¶å…³ç³»':
                å¿Œç”¨ç¥å½’å± = 'å¿Œç¥'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
                å¿Œç”¨ç¥å½’å± = 'ç”¨ç¥'
        elif æ ¼å±€ in ['ä»æ—ºæ ¼å±€', 'èº«å¼±æ ¼å±€']:
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'ç”Ÿæ‰¶å…³ç³»':
                å¿Œç”¨ç¥å½’å± = 'ç”¨ç¥'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬ == 'å—åˆ¶å…³ç³»':
                å¿Œç”¨ç¥å½’å± = 'å¿Œç¥'
        
        # å„å›å„å®¶ å„æ‰¾å„å¦ˆï¼Œæ›´æ–°ç›¸åº”å­—å…¸â€”â€” å®ç¥æ›´æ–°åœ¨"å…«å­—ä¿¡æ¯ä¸»å­—å…¸"ï¼Œè™šç¥æ›´æ–°åœ¨"æœªç°æ­£ååç¥ä¸»å­—å…¸"ã€‚å½»åº•é¿å…äº†KeyErroré—®é¢˜.
        if å¿Œç”¨ç¥å½’å±:
            if ä¸€çº§é”®1 in å…«å­—ä¿¡æ¯ä¸»å­—å…¸:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸€çº§é”®1]['å¿Œç”¨ç¥å½’å±'] = å¿Œç”¨ç¥å½’å±
            elif ä¸€çº§é”®1 in æœªç°æ­£ååç¥ä¸»å­—å…¸:
                æœªç°æ­£ååç¥ä¸»å­—å…¸[ä¸€çº§é”®1]['å¿Œç”¨ç¥å½’å±'] = å¿Œç”¨ç¥å½’å±
        
        # è¿”å›å¿Œç”¨ç¥å½’å±
        return å¿Œç”¨ç¥å½’å±

    # è°ƒç”¨åˆ¤å®šç”¨å¿Œç¥å‡½æ•°ï¼Œåˆ†åˆ«å¤„ç†æ—¥æ”¯ã€æœˆå¹²ã€æ—¶å¹²
    åˆ¤å®šç”¨å¿Œç¥('æ—¥æ”¯', 'æ—¥å¹²', æ ¼å±€)
    åˆ¤å®šç”¨å¿Œç¥('æœˆå¹²', 'æ—¥å¹²', æ ¼å±€)
    åˆ¤å®šç”¨å¿Œç¥('æ—¶å¹²', 'æ—¥å¹²', æ ¼å±€)


    # å¤„ç†å¹´å¹²å¯¹æœˆå¹²çš„å…³ç³»
    def å¹´å¹²ä½œç”¨äºæœˆå¹²():
        _, ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬_å¹´å¹²å¯¹æœˆå¹², _, _ = å…ƒç´ é—´å…³ç³»åˆ†æ('å¹´å¹²', 'æœˆå¹²')     # å¹´å¹²å¯¹æœˆå¹²çš„å…³ç³»
        æœˆå¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('å¿Œç”¨ç¥å½’å±')        # è·å–æœˆå¹²çš„å½’å±

        if æœˆå¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬_å¹´å¹²å¯¹æœˆå¹² == 'å—åˆ¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¿Œç”¨ç¥å½’å±'] = 'å¿Œç¥'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬_å¹´å¹²å¯¹æœˆå¹² == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¿Œç”¨ç¥å½’å±'] = 'ç”¨ç¥'
        elif æœˆå¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬_å¹´å¹²å¯¹æœˆå¹² == 'å—åˆ¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¿Œç”¨ç¥å½’å±'] = 'ç”¨ç¥'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬_å¹´å¹²å¯¹æœˆå¹² == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¿Œç”¨ç¥å½’å±'] = 'å¿Œç¥'

        # æ‰“å° å…«å­—ä¿¡æ¯ä¸»å­—å…¸ å­—å…¸ä¸­å„ä¸ªä½ç½®çš„åç¥å’Œå¿Œç”¨ç¥å½’å±
        print("å…«å­—ä¿¡æ¯å­—å…¸ï¼š")
        for å››å¹²æ”¯éå†åˆ—è¡¨ in ['å¹´å¹²', 'æœˆå¹²', 'æ—¥æ”¯', 'æ—¶å¹²']:
            ä¿¡æ¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å››å¹²æ”¯éå†åˆ—è¡¨)
            åå­— = ä¿¡æ¯.get('åå­—')
            åç¥ = ä¿¡æ¯.get('åç¥')
            å¿Œç”¨ç¥å½’å± = ä¿¡æ¯.get('å¿Œç”¨ç¥å½’å±')
            æ”¶é›†æ–­è¯­(f"{å››å¹²æ”¯éå†åˆ—è¡¨}: åå­— - ã€{åå­—}ã€‘, åç¥ - ã€{åç¥}ã€‘, å¿Œç”¨ç¥å½’å± - ã€{å¿Œç”¨ç¥å½’å±}ã€‘")



        # åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºå¯¹åº”å››å¹²çš„åç§°
        å››å¹²åˆ—è¡¨ = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']

        # éå†å››ä¸ªå¤©å¹²åç¥æ ‡ç­¾ï¼Œæ›´æ–°å®ƒä»¬çš„æ˜¾ç¤ºå†…å®¹å’Œæ ·å¼
        for i in range(4):
            å¤©å¹²_shen_æ ‡ç­¾ = å¤©å¹²_shen_æ ‡ç­¾_åˆ—è¡¨[i]  # è·å–å¯¹åº”çš„å¤©å¹²åç¥æ ‡ç­¾
            å››å¹²åç§° = å››å¹²åˆ—è¡¨[i]  # å¯¹åº”çš„å¹²åç§°

            ä¿¡æ¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å››å¹²åç§°, {})
            åç¥ = ä¿¡æ¯.get('åç¥', '')
            å¿Œç”¨ç¥å½’å± = ä¿¡æ¯.get('å¿Œç”¨ç¥å½’å±', '')

            # è®¾ç½®å¿Œç”¨ç¥å½’å±çš„é¢œè‰²
            if å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
                color = '#da61cd'  # ç”¨ç¥é¢œè‰²
            elif å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
                color = '#52577d'  # å¿Œç¥é¢œè‰²
            else:
                color = '#C0C0C0'  # é»˜è®¤é¢œè‰²

            # ç»„åˆåç¥å’Œå¿Œç”¨ç¥å½’å±çš„æ–‡æœ¬
            if å¿Œç”¨ç¥å½’å±:
                åç¥æ–‡æœ¬ = f"{åç¥}ï¼ˆ{å¿Œç”¨ç¥å½’å±}ï¼‰"
            else:
                åç¥æ–‡æœ¬ = åç¥

            # æ›´æ–°æ ‡ç­¾çš„æ–‡æœ¬å’Œé¢œè‰²
            å¤©å¹²_shen_æ ‡ç­¾.config(text=åç¥æ–‡æœ¬, fg=color)
        return å…«å­—ä¿¡æ¯ä¸»å­—å…¸
    å…«å­—ä¿¡æ¯ä¸»å­—å…¸ = å¹´å¹²ä½œç”¨äºæœˆå¹²()

    
    def åˆ›å»ºå…­äº²å¯¹åº”å­—å…¸(æ—¥å¹², æ€§åˆ«):
        å…³ç³» = åç¥å…³ç³»è¡¨[æ—¥å¹²]   # è·å–æ—¥å¹²çš„åç¥å…³ç³»
        if æ€§åˆ« == "ç”·":        # æ ¹æ®æ€§åˆ«åˆ¤æ–­å…­äº²
            å…­äº²å­—å…¸ = {
                'æ­£å°': {'å…­äº²': 'æ¯äº²', 'å¤©å¹²åå­—': å…³ç³».inverse['æ­£å°']},
                'åè´¢': {'å…­äº²': 'çˆ¶äº²', 'å¤©å¹²åå­—': å…³ç³».inverse['åè´¢']},
                'æ­£è´¢': {'å…­äº²': 'å¦»å­', 'å¤©å¹²åå­—': å…³ç³».inverse['æ­£è´¢']},
                'ä¸ƒæ€': {'å…­äº²': 'å„¿å­', 'å¤©å¹²åå­—': å…³ç³».inverse['ä¸ƒæ€']},
                'æ­£å®˜': {'å…­äº²': 'å¥³å„¿', 'å¤©å¹²åå­—': å…³ç³».inverse['æ­£å®˜']},
            }
        else:  # æ€§åˆ«ä¸ºå¥³
            å…­äº²å­—å…¸ = {
                'åå°(æ­)': {'å…­äº²': 'æ¯äº²', 'å¤©å¹²åå­—': å…³ç³».inverse['åå°(æ­)']},
                'æ­£è´¢': {'å…­äº²': 'çˆ¶äº²', 'å¤©å¹²åå­—': å…³ç³».inverse['æ­£è´¢']},
                'æ­£å®˜': {'å…­äº²': 'ä¸ˆå¤«', 'å¤©å¹²åå­—': å…³ç³».inverse['æ­£å®˜']},
                'ä¸ƒæ€': {'å…­äº²': 'ç”·æœ‹å‹', 'å¤©å¹²åå­—': å…³ç³».inverse['ä¸ƒæ€']},
                'é£Ÿç¥': {'å…­äº²': 'å¥³å„¿', 'å¤©å¹²åå­—': å…³ç³».inverse['é£Ÿç¥']},
                'ä¼¤å®˜': {'å…­äº²': 'å„¿å­', 'å¤©å¹²åå­—': å…³ç³».inverse['ä¼¤å®˜']},
            }
        return å…­äº²å­—å…¸
    
    æ—¥å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']
    æ€§åˆ« = æ€§åˆ«å˜é‡.get()
    å…­äº²å­—å…¸ = åˆ›å»ºå…­äº²å¯¹åº”å­—å…¸(æ—¥å¹², æ€§åˆ«)




    # 8. åˆ—å‡ºæ‰€æœ‰æœªç°æ­£åç¥å’Œååç¥

    # åˆ¤æ–­æœˆå¹²å’Œæ—¶å¹²æ˜¯å¦ä¸ºæ­£åç¥æˆ–ååç¥
    æœˆå¹²æ˜¯æ­£åç¥ = æœˆå¹²åç¥ in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨
    æ—¶å¹²æ˜¯æ­£åç¥ = æ—¶å¹²åç¥ in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨
    æœˆå¹²æ˜¯ååç¥ = æœˆå¹²åç¥ in äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨
    æ—¶å¹²æ˜¯ååç¥ = æ—¶å¹²åç¥ in äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨

    if (æœˆå¹²æ˜¯æ­£åç¥ and æ—¶å¹²æ˜¯ååç¥) or (æœˆå¹²æ˜¯ååç¥ and æ—¶å¹²æ˜¯æ­£åç¥):                 # å¦‚æœæ˜¯â€œä¸€æ­£ä¸€åâ€çš„æƒ…å†µ  #8.1 å¤„ç†åæ­£å®šä½æƒ…å†µï¼šå½“å‘½ç›˜é‡Œçš„æœˆæŸ±å’Œæ—¶æŸ±ä¸€ä¸ªæ˜¯æ­£åç¥ä¸€ä¸ªæ˜¯ååç¥
        def å¤„ç†åæ­£å®šä½æƒ…å†µ():
            global æœªç°æ­£ååç¥ä¸»å­—å…¸     # å¤§å£°å®£å‘Šæˆ‘è¦åœ¨å‡½æ•°å†…ç”¨è¿™ä¸ªå…¨å±€å­—å…¸äº†
            å·²ç°æ­£åç¥ = [shen for shen in æœˆå¹²å’Œæ—¶å¹²çš„åç¥ä¿¡æ¯åˆ—è¡¨ if shen in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨]          
            æœªç°æ­£åç¥ = [shen for shen in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ if shen not in å·²ç°æ­£åç¥ and shen != å¹´å¹²åç¥]  
            å·²ç°ååç¥ = [shen for shen in æœˆå¹²å’Œæ—¶å¹²çš„åç¥ä¿¡æ¯åˆ—è¡¨ if shen in äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨]                
            æœªç°ååç¥ = [shen for shen in äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨ if shen not in å·²ç°ååç¥ and shen != å¹´å¹²åç¥]  
            å·²ç°å¹´å¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åç¥']
            æœªç°æ­£åç¥ = [shen for shen in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ if shen not in å·²ç°æ­£åç¥ + [å·²ç°å¹´å¹²åç¥]] 

            for å¤©å¹²å in åå¤©å¹²çš„åå­—åˆ—è¡¨:
                shen = åç¥å…³ç³»è¡¨[me][å¤©å¹²å]
                if shen in æœªç°æ­£åç¥ or shen in æœªç°ååç¥:
                    if å¤©å¹²å not in æœªç°æ­£ååç¥ä¸»å­—å…¸:
                        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²å] = {}
                    æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²å].update({
                        'åå­—': å¤©å¹²å,
                        'åç¥': shen,
                        'äº”è¡Œå±æ€§': åå¤©å¹²äº”è¡Œå¯¹ç…§è¡¨[å¤©å¹²å],
                        'é˜´é˜³å±æ€§': 'é˜³' if å¤©å¹²å in é˜³å±æ€§å¤©å¹²åˆ—è¡¨ else 'é˜´',
                        'çª—å£åå­—': '',
                        'çª—å£ä½ç½®': '',
                        'çª—å£åç¥': '',
                        'å¿Œç”¨ç¥å½’å±': '',
                        'å¤–ç¯å¢ƒ': '',
                        'å†…ç¯å¢ƒ': '',
                        'æ˜¯å¦æœ‰é•œåƒ': ''
                    })
    

            for å¤©å¹²å, å€¼ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
                for æ–°åŠ çš„äºŒçº§é”® in ['çª—å£åå­—', 'çª—å£åç¥', 'çª—å£ä½ç½®', 'å¿Œç”¨ç¥å½’å±', 'å¤–ç¯å¢ƒ', 'å†…ç¯å¢ƒ']:       # ä¸ºæœªç°æ­£ååç¥ä¸»å­—å…¸æ·»åŠ æ–°çš„äºŒçº§é”®
                    if æ–°åŠ çš„äºŒçº§é”® not in å€¼:
                        å€¼[æ–°åŠ çš„äºŒçº§é”®] = None

            #åœ¨å‡½æ•°å†…é‡æ–°ç”Ÿæˆæœªç°æ­£åç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸
            æœªç°æ­£åç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸ = {}     
            for å¤©å¹²å in åå¤©å¹²çš„åå­—åˆ—è¡¨:
                shen = åç¥å…³ç³»è¡¨[me][å¤©å¹²å]     
                if shen in æœªç°æ­£åç¥:
                    æœªç°æ­£åç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸[shen] = å¤©å¹²å     # è®°å½•åç¥å’Œå¯¹åº”çš„å¤©å¹²å

            # 9.1.1 æ‰¾åˆ°æœªç°æ­£åç¥
            å·²ç°æ­£åç¥ç´¢å¼• = [i for i in [1, 3] if å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[i] in å·²ç°æ­£åç¥]               # æŸ¥æ‰¾å·²ç°æ­£åç¥åœ¨[æœˆå¹²ğŸŒ•]æˆ–[æ—¶å¹²â°]ä¸­çš„ç´¢å¼•  ï¼ˆä¹‹æ‰€ä»¥ç”¨ç´¢å¼•è¿™æ ·çš„è®¾è®¡ï¼Œæ˜¯ä¸ºäº†æƒ³è®©æ¯ä¸€ä¸ªå·²ç°æ­£åç¥çš„å¤©å¹²åå­—å’Œåç¥åå­— ä¸€ä¸€å¯¹åº”èµ·æ¥ï¼‰
            if å·²ç°æ­£åç¥ç´¢å¼•:               # å¦‚æœå­˜åœ¨å·²ç°æ­£åç¥ï¼Œæ›´æ–°"æœªç°æ­£åç¥"çš„å€¼    #ç¿»è¯‘ï¼šâ€œå¦‚æœ å·²ç°æ­£åç¥ç´¢å¼• ä¸ä¸ºç©ºåˆ™ï¼šâ€
                for ç´¢å¼•_æ­£ in å·²ç°æ­£åç¥ç´¢å¼•:
                    å››æŸ±åˆ—è¡¨ = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
                    å·²ç°æ­£åç¥å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å››æŸ±åˆ—è¡¨[ç´¢å¼•_æ­£]]['åå­—']
                    å‡½æ•°å†…å·²ç°æ­£åç¥ = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[ç´¢å¼•_æ­£]          #ç¿»è¯‘ï¼šå·²ç°æ­£åç¥ çš„åå­—æ˜¯è¿™ä¸¤ä¸ªï¼ˆå¦‚ï¼š 'æ­£å°','æ­£å®˜'ï¼‰
                    for å¤©å¹²å, å€¼ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
                        if å€¼['åç¥'] in æœªç°æ­£åç¥:
                            å€¼['çª—å£åå­—'] = å·²ç°æ­£åç¥å¤©å¹²
                            å€¼['çª—å£åç¥'] = å‡½æ•°å†…å·²ç°æ­£åç¥
                            å€¼['å¿Œç”¨ç¥å½’å±'] = åˆ¤å®šç”¨å¿Œç¥(å¤©å¹²å, 'æ—¥å¹²', æ ¼å±€)
                            for ä½ç½® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']:   # é€šè¿‡åç¥å’Œå¤©å¹²ååŒé‡åŒ¹é…æ¥å®šä½çª—å£ä½ç½®
                                if å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['åå­—'] == å·²ç°æ­£åç¥å¤©å¹² and å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['åç¥'] == å‡½æ•°å†…å·²ç°æ­£åç¥:
                                    å€¼['çª—å£ä½ç½®'] = ä½ç½®
                                    break

                print("æœªåœ¨å‘½ç›˜ä¸Šæ˜¾ç¤ºçš„ã€æ­£åç¥ã€‘ï¼š" + ', '.join(f"{å±æ€§å­—å…¸['åç¥']}â†’{å¤©å¹²å}" for å¤©å¹²å, å±æ€§å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items() if å±æ€§å­—å…¸['åç¥'] in æœªç°æ­£åç¥))

                # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ã€GUIç•Œé¢æ‰“å°ã€‘åœ¨å¯¹åº”çš„æŸ±å­ä¸Šæ–¹åˆ›å»ºä¸€ä¸ªæ–°çš„æ¡†æ¶ï¼Œæ˜¾ç¤ºæœªç°æ­£åç¥
                æœªç°æ­£åç¥çš„æ¡†æ¶ = tk.Frame(å››æŸ±ä»¬çš„æ¡†æ¶, bg='#f5f5f1')
                æœªç°æ­£åç¥çš„æ¡†æ¶.grid(row=0, column=ç´¢å¼•_æ­£, pady=(0, 6))
                # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸GUIç•Œé¢æ˜¾ç¤ºæœªç°æ­£åç¥ä¿¡æ¯
                æœªç°æ­£åç¥ä¿¡æ¯çš„æè¿°æ ‡ç­¾ = tk.Label(æœªç°æ­£åç¥çš„æ¡†æ¶, text="æœªåœ¨å‘½ç›˜ä¸Šæ˜¾ç¤ºçš„ã€æ­£åç¥ã€‘ï¼š",font=("Arial", 10), fg="#a4a4a4", bg='#f5f5f1')
                æœªç°æ­£åç¥ä¿¡æ¯çš„æè¿°æ ‡ç­¾.pack(anchor='center')
                æœªç°æ­£åç¥åç¥å¤©å¹²æ˜¾ç¤ºçš„å®¹å™¨ = tk.Frame(æœªç°æ­£åç¥çš„æ¡†æ¶, bg='#f5f5f1')
                æœªç°æ­£åç¥åç¥å¤©å¹²æ˜¾ç¤ºçš„å®¹å™¨.pack(anchor='center')
                for shen in æœªç°æ­£åç¥:       # éå†æœªç°æ­£åç¥
                    å¤©å¹²å = æœªç°æ­£åç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸.get(shen, '')
                    å¿Œç”¨ç¥å½’å± = æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²å]['å¿Œç”¨ç¥å½’å±']
                    color = '#d189c9' if å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥' else '#74789c'
                    æœªç°æ­£åç¥åç¥å¤©å¹²çš„æ¡†æ¶ = tk.Frame(æœªç°æ­£åç¥åç¥å¤©å¹²æ˜¾ç¤ºçš„å®¹å™¨, bg='#f5f5f1')    # åˆ›å»ºä¸€ä¸ªå°æ¡†æ¶åŒ…å«åç¥å’Œå¤©å¹²
                    æœªç°æ­£åç¥åç¥å¤©å¹²çš„æ¡†æ¶.pack(side=tk.LEFT, padx=6)
                    tk.Label(æœªç°æ­£åç¥åç¥å¤©å¹²çš„æ¡†æ¶, text=f"{shen}({å¿Œç”¨ç¥å½’å±})", font=("Arial", 8), fg=color, bg='#f5f5f1').pack(pady=2, padx=2)
                    tk.Label(æœªç°æ­£åç¥åç¥å¤©å¹²çš„æ¡†æ¶, text=å¤©å¹²å, font=("Arial", 18), fg="#7e7e7e", bg='#f5f5f1').pack(pady=3, padx=3)    # æ˜¾ç¤ºå¯¹åº”çš„å¤©å¹²å

            else:   # å¦‚æœä¸å­˜åœ¨å·²ç°æ­£åç¥ï¼Œæç¤ºä¿¡æ¯
                print("è¿™ä¸ªå‘½å±€é‡Œï¼Œä¸æ˜¯â€œä¸€æ­£ä¸€åâ€çš„æƒ…å†µï¼Œæœ¬å‘½å±€é€‚ç”¨äºâ€œå¤„ç†éåæ­£å®šä½æƒ…å†µâ€çš„æ¨å¯¼æ–¹å¼ğŸ§")



            # 9.1.2 æ‰¾åˆ°æœªç°ååç¥
            æœªç°ååç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸ = {}     
            for å¤©å¹²å in åå¤©å¹²çš„åå­—åˆ—è¡¨:
                shen = åç¥å…³ç³»è¡¨[me][å¤©å¹²å]     
                if shen in æœªç°ååç¥:
                    æœªç°ååç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸[shen] = å¤©å¹²å    
            å·²ç°ååç¥ç´¢å¼• = [i for i in [1, 3] if å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[i] in å·²ç°ååç¥]               # æŸ¥æ‰¾å·²ç°ååç¥åœ¨[æœˆå¹²ğŸŒ•]æˆ–[æ—¶å¹²â°]ä¸­çš„ç´¢å¼•  ï¼ˆä¹‹æ‰€ä»¥ç”¨ç´¢å¼•è¿™æ ·çš„è®¾è®¡ï¼Œæ˜¯ä¸ºäº†æƒ³è®©æ¯ä¸€ä¸ªå·²ç°ååç¥çš„å¤©å¹²åå­—å’Œåç¥åå­— ä¸€ä¸€å¯¹åº”èµ·æ¥ï¼‰

            if å·²ç°ååç¥ç´¢å¼•:               # å¦‚æœå­˜åœ¨å·²ç°ååç¥ï¼Œæ›´æ–°"æœªç°ååç¥"çš„å€¼    #ç¿»è¯‘ï¼šâ€œå¦‚æœ å·²ç°ååç¥ç´¢å¼• ä¸ä¸ºç©ºåˆ™ï¼šâ€
                for ç´¢å¼•_å in å·²ç°ååç¥ç´¢å¼•:
                    å››æŸ±åˆ—è¡¨ = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²'] 
                    å·²ç°ååç¥å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å››æŸ±åˆ—è¡¨[ç´¢å¼•_å]]['åå­—']     
                    å‡½æ•°å†…å·²ç°ååç¥ = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[ç´¢å¼•_å]          #ç¿»è¯‘ï¼šå·²ç°ååç¥ çš„åå­—æ˜¯è¿™ä¸¤ä¸ªï¼ˆå¦‚ï¼š 'åå°','ä¸ƒæ€'ï¼‰

                    for å¤©å¹²å, å€¼ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
                        if å€¼['åç¥'] in æœªç°ååç¥:
                            å€¼['çª—å£åå­—'] = å·²ç°ååç¥å¤©å¹²
                            å€¼['çª—å£åç¥'] = å‡½æ•°å†…å·²ç°ååç¥
                            å€¼['å¿Œç”¨ç¥å½’å±'] = åˆ¤å®šç”¨å¿Œç¥(å¤©å¹²å, 'æ—¥å¹²', æ ¼å±€)
                            for ä½ç½® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']:   # é€šè¿‡åç¥å’Œå¤©å¹²ååŒé‡åŒ¹é…æ¥å®šä½çª—å£ä½ç½®
                                if å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['åå­—'] == å·²ç°ååç¥å¤©å¹² and å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['åç¥'] == å‡½æ•°å†…å·²ç°ååç¥:
                                    å€¼['çª—å£ä½ç½®'] = ä½ç½®
                                    break
                
                print("æœªåœ¨å‘½ç›˜ä¸Šæ˜¾ç¤ºçš„ã€ååç¥ã€‘ï¼š" + ', '.join(f"{å±æ€§å­—å…¸['åç¥']}â†’{å¤©å¹²å}" for å¤©å¹²å, å±æ€§å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items() if å±æ€§å­—å…¸['åç¥'] in æœªç°ååç¥))

                # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ã€GUIç•Œé¢æ‰“å°ã€‘åœ¨å¯¹åº”çš„æŸ±å­ä¸Šæ–¹åˆ›å»ºä¸€ä¸ªæ–°çš„æ¡†æ¶ï¼Œæ˜¾ç¤ºæœªç°ååç¥
                æœªç°ååç¥çš„æ¡†æ¶ = tk.Frame(å››æŸ±ä»¬çš„æ¡†æ¶, bg='#f5f5f1')
                æœªç°ååç¥çš„æ¡†æ¶.grid(row=0, column=ç´¢å¼•_å, pady=(0, 6))
                # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸GUIç•Œé¢æ˜¾ç¤ºæœªç°ååç¥ä¿¡æ¯
                æœªç°ååç¥ä¿¡æ¯çš„æè¿°æ ‡ç­¾ = tk.Label(æœªç°ååç¥çš„æ¡†æ¶, text="æœªåœ¨å‘½ç›˜ä¸Šæ˜¾ç¤ºçš„ã€ååç¥ã€‘ï¼š",font=("Arial", 10), fg="#a4a4a4", bg='#f5f5f1')
                æœªç°ååç¥ä¿¡æ¯çš„æè¿°æ ‡ç­¾.pack(anchor='center')
                æœªç°ååç¥åç¥å¤©å¹²æ˜¾ç¤ºçš„å®¹å™¨ = tk.Frame(æœªç°ååç¥çš„æ¡†æ¶, bg='#f5f5f1')
                æœªç°ååç¥åç¥å¤©å¹²æ˜¾ç¤ºçš„å®¹å™¨.pack(anchor='center')
                for shen in æœªç°ååç¥:       # éå†æœªç°ååç¥
                    å¤©å¹²å = æœªç°ååç¥ä»¬åŠå…¶å¤©å¹²åçš„å­—å…¸.get(shen, '')
                    å¿Œç”¨ç¥å½’å± = æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²å]['å¿Œç”¨ç¥å½’å±']
                    color = '#d189c9' if å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥' else '#74789c'
                    æœªç°ååç¥åç¥å¤©å¹²çš„æ¡†æ¶ = tk.Frame(æœªç°ååç¥åç¥å¤©å¹²æ˜¾ç¤ºçš„å®¹å™¨, bg='#f5f5f1')    # åˆ›å»ºä¸€ä¸ªå°æ¡†æ¶åŒ…å«åç¥å’Œå¤©å¹²
                    æœªç°ååç¥åç¥å¤©å¹²çš„æ¡†æ¶.pack(side=tk.LEFT, padx=6)
                    tk.Label(æœªç°ååç¥åç¥å¤©å¹²çš„æ¡†æ¶, text=f"{shen}({å¿Œç”¨ç¥å½’å±})", font=("Arial", 8), fg=color, bg='#f5f5f1').pack(pady=2, padx=2)   # æ˜¾ç¤ºåç¥åç§°
                    tk.Label(æœªç°ååç¥åç¥å¤©å¹²çš„æ¡†æ¶, text=å¤©å¹²å, font=("Arial", 18), fg="#7e7e7e",bg='#f5f5f1').pack(pady=3, padx=3)  # æ˜¾ç¤ºå¯¹åº”çš„å¤©å¹²å
                    
            else:   # å¦‚æœä¸å­˜åœ¨å·²ç°ååç¥ï¼Œæç¤ºä¿¡æ¯
                print("è¿™ä¸ªå‘½å±€é‡Œï¼Œä¸æ˜¯â€œä¸€æ­£ä¸€åâ€çš„æƒ…å†µï¼Œæœ¬å‘½å±€é€‚ç”¨äºâ€œå¤„ç†éåæ­£å®šä½æƒ…å†µâ€çš„æ¨å¯¼æ–¹å¼ğŸ§")
            pass
        å¤„ç†åæ­£å®šä½æƒ…å†µ()

    elif (æœˆå¹²æ˜¯æ­£åç¥ and æ—¶å¹²æ˜¯æ­£åç¥) or (æœˆå¹²æ˜¯ååç¥ and æ—¶å¹²æ˜¯ååç¥):             #åŒæ­£æˆ–åŒåçš„æƒ…å†µ   #8.2 å¤„ç†éåæ­£å®šä½æƒ…å†µï¼šå½“å‘½ç›˜é‡Œçš„æœˆæŸ±å’Œæ—¶æŸ±ä¸¤ä¸ªéƒ½æ˜¯æ­£åç¥ or ä¸¤ä¸ªéƒ½æ˜¯ååç¥ï¼ˆå³ï¼šä¸¤éƒ½æ­£orä¸¤éƒ½åï¼‰
        def åŒæ­£æˆ–åŒåçš„æƒ…å†µä¸‹æ‰¾æœªç°æ­£ååç¥çš„åŠæ³•(æ‰¾æ­£åç¥çš„çª—å£, æ‰¾ååç¥çš„çª—å£):
                global æœªç°æ­£ååç¥ä¸»å­—å…¸
                # è·å–å·²ç°çš„æ­£åç¥å’Œååç¥
                å·²ç°æ­£åç¥ = [shen for shen in æœˆå¹²å’Œæ—¶å¹²çš„åç¥ä¿¡æ¯åˆ—è¡¨ if shen in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨]          
                æœªç°æ­£åç¥ = [shen for shen in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ if shen not in å·²ç°æ­£åç¥ and shen != å¹´å¹²åç¥]  
                å·²ç°ååç¥ = [shen for shen in æœˆå¹²å’Œæ—¶å¹²çš„åç¥ä¿¡æ¯åˆ—è¡¨ if shen in äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨]                
                æœªç°ååç¥ = [shen for shen in äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨ if shen not in å·²ç°ååç¥ and shen != å¹´å¹²åç¥] 
                å·²ç°å¹´å¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åç¥']
                # å¯»æ‰¾æœªç°çš„æ­£åç¥
                æœªç°æ­£åç¥ = [shen for shen in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ if shen not in å·²ç°æ­£åç¥ + [å·²ç°å¹´å¹²åç¥]]     # æ‰¾åˆ°æœªç°çš„æ­£åç¥
                åç¥ä¸å¤©å¹²çš„å¯¹åº”å…³ç³»å­—å…¸ = {}
                for å¤©å¹²å in åå¤©å¹²çš„åå­—åˆ—è¡¨:
                    å½“å‰åç¥ = åç¥å…³ç³»è¡¨[me][å¤©å¹²å]  # è·å–æ—¥ä¸»ä¸å½“å‰å¤©å¹²çš„åç¥å…³ç³»
                    if å½“å‰åç¥ in æœªç°æ­£åç¥:
                        åç¥ä¸å¤©å¹²çš„å¯¹åº”å…³ç³»å­—å…¸[å½“å‰åç¥] = å¤©å¹²å  # è®°å½•åç¥å’Œå¯¹åº”çš„å¤©å¹²

                if æœªç°æ­£åç¥:         # åœ¨æœªç°æ­£ååç¥ä¸»å­—å…¸ä¸­æ·»åŠ ä¿¡æ¯
                    for æœªç°åç¥ in æœªç°æ­£åç¥:
                        å¤©å¹² = åç¥ä¸å¤©å¹²çš„å¯¹åº”å…³ç³»å­—å…¸.get(æœªç°åç¥, "")
                        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²] = {'åç¥': æœªç°åç¥,'åå­—': å¤©å¹²,'äº”è¡Œå±æ€§': åå¤©å¹²äº”è¡Œå¯¹ç…§è¡¨[å¤©å¹²],'é˜´é˜³å±æ€§': 'é˜³' if å¤©å¹² in é˜³å±æ€§å¤©å¹²åˆ—è¡¨ else 'é˜´','å¿Œç”¨ç¥å½’å±': åˆ¤å®šç”¨å¿Œç¥(å¤©å¹², 'æ—¥å¹²', æ ¼å±€),'çª—å£åå­—': '','çª—å£ä½ç½®': '','çª—å£åç¥': '','å¤–ç¯å¢ƒ': '','å†…ç¯å¢ƒ': '','æ˜¯å¦æœ‰é•œåƒ': ''}
                        å·²ç°æ­£åç¥çš„å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æ‰¾æ­£åç¥çš„çª—å£]['åå­—']            # è·å–å·²ç°æ­£åç¥çš„å¤©å¹²å’Œåç¥
                        å·²ç°æ­£åç¥çš„åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æ‰¾æ­£åç¥çš„çª—å£]['åç¥']
                        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['çª—å£åå­—'] = å·²ç°æ­£åç¥çš„å¤©å¹²
                        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['çª—å£åç¥'] = å·²ç°æ­£åç¥çš„åç¥
                        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['çª—å£ä½ç½®'] = æ‰¾æ­£åç¥çš„çª—å£
                        if ((æ€§åˆ« == "ç”·" and æ‰¾æ­£åç¥çš„çª—å£ == 'æ—¶å¹²') or (æ€§åˆ« == "å¥³" and æ‰¾æ­£åç¥çš„çª—å£ == 'æ—¶å¹²')):
                            æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['æ˜¯å¦æœ‰é•œåƒ'] = 'æœ‰é•œåƒ'

                    # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ åˆ›å»ºæœªç°æ­£åç¥çš„æ¡†æ¶å¹¶æ˜¾ç¤ºäºGUIç•Œé¢
                    idx_æ‰¾æ­£åç¥ = {'å¹´å¹²': 0, 'æœˆå¹²': 1, 'æ—¥å¹²': 2, 'æ—¶å¹²': 3}[æ‰¾æ­£åç¥çš„çª—å£]
                    æœªç°æ­£åç¥çš„æ¡†æ¶ = tk.Frame(å››æŸ±ä»¬çš„æ¡†æ¶, bg='#f5f5f1')
                    æœªç°æ­£åç¥çš„æ¡†æ¶.grid(row=0, column=idx_æ‰¾æ­£åç¥, pady=(0, 6))
                    æè¿°æ ‡ç­¾ = tk.Label(æœªç°æ­£åç¥çš„æ¡†æ¶,text="æœªåœ¨å‘½ç›˜ä¸Šæ˜¾ç¤ºçš„ã€æ­£åç¥ã€‘ï¼š",font=("Arial", 10),fg="#a4a4a4",bg='#f5f5f1')
                    æè¿°æ ‡ç­¾.pack(anchor='center')
                    å®¹å™¨ = tk.Frame(æœªç°æ­£åç¥çš„æ¡†æ¶, bg='#f5f5f1')
                    å®¹å™¨.pack(anchor='center')
                    for æœªç°åç¥ in æœªç°æ­£åç¥:
                        å¤©å¹² = åç¥ä¸å¤©å¹²çš„å¯¹åº”å…³ç³»å­—å…¸.get(æœªç°åç¥, '')
                        å¿Œç”¨ç¥å½’å± = æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['å¿Œç”¨ç¥å½’å±']
                        color = '#d189c9' if å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥' else '#74789c'
                        æ¡†æ¶ = tk.Frame(å®¹å™¨, bg='#f5f5f1')
                        æ¡†æ¶.pack(side=tk.LEFT, padx=6)
                        tk.Label(æ¡†æ¶,text=f"{æœªç°åç¥}({å¿Œç”¨ç¥å½’å±})",font=("Arial", 8),fg=color, bg='#f5f5f1').pack(pady=2, padx=2)
                        tk.Label(æ¡†æ¶,text=å¤©å¹²,font=("Arial", 18),fg="#7e7e7e",bg='#f5f5f1').pack(pady=3, padx=3)

                # å¯»æ‰¾æœªç°çš„ååç¥
                æœªç°ååç¥ = [æœªç°åç¥ for æœªç°åç¥ in äº”ä¸ªååç¥åˆ—è¡¨å¤§å…¨ if æœªç°åç¥ not in å·²ç°ååç¥ + [å·²ç°å¹´å¹²åç¥]]     # æ‰¾åˆ°æœªç°çš„ååç¥
                ååç¥ä¸å¤©å¹²çš„å¯¹åº”å…³ç³»å­—å…¸ = {}
                for å¤©å¹²å in åå¤©å¹²çš„åå­—åˆ—è¡¨:
                    å½“å‰åç¥ = åç¥å…³ç³»è¡¨[me][å¤©å¹²å]
                    if å½“å‰åç¥ in æœªç°ååç¥:
                        ååç¥ä¸å¤©å¹²çš„å¯¹åº”å…³ç³»å­—å…¸[å½“å‰åç¥] = å¤©å¹²å

                if æœªç°ååç¥:    # åœ¨æœªç°æ­£ååç¥ä¸»å­—å…¸ä¸­æ·»åŠ ä¿¡æ¯
                    for æœªç°åç¥ in æœªç°ååç¥:
                        å¤©å¹² = ååç¥ä¸å¤©å¹²çš„å¯¹åº”å…³ç³»å­—å…¸.get(æœªç°åç¥, "")
                        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²] = {'åç¥': æœªç°åç¥,'åå­—': å¤©å¹²,'äº”è¡Œå±æ€§': åå¤©å¹²äº”è¡Œå¯¹ç…§è¡¨[å¤©å¹²],'å¿Œç”¨ç¥å½’å±': åˆ¤å®šç”¨å¿Œç¥(å¤©å¹², 'æ—¥å¹²', æ ¼å±€),'çª—å£åå­—': '','çª—å£ä½ç½®': '','çª—å£åç¥': '','å¤–ç¯å¢ƒ': '','å†…ç¯å¢ƒ': '','æ˜¯å¦æœ‰é•œåƒ': ''}
                        å·²ç°ååç¥çš„å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æ‰¾ååç¥çš„çª—å£]['åå­—']             # è·å–å·²ç°ååç¥çš„å¤©å¹²å’Œåç¥
                        å·²ç°ååç¥çš„åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æ‰¾ååç¥çš„çª—å£]['åç¥']
                        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['çª—å£åå­—'] = å·²ç°ååç¥çš„å¤©å¹²     # æ›´æ–°æœªç°ååç¥çš„çª—å£ä¿¡æ¯
                        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['çª—å£åç¥'] = å·²ç°ååç¥çš„åç¥
                        æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['çª—å£ä½ç½®'] = æ‰¾ååç¥çš„çª—å£
                        if ((æ€§åˆ« == "ç”·" and æ‰¾ååç¥çš„çª—å£ == 'æ—¶å¹²') or (æ€§åˆ« == "å¥³" and æ‰¾ååç¥çš„çª—å£ == 'æœˆå¹²')):
                            æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['æ˜¯å¦æœ‰é•œåƒ'] = 'æœ‰é•œåƒ'

                    # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ åˆ›å»ºæœªç°ååç¥çš„æ¡†æ¶å¹¶æ˜¾ç¤ºäºGUIç•Œé¢
                    idx_æ‰¾ååç¥ = {'å¹´å¹²': 0, 'æœˆå¹²': 1, 'æ—¥å¹²': 2, 'æ—¶å¹²': 3}[æ‰¾ååç¥çš„çª—å£]
                    æœªç°ååç¥çš„æ¡†æ¶ = tk.Frame(å››æŸ±ä»¬çš„æ¡†æ¶, bg='#f5f5f1')
                    æœªç°ååç¥çš„æ¡†æ¶.grid(row=0, column=idx_æ‰¾ååç¥, pady=(0, 6))
                    æè¿°æ ‡ç­¾ = tk.Label(æœªç°ååç¥çš„æ¡†æ¶,text="æœªåœ¨å‘½ç›˜ä¸Šæ˜¾ç¤ºçš„ã€ååç¥ã€‘ï¼ˆé•œåƒåç¥ï¼‰ï¼š",font=("Arial", 10),fg="#a4a4a4",bg='#f5f5f1')
                    æè¿°æ ‡ç­¾.pack(anchor='center')
                    å®¹å™¨ = tk.Frame(æœªç°ååç¥çš„æ¡†æ¶, bg='#f5f5f1')
                    å®¹å™¨.pack(anchor='center')
                    for æœªç°åç¥ in æœªç°ååç¥:
                        å¤©å¹² = ååç¥ä¸å¤©å¹²çš„å¯¹åº”å…³ç³»å­—å…¸.get(æœªç°åç¥, '')
                        å¿Œç”¨ç¥å½’å± = æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²]['å¿Œç”¨ç¥å½’å±']
                        color = '#d189c9' if å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥' else '#74789c'
                        æ¡†æ¶ = tk.Frame(å®¹å™¨, bg='#f5f5f1')
                        æ¡†æ¶.pack(side=tk.LEFT, padx=6)
                        tk.Label(æ¡†æ¶,text=f"{æœªç°åç¥}({å¿Œç”¨ç¥å½’å±})",font=("Arial", 8), fg=color, bg='#f5f5f1').pack(pady=2, padx=2)
                        tk.Label(æ¡†æ¶,text=å¤©å¹²,font=("Arial", 18),fg="#7e7e7e",bg='#f5f5f1').pack(pady=3, padx=3)

                return æœªç°æ­£ååç¥ä¸»å­—å…¸
        def å¤„ç†éåæ­£å®šä½æƒ…å†µ():   
            if æ€§åˆ« == "ç”·":
                åŒæ­£æˆ–åŒåçš„æƒ…å†µä¸‹æ‰¾æœªç°æ­£ååç¥çš„åŠæ³•('æœˆå¹²', 'æ—¶å¹²')      # ç”·ï¼šæœˆå¹²ğŸŒ•ä¸ºæœªå‡ºç°æ­£åç¥çš„çª—å£ï¼Œæ—¶å¹²â°ä¸ºæœªå‡ºç°ååç¥çš„çª—å£
            elif æ€§åˆ« == "å¥³":
                åŒæ­£æˆ–åŒåçš„æƒ…å†µä¸‹æ‰¾æœªç°æ­£ååç¥çš„åŠæ³•('æ—¶å¹²', 'æœˆå¹²')      # å¥³ï¼šæœˆå¹²ğŸŒ•ä¸ºæœªå‡ºç°ååç¥çš„çª—å£ï¼Œæ—¶å¹²â°ä¸ºæœªå‡ºç°æ­£åç¥çš„çª—å£
            else:
                print("è¿™ä¸ªå‘½å±€ï¼Œä¸æ˜¯åŒæ­£æˆ–åŒåçš„æƒ…å†µï¼Œæœ¬å‘½å±€é€‚ç”¨äºå…¶ä»–æ¨å¯¼æ–¹å¼ğŸ§")
        å¤„ç†éåæ­£å®šä½æƒ…å†µ()  # è°ƒç”¨å¤„ç†éåæ­£å®šä½æƒ…å†µçš„å‡½æ•°







    #9. å¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶å’Œå†…ç¯å¢ƒå®šå‰å‡¶ï¼ˆåŠ ä¸Šå¤§è¿æµå¹´å…³ç³»ï¼‰
    from ganzhi import åå¤©å¹²äº”è¡Œå¯¹ç…§è¡¨, åäºŒåœ°æ”¯äº”è¡Œå¯¹ç…§è¡¨, æ™¦è„†å†²ç‰¹æ®Šå…³ç³»å­—å…¸, äº”è¡Œä½œç”¨å…³ç³»å­—å…¸
    ç”Ÿæ‰¶åˆ—è¡¨ = ['åŒ', 'ç”Ÿ']
    å—åˆ¶åˆ—è¡¨ = ['å…‹', 'æ³„', 'è€—', 'åˆ‘', 'å†²', 'æ™¦', 'è„†', 'é›¶']



    def åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(ä½œç”¨è€…, è¢«ä½œç”¨è€…):
        # åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ä¹‹é—´æ˜¯å¦ä¸ºç”Ÿæ‰¶å…³ç³»
        _, ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬, _, _ = å…ƒç´ é—´å…³ç³»åˆ†æ(ä½œç”¨è€…, è¢«ä½œç”¨è€…)
        return ç”Ÿæ‰¶å—åˆ¶å…³ç³»æ¦‚æ‹¬

    # 9.1 åˆ†æå¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶
    def åˆ†æå¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶():
        å¤–ç¯å¢ƒç»“è®º = {}
        # åˆ†ææ—¶å¹²â° å’Œ æœˆå¹²ğŸŒ• çš„å¤–ç¯å¢ƒå‰å‡¶
        for ä½ç½®, ç´¢å¼• in [('æ—¶å¹²', 3), ('æœˆå¹²', 1)]:
            åç¥ = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[ç´¢å¼•]
            å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®].get('å¿Œç”¨ç¥å½’å±')
            å¤©å¹²å = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['åå­—']

            if å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['å¤–ç¯å¢ƒ'] = 'å‰'
            elif å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['å¤–ç¯å¢ƒ'] = 'å‡¶'
            
            ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œå·²ç°åç¥ã®å¤–ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{ä½ç½®}ã€‘ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘ä¸ºã€{å¿Œç”¨ç¥å½’å±}ã€‘ï¼Œâˆ´ ã€{ä½ç½®}ã€‘ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘ã€{å¿Œç”¨ç¥å½’å±}ã€‘å¤–ç¯å¢ƒä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['å¤–ç¯å¢ƒ']}ã€‘"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            # åœ¨å¾ªç¯å†…éƒ¨å°±ä¿å­˜ç»“è®º
            å¤–ç¯å¢ƒç»“è®º[ä½ç½®] = {'å¤–ç¯å¢ƒ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['å¤–ç¯å¢ƒ'],
                'ä½œç”¨è·¯å¾„': f"âˆµã€{ä½ç½®}ã€‘ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘ä¸ºã€{å¿Œç”¨ç¥å½’å±}ã€‘ï¼Œâˆ´ ã€{ä½ç½®}ã€‘ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘ã€{å¿Œç”¨ç¥å½’å±}ã€‘å¤–ç¯å¢ƒä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['å¤–ç¯å¢ƒ']}ã€‘"}


        # åˆ†æå¹´å¹²ğŸ§¨ çš„å¤–ç¯å¢ƒå‰å‡¶
        æœˆå¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('å¿Œç”¨ç¥å½’å±')
        # åˆ¤æ–­æœˆå¹²å¯¹å¹´å¹²ğŸ§¨æ˜¯å¦ç”Ÿæ‰¶
        å¹´å¹²å¯¹æœˆå¹²çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('å¹´å¹²', 'æœˆå¹²')
        if æœˆå¹²å¿Œç”¨ç¥å½’å±: 
            if æœˆå¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
                if å¹´å¹²å¯¹æœˆå¹²çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¿Œç”¨ç¥å½’å±'] = 'ç”¨ç¥'
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ'] = 'å‰'
                elif å¹´å¹²å¯¹æœˆå¹²çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or å¹´å¹²å¯¹æœˆå¹²çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¿Œç”¨ç¥å½’å±'] = 'å¿Œç¥'
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ'] = 'å‡¶'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ'] = 'ä¸æ—ºä¸å¼±ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'
            elif æœˆå¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
                if å¹´å¹²å¯¹æœˆå¹²çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¿Œç”¨ç¥å½’å±'] = 'å¿Œç¥'
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ'] = 'å‡¶'
                elif å¹´å¹²å¯¹æœˆå¹²çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or å¹´å¹²å¯¹æœˆå¹²çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¿Œç”¨ç¥å½’å±'] = 'ç”¨ç¥'
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ'] = 'å‰'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ'] = 'ä¸æ—ºä¸å¼±ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'
            else:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'
    
        å¹´å¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²'].get('å¿Œç”¨ç¥å½’å±')
        æœˆå¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('å¿Œç”¨ç¥å½’å±')
        æœˆå¹²å = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åå­—']
        å¹´å¹²å = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åå­—']
        æœˆå¹²åç¥ = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨[1]

        ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œå·²ç°åç¥ã®å¤–ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€å¹´å¹²ã€‘ã€{å¹´å¹²å¯¹æœˆå¹²çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœˆå¹²åç¥}ã€‘ï¼Œ âˆµã€{æœˆå¹²å}ã€‘ã€{æœˆå¹²åç¥}ã€‘ä¸ºã€{å¹´å¹²å¿Œç”¨ç¥å½’å±}ã€‘ã€‚ âˆ´ ã€å¹´å¹²ã€‘ã€{å¹´å¹²å}ã€‘ã€{åç¥}ã€‘å¤–ç¯å¢ƒä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ']}ã€‘"
        æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
        print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
        

        å¤–ç¯å¢ƒç»“è®º['å¹´å¹²'] = {
            'å¤–ç¯å¢ƒ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ'],
            'ä½œç”¨è·¯å¾„': f"âˆµã€å¹´å¹²ã€‘ã€{å¹´å¹²å¯¹æœˆå¹²çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœˆå¹²åç¥}ã€‘ï¼Œ âˆµã€{æœˆå¹²å}ã€‘ã€{æœˆå¹²åç¥}ã€‘ä¸ºã€{å¹´å¹²å¿Œç”¨ç¥å½’å±}ã€‘ã€‚ âˆ´ ã€å¹´å¹²ã€‘ã€{å¹´å¹²å}ã€‘ã€{åç¥}ã€‘å¤–ç¯å¢ƒä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å¤–ç¯å¢ƒ']}ã€‘"}
    
        return å¤–ç¯å¢ƒç»“è®º
    åˆ†æå¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶()

    # 9.2 åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶
    def åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶():
        for idx, å¹²å, åç¥ in zip([3, 1, 0], ['æ—¶å¹²', 'æœˆå¹²', 'å¹´å¹²'], [æ—¶å¹²åç¥, æœˆå¹²åç¥, å¹´å¹²åç¥]):
            å¤©å¹²åå­— = æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[idx]
            åœ°æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[idx]

            # åˆ¤æ–­æ˜¯å¦æœ‰æ ¹
            if (åœ°æ”¯åå­—, å¤©å¹²åå­—) in æœ‰æ ¹å­—å…¸ and æœ‰æ ¹å­—å…¸[(åœ°æ”¯åå­—, å¤©å¹²åå­—)] == 'æœ‰æ ¹':
                æœ‰æ ¹ = True
            else:
                å¤©å¹²äº”è¡Œ = åå¤©å¹²äº”è¡Œå¯¹ç…§è¡¨.get(å¤©å¹²åå­—)
                åœ°æ”¯äº”è¡Œ = åäºŒåœ°æ”¯äº”è¡Œå¯¹ç…§è¡¨.get(åœ°æ”¯åå­—)
                if å¤©å¹²äº”è¡Œ and åœ°æ”¯äº”è¡Œ:
                    if (åœ°æ”¯åå­—, å¤©å¹²åå­—) in æ™¦è„†å†²ç‰¹æ®Šå…³ç³»å­—å…¸:
                        ä¸¤è€…å…³ç³» = æ™¦è„†å†²ç‰¹æ®Šå…³ç³»å­—å…¸[(åœ°æ”¯åå­—, å¤©å¹²åå­—)]
                    else:
                        ä¸¤è€…å…³ç³» = äº”è¡Œä½œç”¨å…³ç³»å­—å…¸.get((å¤©å¹²äº”è¡Œ, åœ°æ”¯äº”è¡Œ), '')
                    æœ‰æ ¹ = ä¸¤è€…å…³ç³» in ç”Ÿæ‰¶åˆ—è¡¨
                else:
                    æœ‰æ ¹ = False

            if æœ‰æ ¹:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å]['æ˜¯å¦æœ‰æ ¹'] = 'æœ‰æ ¹'

            # æ ¹æ®æœ‰æ ¹ä¸å¿Œç”¨ç¥å½’å±ï¼Œç¡®å®šå†…ç¯å¢ƒå‰å‡¶
            å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å].get('å¿Œç”¨ç¥å½’å±')
            if å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
                if æœ‰æ ¹:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å]['å†…ç¯å¢ƒ'] = 'å‰'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å]['å†…ç¯å¢ƒ'] = 'å‡¶'
            elif å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
                if æœ‰æ ¹:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å]['å†…ç¯å¢ƒ'] = 'å‡¶'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å]['å†…ç¯å¢ƒ'] = 'å‰'
            else:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å]['å†…ç¯å¢ƒ'] = 'æ—¢ä¸å‰ä¹Ÿä¸å‡¶'

            ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œå·²ç°åç¥ã®å†…ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼š âˆµã€{å¹²å}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å]['åå­—']}ã€‘ã€{'æœ‰æ ¹' if å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å].get('æ˜¯å¦æœ‰æ ¹') == 'æœ‰æ ¹' else 'æ— æ ¹'}ã€‘ä¸”ä¸ºã€{å¿Œç”¨ç¥å½’å±}ã€‘ï¼Œâˆ´ã€{å¹²å}ã€‘ã€{åç¥}ã€‘ã€{å¿Œç”¨ç¥å½’å±}ã€‘çš„å†…ç¯å¢ƒä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å]['å†…ç¯å¢ƒ']}ã€‘"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

        å†…ç¯å¢ƒç»“è®º = {'æ—¶å¹²': {
            'å†…ç¯å¢ƒ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒ'],
            'ä½œç”¨è·¯å¾„': f"ã€æ—¶å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åå­—']}ã€‘ã€{'æœ‰æ ¹' if å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²'].get('æ˜¯å¦æœ‰æ ¹') == 'æœ‰æ ¹' else 'æ— æ ¹'}ã€‘ä¸”ä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²'].get('å¿Œç”¨ç¥å½’å±')}ã€‘"},
        'æœˆå¹²': {
            'å†…ç¯å¢ƒ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å†…ç¯å¢ƒ'],
            'ä½œç”¨è·¯å¾„': f"ã€æœˆå¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åå­—']}ã€‘ã€{'æœ‰æ ¹' if å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('æ˜¯å¦æœ‰æ ¹') == 'æœ‰æ ¹' else 'æ— æ ¹'}ã€‘ä¸”ä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('å¿Œç”¨ç¥å½’å±')}ã€‘"},
        'å¹´å¹²': {
            'å†…ç¯å¢ƒ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒ'],
            'ä½œç”¨è·¯å¾„': f"ã€å¹´å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åå­—']}ã€‘ã€{'æœ‰æ ¹' if å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²'].get('æ˜¯å¦æœ‰æ ¹') == 'æœ‰æ ¹' else 'æ— æ ¹'}ã€‘ä¸”ä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²'].get('å¿Œç”¨ç¥å½’å±')}ã€‘"}}
        
        for å¹²å in ['æ—¶å¹²', 'æœˆå¹²', 'å¹´å¹²']:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¹²å].update({'å†…ç¯å¢ƒ': å†…ç¯å¢ƒç»“è®º[å¹²å]['å†…ç¯å¢ƒ']})   # æ›´æ–°åˆ°å…«å­—ä¿¡æ¯ä¸»å­—å…¸ä¸­
        return å†…ç¯å¢ƒç»“è®º
    åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶()

    #9.3 åˆ†æå¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶
    def åˆ†æå¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶():
        # åˆ†ææ—¶å¹² ğŸ•°ï¸ çš„å·¦ç¯å¢ƒå‰å‡¶
        æ—¶å¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²'].get('å¿Œç”¨ç¥å½’å±')
        ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æ—¶å¹²')
        if æ—¶å¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å·¦ç¯å¢ƒ'] = 'å‰'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å·¦ç¯å¢ƒ'] = 'å‡¶'
            else:  # ä¸æ—ºä¸å¼±å…³ç³»
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å·¦ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'
        elif æ—¶å¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å·¦ç¯å¢ƒ'] = 'å‡¶'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å·¦ç¯å¢ƒ'] = 'å‰'
            else:  # ä¸æ—ºä¸å¼±å…³ç³»
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å·¦ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'


        # åˆ†ææœˆå¹²ğŸŒ• çš„å·¦ç¯å¢ƒå‰å‡¶
        æœˆå¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('å¿Œç”¨ç¥å½’å±')
        ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('å¹´å¹²', 'æœˆå¹²')
        if æœˆå¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å·¦ç¯å¢ƒ'] = 'å‰'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å·¦ç¯å¢ƒ'] = 'å‡¶'
            else:  # ä¸æ—ºä¸å¼±å…³ç³»
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å·¦ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'
        elif æœˆå¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å·¦ç¯å¢ƒ'] = 'å‡¶'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å·¦ç¯å¢ƒ'] = 'å‰'
            else:  # ä¸æ—ºä¸å¼±å…³ç³»
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å·¦ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'


        # åˆ†æå¹´å¹² ğŸ§¨ çš„å·¦ç¯å¢ƒå‰å‡¶
        å¹´å¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²'].get('å¿Œç”¨ç¥å½’å±')
        if å¹´å¹²å¿Œç”¨ç¥å½’å±:
            æœˆå¹²ç”Ÿæ‰¶å¹´å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'å¹´å¹²') == 'ç”Ÿæ‰¶å…³ç³»'
            æ—¥å¹²ç”Ÿæ‰¶æœˆå¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æœˆå¹²') == 'ç”Ÿæ‰¶å…³ç³»'
            æœˆå¹²åˆ¶å¹´å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'å¹´å¹²') in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']
            æ—¥å¹²åˆ¶æœˆå¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æœˆå¹²') in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']

            if å¹´å¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
                if æœˆå¹²ç”Ÿæ‰¶å¹´å¹² and æ—¥å¹²ç”Ÿæ‰¶æœˆå¹²:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å·¦ç¯å¢ƒ'] = 'å‰'
                elif (æœˆå¹²ç”Ÿæ‰¶å¹´å¹² and æ—¥å¹²åˆ¶æœˆå¹²) or (æœˆå¹²åˆ¶å¹´å¹² and æ—¥å¹²ç”Ÿæ‰¶æœˆå¹²):
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å·¦ç¯å¢ƒ'] = 'å‡¶'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å·¦ç¯å¢ƒ'] = 'å‰'
            elif å¹´å¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
                if æœˆå¹²ç”Ÿæ‰¶å¹´å¹² and æ—¥å¹²ç”Ÿæ‰¶æœˆå¹²:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å·¦ç¯å¢ƒ'] = 'å‡¶'
                elif (æœˆå¹²ç”Ÿæ‰¶å¹´å¹² and æ—¥å¹²åˆ¶æœˆå¹²) or (æœˆå¹²åˆ¶å¹´å¹² and æ—¥å¹²ç”Ÿæ‰¶æœˆå¹²):
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å·¦ç¯å¢ƒ'] = 'å‰'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å·¦ç¯å¢ƒ'] = 'å‡¶'
        else:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å·¦ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'

        # æ‰“å°ç»“æœ
        global æ€§åˆ«å˜é‡
        ç¯å¢ƒç±»å‹å­—å…¸ = {}
        for å¤©å¹² in ['æ—¶å¹²', 'æœˆå¹²', 'å¹´å¹²']:
            åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²).get('åç¥')
            å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²).get('å¿Œç”¨ç¥å½’å±')
            å·¦ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²).get('å·¦ç¯å¢ƒ')
            æ˜¯æ­£åç¥ = åç¥ in ['æ­£å®˜', 'æ­£å°', 'æ­£è´¢', 'ä¼¤å®˜', 'åŠ«è´¢']
            if (æ€§åˆ« == 'ç”·' and æ˜¯æ­£åç¥) or (æ€§åˆ« == 'å¥³' and not æ˜¯æ­£åç¥):
                ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²] = "ç¤¾ä¼šç¯å¢ƒ"
            else:
                ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²] = "å†…å¿ƒç¯å¢ƒ"
            
            ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"ğŸ”{å¤©å¹²}: {åç¥} - {å¿Œç”¨ç¥å½’å±} - å·¦ç¯å¢ƒï¼š{å·¦ç¯å¢ƒ} - {ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}:{å·¦ç¯å¢ƒ}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
        
            # æ·»åŠ æ¨å¯¼è¿‡ç¨‹çš„æ‰“å°
            æ—¶å¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åå­—']
            æ—¶å¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åç¥']
            æœˆå¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åå­—']
            æœˆå¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åç¥']
            å¹´å¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åå­—']
            å¹´å¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åç¥']

            æ—¥æ—¶å…³ç³» = "ç”Ÿ" if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æ—¶å¹²') == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            å¹´æœˆå…³ç³» = "ç”Ÿ" if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('å¹´å¹²', 'æœˆå¹²') == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            æ—¥å¹²æœˆå¹²å…³ç³» = "ç”Ÿ" if æ—¥å¹²ç”Ÿæ‰¶æœˆå¹² else "åˆ¶"
            æœˆå¹²å¹´å¹²å…³ç³» = "ç”Ÿ" if æœˆå¹²ç”Ÿæ‰¶å¹´å¹² else "åˆ¶"
            if å¤©å¹² == 'æ—¶å¹²':
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"ğŸ”ã€Œå·²ç°åç¥ã®å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ã€{æ—¥æ—¶å…³ç³»}ã€‘ã€æ—¶å¹²ã€‘ã€{æ—¶å¹²åå­—}ã€‘ã€{æ—¶å¹²åç¥}ã€‘ï¼Œâˆ´ã€{æ—¶å¹²åå­—}ã€‘ã€{æ—¶å¹²åç¥}ã€‘çš„å·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å·¦ç¯å¢ƒ']}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            elif å¤©å¹² == 'æœˆå¹²':
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"ğŸ”ã€Œå·²ç°åç¥ã®å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šã€å¹´å¹²ã€‘ã€{å¹´å¹²åå­—}ã€‘ã€{å¹´å¹²åç¥}ã€‘ã€{å¹´æœˆå…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ï¼Œâˆ´ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘çš„å·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å·¦ç¯å¢ƒ']}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            elif å¤©å¹² == 'å¹´å¹²':
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"ğŸ”ã€Œå·²ç°åç¥ã®å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ã€{æ—¥å¹²æœˆå¹²å…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ï¼Œã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ã€{æœˆå¹²å¹´å¹²å…³ç³»}ã€‘ã€å¹´å¹²ã€‘ã€{å¹´å¹²åå­—}ã€‘ã€{å¹´å¹²åç¥}ã€‘ï¼Œâˆ´ã€{å¹´å¹²åå­—}ã€‘ã€{å¹´å¹²åç¥}ã€‘çš„å·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å·¦ç¯å¢ƒ']}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)


        # åœ¨å‡½æ•°æœ«å°¾æ·»åŠ â€œå·¦ç¯å¢ƒç»“è®ºâ€å­—å…¸
        å·¦ç¯å¢ƒç»“è®º = {
            'æ—¶å¹²': {
                'ä½œç”¨è·¯å¾„': f"ã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ã€{æ—¥æ—¶å…³ç³»}ã€‘ã€æ—¶å¹²ã€‘ã€{æ—¶å¹²åå­—}ã€‘ã€{æ—¶å¹²åç¥}ã€‘",
                'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['æ—¶å¹²'],
                'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å·¦ç¯å¢ƒ']},
            'æœˆå¹²': {
                'ä½œç”¨è·¯å¾„': f"ã€å¹´å¹²ã€‘ã€{å¹´å¹²åå­—}ã€‘ã€{å¹´å¹²åç¥}ã€‘ã€{å¹´æœˆå…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘",
                'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['æœˆå¹²'],
                'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å·¦ç¯å¢ƒ']},
            'å¹´å¹²': {
                'ä½œç”¨è·¯å¾„': f"ã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ã€{æ—¥å¹²æœˆå¹²å…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ï¼Œã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ã€{æœˆå¹²å¹´å¹²å…³ç³»}ã€‘ã€å¹´å¹²ã€‘ã€{å¹´å¹²åå­—}ã€‘ã€{å¹´å¹²åç¥}ã€‘",
                'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['å¹´å¹²'],
                'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å·¦ç¯å¢ƒ']}}
        return å·¦ç¯å¢ƒç»“è®º
    åˆ†æå¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶()

    #9.4 åˆ†æå¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶
    def åˆ†æå¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶():
        # åˆ†æå¹´å¹²ğŸ§¨ çš„å³ç¯å¢ƒå‰å‡¶
        å¹´å¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²'].get('å¿Œç”¨ç¥å½’å±')
        ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'å¹´å¹²')
        if å¹´å¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å³ç¯å¢ƒ'] = 'å‰'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å³ç¯å¢ƒ'] = 'å‡¶'
            else:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å³ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'
        elif å¹´å¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å³ç¯å¢ƒ'] = 'å‡¶'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å³ç¯å¢ƒ'] = 'å‰'
            else: 
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å³ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'

        # åˆ†ææœˆå¹²ğŸŒ• çš„å³ç¯å¢ƒå‰å‡¶
        æœˆå¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('å¿Œç”¨ç¥å½’å±')
        ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æœˆå¹²')
        if æœˆå¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å³ç¯å¢ƒ'] = 'å‰'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å³ç¯å¢ƒ'] = 'å‡¶'
            else:  # ä¸æ—ºä¸å¼±å…³ç³»
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å³ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'
        elif æœˆå¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
            if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å³ç¯å¢ƒ'] = 'å‡¶'
            elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»'or ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ä¸æ—ºä¸å¼±å…³ç³»':
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å³ç¯å¢ƒ'] = 'å‰'
            else:  # ä¸æ—ºä¸å¼±å…³ç³»
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å³ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'

        # åˆ†ææ—¶å¹²â° çš„å³ç¯å¢ƒå‰å‡¶
        æ—¶å¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²'].get('å¿Œç”¨ç¥å½’å±')
        if æ—¶å¹²å¿Œç”¨ç¥å½’å±:
            æœˆå¹²ç”Ÿæ‰¶æ—¥å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'å¹´å¹²') == 'ç”Ÿæ‰¶å…³ç³»'
            æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æœˆå¹²') == 'ç”Ÿæ‰¶å…³ç³»'
            æ—¥å¹²åˆ¶æ—¶å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'å¹´å¹²') in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']   #æ˜¯ä¸æ˜¯ç­‰äº'å—åˆ¶å…³ç³»'or'ä¸æ—ºä¸å¼±å…³ç³»'
            æœˆå¹²åˆ¶æ—¥å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æœˆå¹²') in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']

            if æ—¶å¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
                if æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² and æœˆå¹²ç”Ÿæ‰¶æ—¥å¹²:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å³ç¯å¢ƒ'] = 'å‰'
                elif (æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² and æœˆå¹²åˆ¶æ—¥å¹²) or (æ—¥å¹²åˆ¶æ—¶å¹² and æœˆå¹²ç”Ÿæ‰¶æ—¥å¹²):
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å³ç¯å¢ƒ'] = 'å‡¶'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å³ç¯å¢ƒ'] = 'å‰'
            elif æ—¶å¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
                if æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² and æœˆå¹²ç”Ÿæ‰¶æ—¥å¹²:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å³ç¯å¢ƒ'] = 'å‡¶'
                elif (æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² and æœˆå¹²åˆ¶æ—¥å¹²) or (æ—¥å¹²åˆ¶æ—¶å¹² and æœˆå¹²ç”Ÿæ‰¶æ—¥å¹²):
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å³ç¯å¢ƒ'] = 'å‰'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å³ç¯å¢ƒ'] = 'å‡¶'
        else:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å³ç¯å¢ƒ'] = 'å¤–ç¯å¢ƒè¢«ä½œç”¨å…³ç³»ä¸æ—ºä¸å¼±å…³ç³»ï¼Œæ—¢ä¸å‰ä¹Ÿä¸å‡¶'

        # æ‰“å°ç»“æœ
        global æ€§åˆ«å˜é‡
        ç¯å¢ƒç±»å‹å­—å…¸ = {}
        for å¤©å¹² in ['å¹´å¹²', 'æœˆå¹²', 'æ—¶å¹²']:
            åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²).get('åç¥')
            å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²).get('å¿Œç”¨ç¥å½’å±')
            å³ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²).get('å³ç¯å¢ƒ')
            æ˜¯æ­£åç¥ = åç¥ in ['æ­£å®˜', 'æ­£å°', 'æ­£è´¢', 'ä¼¤å®˜', 'åŠ«è´¢']
            if (æ€§åˆ«å˜é‡ == 'ç”·' and æ˜¯æ­£åç¥) or (æ€§åˆ«å˜é‡ == 'å¥³' and not æ˜¯æ­£åç¥):
                ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²] = "å†…å¿ƒç¯å¢ƒ"
            else:
                ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²] = "ç¤¾ä¼šç¯å¢ƒ"
            ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"{å¤©å¹²}: {åç¥} - {å¿Œç”¨ç¥å½’å±} - å³ç¯å¢ƒï¼š{å³ç¯å¢ƒ} - {ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}:{å³ç¯å¢ƒ}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            
            # æ·»åŠ æ¨å¯¼è¿‡ç¨‹çš„æ‰“å°
            æ—¶å¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åå­—']
            æ—¶å¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åç¥']
            æœˆå¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åå­—']
            æœˆå¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åç¥']
            å¹´å¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åå­—']
            å¹´å¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åç¥']

            æœˆå¹´å…³ç³» = "ç”Ÿ" if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'å¹´å¹²') == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            æ—¥æœˆå…³ç³» = "ç”Ÿ" if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æœˆå¹²') == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            æœˆå¹²æ—¥å¹²å…³ç³» = "ç”Ÿ" if æœˆå¹²ç”Ÿæ‰¶æ—¥å¹² else "åˆ¶"
            æ—¥å¹²æ—¶å¹²å…³ç³» = "ç”Ÿ" if æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² else "åˆ¶"

            if å¤©å¹² == 'å¹´å¹²':
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"ğŸ”ã€Œå·²ç°åç¥ã®å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ã€{æœˆå¹´å…³ç³»}ã€‘ã€å¹´å¹²ã€‘ã€{å¹´å¹²åå­—}ã€‘ã€{å¹´å¹²åç¥}ã€‘ï¼Œâˆ´ã€{å¹´å¹²åå­—}ã€‘ã€{å¹´å¹²åç¥}ã€‘çš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å³ç¯å¢ƒ']}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            elif å¤©å¹² == 'æœˆå¹²':
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"ğŸ”ã€Œå·²ç°åç¥ã®å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ã€{æ—¥æœˆå…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ï¼Œâˆ´ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘çš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å³ç¯å¢ƒ']}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            elif å¤©å¹² == 'æ—¶å¹²':
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"ğŸ”ã€Œå·²ç°åç¥ã®å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ã€{æœˆå¹²æ—¥å¹²å…³ç³»}ã€‘ã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ï¼Œã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ã€{æ—¥å¹²æ—¶å¹²å…³ç³»}ã€‘ã€æ—¶å¹²ã€‘ã€{æ—¶å¹²åå­—}ã€‘ã€{æ—¶å¹²åç¥}ã€‘ï¼Œâˆ´ã€{æ—¶å¹²åå­—}ã€‘ã€{æ—¶å¹²åç¥}ã€‘çš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å³ç¯å¢ƒ']}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
        # åœ¨å‡½æ•°æœ«å°¾æ·»åŠ ç»“è®ºå­—å…¸
        å³ç¯å¢ƒç»“è®º = {
            'å¹´å¹²': {
                'ä½œç”¨è·¯å¾„': f"ã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ã€{æœˆå¹´å…³ç³»}ã€‘ã€å¹´å¹²ã€‘ã€{å¹´å¹²åå­—}ã€‘ã€{å¹´å¹²åç¥}ã€‘",
                'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['å¹´å¹²'],
                'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å³ç¯å¢ƒ']},
            'æœˆå¹²': {
                'ä½œç”¨è·¯å¾„': f"ã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ã€{æ—¥æœˆå…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘",
                'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['æœˆå¹²'],
                'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å³ç¯å¢ƒ']},
            'æ—¶å¹²': {
                'ä½œç”¨è·¯å¾„': f"ã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ã€{æœˆå¹²æ—¥å¹²å…³ç³»}ã€‘ã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ï¼Œã€æ—¥å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åå­—']}ã€‘ã€{æ—¥å¹²æ—¶å¹²å…³ç³»}ã€‘ã€æ—¶å¹²ã€‘ã€{æ—¶å¹²åå­—}ã€‘ã€{æ—¶å¹²åç¥}ã€‘",
                'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['æ—¶å¹²'],
                'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å³ç¯å¢ƒ']}}
        return å³ç¯å¢ƒç»“è®º
    åˆ†æå¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶()

    #9.5 åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒå‰å‡¶
    def åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒå‰å‡¶():
        # åˆ†ææ—¶å¹²â°æœˆå¹²ğŸŒ•çš„å†…ç¯å¢ƒå·¦ç¯å¢ƒå‰å‡¶
        for å¤©å¹², åœ°æ”¯ç´¢å¼•, å·¦ä¾§åœ°æ”¯ç´¢å¼• in [('æ—¶å¹²', 3, 2), ('æœˆå¹²', 1, 0)]:     #ç¬¬ä¸€æ¬¡èµ‹å€¼:å¤©å¹² = 'æ—¶å¹²'ã€åœ°æ”¯ç´¢å¼• = 3ã€å·¦ä¾§åœ°æ”¯ç´¢å¼• = 2
            å†…ç¯å¢ƒå‰å‡¶ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒ']        # è·å–è¯¥å¤©å¹²çš„å†…ç¯å¢ƒå‰å‡¶çŠ¶æ€
            åŒæŸ±åœ°æ”¯ = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'][åœ°æ”¯ç´¢å¼•]         # è·å–åŒæŸ±çš„åœ°æ”¯å’Œå·¦ä¾§çš„åœ°æ”¯
            å·¦ä¾§åœ°æ”¯ = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'][å·¦ä¾§åœ°æ”¯ç´¢å¼•]      # åˆ¤æ–­å·¦ä¾§åœ°æ”¯å¯¹åŒæŸ±åœ°æ”¯çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³»
            ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å·¦ä¾§åœ°æ”¯, åŒæŸ±åœ°æ”¯)
            if å†…ç¯å¢ƒå‰å‡¶ == 'å‰':                             # æ ¹æ®å†…ç¯å¢ƒå‰å‡¶å’Œç”Ÿæ‰¶å—åˆ¶å…³ç³»ï¼Œç¡®å®šå·¦ç¯å¢ƒçš„å‰å‡¶
                if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‰'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‡¶'
            elif å†…ç¯å¢ƒå‰å‡¶ == 'å‡¶':
                if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‡¶'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‰'
            else:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'æ—¢ä¸å‰ä¹Ÿä¸å‡¶ï¼Œè‚¯å®šæ˜¯ä»£ç å“ªé‡Œå‡ºé”™äº†'

        # åˆ†æå¹´å¹²ğŸ§¨çš„å†…ç¯å¢ƒå·¦ç¯å¢ƒå‰å‡¶ï¼ˆç‰¹æ®Šæƒ…å†µï¼‰ ï¼ˆå¹´å¹²æ²¡æœ‰å·¦ä¾§åœ°æ”¯ï¼Œéœ€è¦é€šè¿‡æœˆæ”¯å’Œæ—¥æ”¯é—´æ¥åˆ¤æ–­ï¼‰
        å¹´å¹²å†…ç¯å¢ƒå‰å‡¶ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒ']
        æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆæ”¯', 'å¹´æ”¯')    # åˆ¤æ–­æœˆæ”¯å¯¹å¹´æ”¯çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³»
        æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥æ”¯', 'æœˆæ”¯')    # åˆ¤æ–­æ—¥æ”¯å¯¹æœˆæ”¯çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³»
        # æ ¹æ®å†…ç¯å¢ƒå‰å‡¶å’Œç”Ÿæ‰¶å—åˆ¶å…³ç³»ï¼Œç¡®å®šå¹´å¹²å·¦ç¯å¢ƒçš„å‰å‡¶
        if å¹´å¹²å†…ç¯å¢ƒå‰å‡¶ == 'å‰':
            if æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                if æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‰'
                elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‡¶'
            elif æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                if æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‡¶'
                elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‰'
        elif å¹´å¹²å†…ç¯å¢ƒå‰å‡¶ == 'å‡¶':
            if æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                if æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‡¶'
                elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‰'
            elif æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                if æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‰'
                elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‡¶'
        else:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'æ—¢ä¸å‰ä¹Ÿä¸å‡¶ï¼Œè‚¯å®šæ˜¯ä»£ç å“ªé‡Œå‡ºé”™äº†'

        # æ‰“å°ç»“æœ
        global æ€§åˆ«å˜é‡
        ç¯å¢ƒç±»å‹å­—å…¸ = {}
        for å¤©å¹² in ['æ—¶å¹²', 'æœˆå¹²', 'å¹´å¹²']:
            å†…ç¯å¢ƒå·¦ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get('å¹´å¹²').get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ')
            åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²).get('åç¥')
            æ˜¯æ­£åç¥ = åç¥ in ['æ­£å®˜', 'æ­£å°', 'æ­£è´¢', 'ä¼¤å®˜', 'åŠ«è´¢']
            if (æ€§åˆ«å˜é‡ == 'ç”·' and æ˜¯æ­£åç¥) or (æ€§åˆ«å˜é‡ == 'å¥³' and not æ˜¯æ­£åç¥):
                ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²] = "ç¤¾ä¼šç¯å¢ƒçš„å†…ç¯å¢ƒ"
            else:
                ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²] = "å†…å¿ƒç¯å¢ƒçš„å†…ç¯å¢ƒ"
            ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"{å¤©å¹²}çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ:{å†…ç¯å¢ƒå·¦ç¯å¢ƒ} - {ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}:{å†…ç¯å¢ƒå·¦ç¯å¢ƒ}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            #æ·»åŠ æ¨å¯¼è¿‡ç¨‹çš„æ‰“å°
            å¤©å¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['åå­—']
            å†…ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒ']
            
            if å¤©å¹² in ['æ—¶å¹²', 'æœˆå¹²']:
                å·¦ä¾§åœ°æ”¯ç´¢å¼• = 2 if å¤©å¹² == 'æ—¶å¹²' else 0
                å·¦ä¾§åœ°æ”¯ = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'][å·¦ä¾§åœ°æ”¯ç´¢å¼•]
                åŒæŸ±åœ°æ”¯ = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'][['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²'].index(å¤©å¹²)]
                å·¦ä¾§åœ°æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[å·¦ä¾§åœ°æ”¯ç´¢å¼•]
                åŒæŸ±åœ°æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²'].index(å¤©å¹²)]
                ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å·¦ä¾§åœ°æ”¯, åŒæŸ±åœ°æ”¯)
                ç”Ÿåˆ¶å…³ç³» = "ç”Ÿ" if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œå·²ç°åç¥ã®å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{å·¦ä¾§åœ°æ”¯}ã€‘ã€{å·¦ä¾§åœ°æ”¯åå­—}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{åŒæŸ±åœ°æ”¯}ã€‘ã€{åŒæŸ±åœ°æ”¯åå­—}ã€‘ï¼Œã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒå·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å†…ç¯å¢ƒå·¦ç¯å¢ƒ}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            elif å¤©å¹² == 'å¹´å¹²':
                æœˆæ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[1]
                æ—¥æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[2]
                å¹´æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[0]
                æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» = "ç”Ÿ" if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆæ”¯', 'å¹´æ”¯') == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» = "ç”Ÿ" if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥æ”¯', 'æœˆæ”¯') == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œå·²ç°åç¥ã®å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ã€{æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³»}ã€‘ã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ï¼Œã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ã€{æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³»}ã€‘ã€å¹´æ”¯ã€‘ã€{å¹´æ”¯åå­—}ã€‘ï¼Œâˆ´ã€å¹´å¹²ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´ã€å¹´å¹²ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒå·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å†…ç¯å¢ƒå·¦ç¯å¢ƒ}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

        # åœ¨å‡½æ•°æœ«å°¾ï¼Œæ·»åŠ ç»“è®ºå­—å…¸
        å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = {
            'æ—¶å¹²': {
                'ä½œç”¨è·¯å¾„': f"âˆµã€{å·¦ä¾§åœ°æ”¯}ã€‘ã€{å·¦ä¾§åœ°æ”¯åå­—}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{åŒæŸ±åœ°æ”¯}ã€‘ã€{åŒæŸ±åœ°æ”¯åå­—}ã€‘ï¼Œâˆ´ã€æ—¶å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['åç¥']}ã€‘çš„å†…ç¯å¢ƒã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒ']}ã€‘",
                'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['æ—¶å¹²'],
                'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ']},
            'æœˆå¹²': {
                'ä½œç”¨è·¯å¾„': f"âˆµã€{å·¦ä¾§åœ°æ”¯}ã€‘ã€{å·¦ä¾§åœ°æ”¯åå­—}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{åŒæŸ±åœ°æ”¯}ã€‘ã€{åŒæŸ±åœ°æ”¯åå­—}ã€‘ï¼Œâˆ´ã€æœˆå¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åç¥']}ã€‘çš„å†…ç¯å¢ƒã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å†…ç¯å¢ƒ']}ã€‘",
                'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['æœˆå¹²'],
                'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ']},
            'å¹´å¹²': {
                'ä½œç”¨è·¯å¾„': f"âˆµã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ã€{æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³»}ã€‘ã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ï¼Œã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ã€{æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³»}ã€‘ã€å¹´æ”¯ã€‘ã€{å¹´æ”¯åå­—}ã€‘ï¼Œâˆ´ã€å¹´å¹²ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['åç¥']}ã€‘çš„å†…ç¯å¢ƒã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒ']}ã€‘",
                'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['å¹´å¹²'],
                'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå·¦ç¯å¢ƒ']}}
        
        return å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º 
    åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒå‰å‡¶()

    #9.6 åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒå‰å‡¶
    def åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå³ç¯å¢ƒå‰å‡¶():
        # åˆ†ææœˆå¹²å’Œå¹´å¹²çš„å†…ç¯å¢ƒå³ç¯å¢ƒå‰å‡¶
        for å¤©å¹², åœ°æ”¯ç´¢å¼•, å³ä¾§åœ°æ”¯ç´¢å¼• in [('æœˆå¹²', 1, 2), ('å¹´å¹²', 0, 1)]:
            å†…ç¯å¢ƒå‰å‡¶ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒ']
            åŒæŸ±åœ°æ”¯ = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'][åœ°æ”¯ç´¢å¼•] 
            å³ä¾§åœ°æ”¯ = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'][å³ä¾§åœ°æ”¯ç´¢å¼•] 
            ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å³ä¾§åœ°æ”¯, åŒæŸ±åœ°æ”¯)
            # æ ¹æ®å†…ç¯å¢ƒå‰å‡¶å’Œç”Ÿæ‰¶å—åˆ¶å…³ç³»ï¼Œç¡®å®šå³ç¯å¢ƒçš„å‰å‡¶
            if å†…ç¯å¢ƒå‰å‡¶ == 'å‰':
                if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‰'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‡¶'
            elif å†…ç¯å¢ƒå‰å‡¶ == 'å‡¶':
                if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‡¶'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‰'
            else:
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'æ—¢ä¸å‰ä¹Ÿä¸å‡¶ï¼Œè‚¯å®šæ˜¯ä»£ç å“ªé‡Œå‡ºé”™äº†'

        # åˆ†ææ—¶å¹²çš„å†…ç¯å¢ƒå³ç¯å¢ƒå‰å‡¶ï¼ˆç‰¹æ®Šæƒ…å†µï¼‰
        æ—¶å¹²å†…ç¯å¢ƒå‰å‡¶ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒ']
        æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥æ”¯', 'æ—¶æ”¯')    # åˆ¤æ–­æ—¥æ”¯å¯¹æ—¶æ”¯çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³»
        æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆæ”¯', 'æ—¥æ”¯')    # åˆ¤æ–­æœˆæ”¯å¯¹æ—¥æ”¯çš„ç”Ÿæ‰¶å—åˆ¶å…³ç³»
        if æ—¶å¹²å†…ç¯å¢ƒå‰å‡¶ == 'å‰':                         # æ ¹æ®å†…ç¯å¢ƒå‰å‡¶å’Œç”Ÿæ‰¶å—åˆ¶å…³ç³»ï¼Œç¡®å®šæ—¶å¹²å³ç¯å¢ƒçš„å‰å‡¶
            if æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                if æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‰'
                elif æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‡¶'
            elif æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                if æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‡¶'
                elif æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‰'
        elif æ—¶å¹²å†…ç¯å¢ƒå‰å‡¶ == 'å‡¶':
            if æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                if æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‡¶'
                elif æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‰'
            elif æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                if æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‰'
                elif æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‡¶'
        else:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'æ—¢ä¸å‰ä¹Ÿä¸å‡¶ï¼Œè‚¯å®šæ˜¯ä»£ç å“ªé‡Œå‡ºé”™äº†'
        
        # æ‰“å°ç»“æœ
        global æ€§åˆ«å˜é‡
        ç¯å¢ƒç±»å‹å­—å…¸ = {}
        ä¸´æ—¶å˜é‡å­—å…¸ = {'å¹´å¹²': {}, 'æœˆå¹²': {}, 'æ—¶å¹²': {}}
        for å¤©å¹² in ['å¹´å¹²', 'æœˆå¹²', 'æ—¶å¹²']:
            å†…ç¯å¢ƒå³ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²).get('å†…ç¯å¢ƒå³ç¯å¢ƒ')
            åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²).get('åç¥')
            æ˜¯æ­£åç¥ = åç¥ in ['æ­£å®˜', 'æ­£å°', 'æ­£è´¢', 'ä¼¤å®˜', 'åŠ«è´¢']
            if (æ€§åˆ«å˜é‡ == 'ç”·' and æ˜¯æ­£åç¥) or (æ€§åˆ«å˜é‡ == 'å¥³' and not æ˜¯æ­£åç¥):
                ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²] = "å†…å¿ƒç¯å¢ƒçš„å†…ç¯å¢ƒ"
            else:
                ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²] = "ç¤¾ä¼šç¯å¢ƒçš„å†…ç¯å¢ƒ"
            ä½œç”¨é“¾è·¯è¿‡ç¨‹= f"{å¤©å¹²}çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒï¼š{å†…ç¯å¢ƒå³ç¯å¢ƒ} - {ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}:{å†…ç¯å¢ƒå³ç¯å¢ƒ}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            # æ·»åŠ æ¨å¯¼è¿‡ç¨‹çš„æ‰“å°
            å¤©å¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['åå­—']
            å†…ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å†…ç¯å¢ƒ']

            if å¤©å¹² in ['å¹´å¹²', 'æœˆå¹²']:
                å³ä¾§åœ°æ”¯ç´¢å¼• = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²'].index(å¤©å¹²) + 1
                å³ä¾§åœ°æ”¯ = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'][å³ä¾§åœ°æ”¯ç´¢å¼•]
                åŒæŸ±åœ°æ”¯ = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'][['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²'].index(å¤©å¹²)]
                å³ä¾§åœ°æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[å³ä¾§åœ°æ”¯ç´¢å¼•]
                åŒæŸ±åœ°æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²'].index(å¤©å¹²)]
                ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å³ä¾§åœ°æ”¯, åŒæŸ±åœ°æ”¯)
                ç”Ÿåˆ¶å…³ç³» = "ç”Ÿ" if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                ä¸´æ—¶å˜é‡å­—å…¸[å¤©å¹²].update({'å³ä¾§åœ°æ”¯': å³ä¾§åœ°æ”¯,'å³ä¾§åœ°æ”¯åå­—': å³ä¾§åœ°æ”¯åå­—,'ç”Ÿåˆ¶å…³ç³»': ç”Ÿåˆ¶å…³ç³»,'åŒæŸ±åœ°æ”¯': åŒæŸ±åœ°æ”¯,'åŒæŸ±åœ°æ”¯åå­—': åŒæŸ±åœ°æ”¯åå­—,'å¤©å¹²åå­—': å¤©å¹²åå­—,'åç¥': åç¥,'å†…ç¯å¢ƒ': å†…ç¯å¢ƒ})
                ä½œç”¨é“¾è·¯è¿‡ç¨‹= f"ğŸ”ã€Œå·²ç°åç¥ã®å†…ç¯å¢ƒçš„å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{å³ä¾§åœ°æ”¯}ã€‘ã€{å³ä¾§åœ°æ”¯åå­—}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{åŒæŸ±åœ°æ”¯}ã€‘ã€{åŒæŸ±åœ°æ”¯åå­—}ã€‘ï¼Œã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒå³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å†…ç¯å¢ƒå³ç¯å¢ƒ}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            elif å¤©å¹² == 'æ—¶å¹²':
                æ—¥æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[2]
                æœˆæ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[1]
                æ—¶æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[3]
                æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» = "ç”Ÿ" if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥æ”¯', 'æ—¶æ”¯') == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» = "ç”Ÿ" if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆæ”¯', 'æ—¥æ”¯') == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                ä½œç”¨é“¾è·¯è¿‡ç¨‹= f"ğŸ”ã€Œå·²ç°åç¥ã®å†…ç¯å¢ƒçš„å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ã€{æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³»}ã€‘ã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ï¼Œã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ã€{æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³»}ã€‘ã€æ—¶æ”¯ã€‘ã€{æ—¶æ”¯åå­—}ã€‘ï¼Œã€æ—¶å¹²ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´ã€æ—¶å¹²ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒå³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹å­—å…¸[å¤©å¹²]}ï¼‰ã€{å†…ç¯å¢ƒå³ç¯å¢ƒ}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
        
        å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = {
        'å¹´å¹²': {
            'ä½œç”¨è·¯å¾„': f"âˆµã€{ä¸´æ—¶å˜é‡å­—å…¸['å¹´å¹²']['å³ä¾§åœ°æ”¯']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['å¹´å¹²']['å³ä¾§åœ°æ”¯åå­—']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['å¹´å¹²']['ç”Ÿåˆ¶å…³ç³»']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['å¹´å¹²']['åŒæŸ±åœ°æ”¯']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['å¹´å¹²']['åŒæŸ±åœ°æ”¯åå­—']}ã€‘ï¼Œã€å¹´å¹²ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['å¹´å¹²']['å¤©å¹²åå­—']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['å¹´å¹²']['åç¥']}ã€‘çš„å†…ç¯å¢ƒã€{ä¸´æ—¶å˜é‡å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒ']}ã€‘",
            'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['å¹´å¹²'],
            'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['å¹´å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ']},
        'æœˆå¹²': {
            'ä½œç”¨è·¯å¾„': f"âˆµã€{ä¸´æ—¶å˜é‡å­—å…¸['æœˆå¹²']['å³ä¾§åœ°æ”¯']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['æœˆå¹²']['å³ä¾§åœ°æ”¯åå­—']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['æœˆå¹²']['ç”Ÿåˆ¶å…³ç³»']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['æœˆå¹²']['åŒæŸ±åœ°æ”¯']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['æœˆå¹²']['åŒæŸ±åœ°æ”¯åå­—']}ã€‘ï¼Œã€æœˆå¹²ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['æœˆå¹²']['å¤©å¹²åå­—']}ã€‘ã€{ä¸´æ—¶å˜é‡å­—å…¸['æœˆå¹²']['åç¥']}ã€‘çš„å†…ç¯å¢ƒã€{ä¸´æ—¶å˜é‡å­—å…¸['æœˆå¹²']['å†…ç¯å¢ƒ']}ã€‘",
            'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['æœˆå¹²'],
            'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ']},
        'æ—¶å¹²': {
            'ä½œç”¨è·¯å¾„': f"âˆµã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ã€{æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³»}ã€‘ã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ï¼Œã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ã€{æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³»}ã€‘ã€æ—¶æ”¯ã€‘ã€{æ—¶æ”¯åå­—}ã€‘ï¼Œã€æ—¶å¹²ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘",
            'ç¯å¢ƒç±»å‹': ç¯å¢ƒç±»å‹å­—å…¸['æ—¶å¹²'],
            'ç¯å¢ƒç»“æœ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²']['å†…ç¯å¢ƒå³ç¯å¢ƒ']}}
        return å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º
    åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå³ç¯å¢ƒå‰å‡¶()

    #ç‰¹åˆ«ç‰ˆï¼šåˆ†æå¤©å¹²åç¥çš„å›½å¤–ç¯å¢ƒå‰å‡¶
    def åˆ†æå¤©å¹²åç¥çš„å›½å¤–ç¯å¢ƒå‰å‡¶():
        def åè½¬ä½œç”¨ç»“æœ(ä½œç”¨ç»“æœ):
            if ä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶å…³ç³»':
                return 'å—åˆ¶å…³ç³»'
            elif ä½œç”¨ç»“æœ == 'å—åˆ¶å…³ç³»':
                return 'ç”Ÿæ‰¶å…³ç³»'
            return ä½œç”¨ç»“æœ
        
        å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
        for å¤©å¹² in ['å¹´å¹²', 'æœˆå¹²', 'æ—¶å¹²']:
            # æ ¹æ®æ€§åˆ«ç¡®å®šæ–¹å‘
            if æ€§åˆ« == 'ç”·':
                ç¯å¢ƒæ–¹å‘ = -1  # ç”·å‘½å·¦ä¾§ä¸ºç¤¾ä¼šç¯å¢ƒ
                å›½å¤–ç¯å¢ƒæ–¹å‘ = -2  # ç”·å‘½å·¦ä¾§çš„å·¦ä¾§ä¸ºå›½å¤–ç¯å¢ƒ
            else:
                ç¯å¢ƒæ–¹å‘ = 1   # å¥³å‘½å³ä¾§ä¸ºç¤¾ä¼šç¯å¢ƒ
                å›½å¤–ç¯å¢ƒæ–¹å‘ = 2   # å¥³å‘½å³ä¾§çš„å³ä¾§ä¸ºå›½å¤–ç¯å¢ƒ

            å½“å‰ç´¢å¼• = å¤©å¹²é¡ºåº.index(å¤©å¹²)
            å›½å¤–ç¯å¢ƒç´¢å¼• = å½“å‰ç´¢å¼• + å›½å¤–ç¯å¢ƒæ–¹å‘

            # å¤„ç†ç‰¹æ®Šæƒ…å†µ
            if å›½å¤–ç¯å¢ƒç´¢å¼• < 0 or å›½å¤–ç¯å¢ƒç´¢å¼• >= len(å¤©å¹²é¡ºåº):

                # ç”·å‘½ç‰¹æ®Šæƒ…å†µå¤„ç†
                if æ€§åˆ« == 'ç”·':
                    if å¤©å¹² == 'å¹´å¹²':
                        # ç”·å‘½å¹´å¹²çš„å›½å¤–ç¯å¢ƒï¼šæ—¥å¹²ä½œç”¨æœˆå¹²ï¼Œå†ä½œç”¨äºå¹´å¹²
                        æœˆå¹²æ—ºå¼± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['æ—ºå¼±çŠ¶æ€']
                        æ—¥å¹²ä½œç”¨æœˆå¹²ç»“æœ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æœˆå¹²')
                        if æœˆå¹²æ—ºå¼± == 'å¼±':
                            æ—¥å¹²ä½œç”¨æœˆå¹²ç»“æœ = åè½¬ä½œç”¨ç»“æœ(æ—¥å¹²ä½œç”¨æœˆå¹²ç»“æœ)
                        æœˆå¹²ä½œç”¨å¹´å¹²ç»“æœ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'å¹´å¹²')
                        if æ—¥å¹²ä½œç”¨æœˆå¹²ç»“æœ == 'ç”Ÿæ‰¶':
                            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‰'
                        else:
                            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‡¶'
                        continue
                    elif å¤©å¹² == 'æœˆå¹²':
                        # ç”·å‘½æœˆå¹²çš„å›½å¤–ç¯å¢ƒï¼šæ—¥å¹²ä½œç”¨æœˆå¹²ï¼Œå†ä½œç”¨äºå¹´å¹²
                        # ä¸å¹´å¹²çš„å›½å¤–ç¯å¢ƒç›¸åŒ
                        æœˆå¹²æ—ºå¼± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['æ—ºå¼±çŠ¶æ€']
                        æ—¥å¹²ä½œç”¨æœˆå¹²ç»“æœ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æœˆå¹²')
                        if æœˆå¹²æ—ºå¼± == 'å¼±':
                            æ—¥å¹²ä½œç”¨æœˆå¹²ç»“æœ = åè½¬ä½œç”¨ç»“æœ(æ—¥å¹²ä½œç”¨æœˆå¹²ç»“æœ)
                        æœˆå¹²ä½œç”¨å¹´å¹²ç»“æœ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'å¹´å¹²')
                        if æ—¥å¹²ä½œç”¨æœˆå¹²ç»“æœ == 'ç”Ÿæ‰¶':
                            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‰'
                        else:
                            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‡¶'
                        continue

                # å¥³å‘½ç‰¹æ®Šæƒ…å†µå¤„ç†
                else:
                    if å¤©å¹² == 'æ—¶å¹²':
                        # å¥³å‘½æ—¶å¹²çš„å›½å¤–ç¯å¢ƒï¼šæœˆå¹²ä½œç”¨æ—¥å¹²ï¼Œå†ä½œç”¨äºæ—¶å¹²
                        æ—¥å¹²æ—ºå¼± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['æ—ºå¼±çŠ¶æ€']
                        æœˆå¹²ä½œç”¨æ—¥å¹²ç»“æœ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'æ—¥å¹²')
                        if æ—¥å¹²æ—ºå¼± == 'å¼±':
                            æœˆå¹²ä½œç”¨æ—¥å¹²ç»“æœ = åè½¬ä½œç”¨ç»“æœ(æœˆå¹²ä½œç”¨æ—¥å¹²ç»“æœ)
                        æ—¥å¹²ä½œç”¨æ—¶å¹²ç»“æœ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æ—¶å¹²')
                        if æœˆå¹²ä½œç”¨æ—¥å¹²ç»“æœ == 'ç”Ÿæ‰¶':
                            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‰'
                        else:
                            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‡¶'
                        continue
                    elif å¤©å¹² == 'æ—¥å¹²':
                        # å¥³å‘½æ—¥å¹²çš„å›½å¤–ç¯å¢ƒï¼šæœˆå¹²ä½œç”¨æ—¥å¹²ï¼Œå†ä½œç”¨äºæ—¶å¹²
                        # ä¸æ—¶å¹²çš„å›½å¤–ç¯å¢ƒç›¸åŒ
                        æ—¥å¹²æ—ºå¼± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['æ—ºå¼±çŠ¶æ€']
                        æœˆå¹²ä½œç”¨æ—¥å¹²ç»“æœ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'æ—¥å¹²')
                        if æ—¥å¹²æ—ºå¼± == 'å¼±':
                            æœˆå¹²ä½œç”¨æ—¥å¹²ç»“æœ = åè½¬ä½œç”¨ç»“æœ(æœˆå¹²ä½œç”¨æ—¥å¹²ç»“æœ)
                        æ—¥å¹²ä½œç”¨æ—¶å¹²ç»“æœ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥å¹²', 'æ—¶å¹²')
                        if æœˆå¹²ä½œç”¨æ—¥å¹²ç»“æœ == 'ç”Ÿæ‰¶':
                            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‰'
                        else:
                            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‡¶'
            else:
                # æ­£å¸¸æƒ…å†µå¤„ç†
                å›½å¤–ç¯å¢ƒå¤©å¹² = å¤©å¹²é¡ºåº[å›½å¤–ç¯å¢ƒç´¢å¼•]
                ä½œç”¨æ–¹ = å›½å¤–ç¯å¢ƒå¤©å¹²
                è¢«ä½œç”¨æ–¹ = å¤©å¹²
                è¢«ä½œç”¨æ–¹æ—ºå¼± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹]['æ—ºå¼±çŠ¶æ€']
                ä½œç”¨ç»“æœ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(ä½œç”¨æ–¹, è¢«ä½œç”¨æ–¹)
                if è¢«ä½œç”¨æ–¹æ—ºå¼± == 'å¼±':
                    ä½œç”¨ç»“æœ = åè½¬ä½œç”¨ç»“æœ(ä½œç”¨ç»“æœ)
                if ä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‰'
                else:
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['å›½å¤–ç¯å¢ƒ'] = 'å‡¶'
    åˆ†æå¤©å¹²åç¥çš„å›½å¤–ç¯å¢ƒå‰å‡¶()



    #9.7 åˆ†ææœªç°å¤©å¹²åç¥çš„çš„å¤–ç¯å¢ƒå‰å‡¶
    def åˆ†ææœªç°å¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶():
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            åå­— = å±æ€§å­å­—å…¸.get('åå­—', '')
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥', '')
            å¿Œç”¨ç¥å½’å± = å±æ€§å­å­—å…¸.get('å¿Œç”¨ç¥å½’å±', '')
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—', '')
            æ˜¯å¦æœ‰é•œåƒ = å±æ€§å­å­—å…¸.get('æ˜¯å¦æœ‰é•œåƒ', '')
            
            if not çª—å£åå­—:    #ç¼ºå°‘çª—å£åç¥æ—¶çš„å¤„ç†é€»è¾‘
                print(f"æœªç°åç¥ï¼š{å¤©å¹²å}ï¼Œç¼ºå°‘çª—å£åç¥ä¿¡æ¯ï¼Œæ— æ³•åˆ¤æ–­å¤–ç¯å¢ƒ")
                å±æ€§å­å­—å…¸['å¤–ç¯å¢ƒ'] = 'æœªçŸ¥'
                continue  # è·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼Œå¤„ç†ä¸‹ä¸€ä¸ªæœªç°åç¥

            ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(çª—å£åå­—, åå­—)
            
            # æ ¹æ®å¿Œç”¨ç¥å½’å±å’Œç”Ÿæ‰¶å—åˆ¶å…³ç³»ï¼Œåˆæ­¥ç¡®å®šå¤–ç¯å¢ƒç»“è®º
            if å¿Œç”¨ç¥å½’å± == 'å¿Œç¥':
                if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»':
                    å¤–ç¯å¢ƒç»“è®º = 'å‰'
                elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å¤–ç¯å¢ƒç»“è®º = 'å‡¶'
                else:
                    å¤–ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
            elif å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥':
                if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»':
                    å¤–ç¯å¢ƒç»“è®º = 'å‡¶'
                elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                    å¤–ç¯å¢ƒç»“è®º = 'å‰'
                else:
                    å¤–ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
            else:
                å¤–ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
            
            # æ£€æŸ¥æ˜¯å¦æœ‰é•œåƒï¼Œå¦‚æœæœ‰ï¼Œåˆ™åè½¬å¤–ç¯å¢ƒç»“è®º
            if æ˜¯å¦æœ‰é•œåƒ == 'æœ‰é•œåƒ':
                if å¤–ç¯å¢ƒç»“è®º == 'å‰':
                    å¤–ç¯å¢ƒç»“è®º = 'å‡¶'
                elif å¤–ç¯å¢ƒç»“è®º == 'å‡¶':
                    å¤–ç¯å¢ƒç»“è®º = 'å‰'
            
            # å°†æœ€ç»ˆçš„å¤–ç¯å¢ƒç»“è®ºå­˜å…¥å±æ€§å­å­—å…¸
            å±æ€§å­å­—å…¸['å¤–ç¯å¢ƒ'] = å¤–ç¯å¢ƒç»“è®º
            æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²å]['å¤–ç¯å¢ƒ'] = å¤–ç¯å¢ƒç»“è®º

            ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"æœªç°åç¥ï¼š{åç¥} - {åå­—} - å¤–ç¯å¢ƒç»“è®ºï¼š{å¤–ç¯å¢ƒç»“è®º}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            #æ–°å¢æ‰“å°æ¨å¯¼è¿‡ç¨‹
            çª—å£ä½ç½® = next(ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯['åå­—'] == å±æ€§å­å­—å…¸['çª—å£åå­—'])
            ç”Ÿåˆ¶å…³ç³» = "ç”Ÿ" if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"ğŸ”ã€Œæœªç°åç¥ã®å¤–ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{çª—å£ä½ç½®}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®]['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®]['åç¥']}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘æœªç°åç¥çš„ã€{åå­—}ã€‘ã€{åç¥}ã€‘ï¼Œâˆ´æœªç°å¤©å¹²åç¥ã€{åå­—}ã€‘ã€{åç¥}ã€‘çš„å¤–ç¯å¢ƒã€{å¤–ç¯å¢ƒç»“è®º}ã€‘"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

        å¤–ç¯å¢ƒç»“è®º = {}
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == å±æ€§å­å­—å…¸['çª—å£åå­—']), None)
            if çª—å£ä½ç½®:
                å¤–ç¯å¢ƒç»“è®º[å¤©å¹²å] = {
                    'å¤–ç¯å¢ƒ': å±æ€§å­å­—å…¸['å¤–ç¯å¢ƒ'],  # ä½¿ç”¨æœªç°æ­£ååç¥ä¸»å­—å…¸ä¸­çš„å¤–ç¯å¢ƒ
                    'ä½œç”¨è·¯å¾„': f"ğŸ”ã€Œæœªç°åç¥ã®å¤–ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{çª—å£ä½ç½®}ã€‘çš„ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®]['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®]['åç¥']}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘æœªç°åç¥çš„ã€{å±æ€§å­å­—å…¸['åå­—']}ã€‘ã€{å±æ€§å­å­—å…¸['åç¥']}ã€‘ï¼Œâˆ´æœªç°å¤©å¹²åç¥ã€{å±æ€§å­å­—å…¸['åå­—']}ã€‘ã€{å±æ€§å­å­—å…¸['åç¥']}ã€‘çš„å¤–ç¯å¢ƒã€{å±æ€§å­å­—å…¸['å¤–ç¯å¢ƒ']}ã€‘"
                }
        return å¤–ç¯å¢ƒç»“è®º
    åˆ†ææœªç°å¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶()

    #9.8 åˆ†ææœªç°å¤©å¹²åç¥çš„çš„å†…ç¯å¢ƒå‰å‡¶
    def åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶():
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            åå­— = å±æ€§å­å­—å…¸.get('åå­—', '')
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥', '')
            å¤–ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å¤–ç¯å¢ƒ', '')
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—', '')
            æ˜¯å¦æœ‰é•œåƒ = å±æ€§å­å­—å…¸.get('æ˜¯å¦æœ‰é•œåƒ', '')

            if not çª—å£åå­—:     # å¦‚æœç¼ºå°‘çª—å£åç¥çš„ä¿¡æ¯ï¼Œæ— æ³•åˆ¤æ–­å†…ç¯å¢ƒ
                å±æ€§å­å­—å…¸['å†…ç¯å¢ƒ'] = 'æœªçŸ¥'
                continue

            # è·å–çª—å£åç¥çš„â€œæ˜¯å¦æœ‰æ ¹â€ä¿¡æ¯ã€‚  çª—å£åç¥æ˜¯å·²ç°åç¥ï¼Œå¯ä»¥ä»å…«å­—ä¿¡æ¯ä¸»å­—å…¸ä¸­è·å–
            çª—å£æ˜¯å¦æœ‰æ ¹ = ''
            for é”®, å€¼ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items():
                if å€¼.get('åå­—') == çª—å£åå­—:
                    çª—å£æ˜¯å¦æœ‰æ ¹ = å€¼.get('æ˜¯å¦æœ‰æ ¹', '')
                    break
            else:     # å¦‚æœåœ¨å…«å­—ä¿¡æ¯ä¸»å­—å…¸ä¸­æ‰¾ä¸åˆ°çª—å£åç¥çš„ä¿¡æ¯ï¼Œæ— æ³•åˆ¤æ–­å†…ç¯å¢ƒ
                å±æ€§å­å­—å…¸['å†…ç¯å¢ƒ'] = 'æœåœ¨å…«å­—ä¿¡æ¯ä¸»å­—å…¸ä¸­æ‰¾ä¸åˆ°å…¶çª—å£åç¥çš„ä¿¡æ¯'
                continue

            # æ ¹æ®å¤–ç¯å¢ƒå’Œçª—å£åç¥çš„æœ‰æ ¹æƒ…å†µï¼Œç¡®å®šå†…ç¯å¢ƒç»“è®º
            if å¤–ç¯å¢ƒ == 'å‰':
                if çª—å£æ˜¯å¦æœ‰æ ¹ == 'æœ‰æ ¹':
                    å†…ç¯å¢ƒç»“è®º = 'å‰'
                else:
                    å†…ç¯å¢ƒç»“è®º = 'å‡¶'
            elif å¤–ç¯å¢ƒ == 'å‡¶':
                if çª—å£æ˜¯å¦æœ‰æ ¹ == 'æœ‰æ ¹':
                    å†…ç¯å¢ƒç»“è®º = 'å‡¶'
                else:
                    å†…ç¯å¢ƒç»“è®º = 'å‰'
            else:
                å†…ç¯å¢ƒç»“è®º = 'æœªçŸ¥'

            # æ£€æŸ¥æ˜¯å¦æœ‰é•œåƒï¼Œå¦‚æœæœ‰ï¼Œåˆ™åè½¬å†…ç¯å¢ƒç»“è®º
            if æ˜¯å¦æœ‰é•œåƒ == 'æœ‰é•œåƒ':
                if å†…ç¯å¢ƒç»“è®º == 'å‰':
                    å†…ç¯å¢ƒç»“è®º = 'å‡¶'
                elif å†…ç¯å¢ƒç»“è®º == 'å‡¶':
                    å†…ç¯å¢ƒç»“è®º = 'å‰'

            # å°†æœ€ç»ˆçš„å†…ç¯å¢ƒç»“è®ºå­˜å…¥å±æ€§å­å­—å…¸
            å±æ€§å­å­—å…¸['å†…ç¯å¢ƒ'] = å†…ç¯å¢ƒç»“è®º
            æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²å]['å†…ç¯å¢ƒ'] = å†…ç¯å¢ƒç»“è®º

            ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"æœªç°åç¥ï¼š{åç¥} - {åå­—} - å†…ç¯å¢ƒç»“è®ºï¼š{å†…ç¯å¢ƒç»“è®º}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            
            #æ¨å¯¼è¿‡ç¨‹printä»£ç 
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), "æœªçŸ¥ä½ç½®")
            çª—å£åç¥ = next((ä¿¡æ¯.get('åç¥', '') for ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.values() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), "")
            çª—å£æ˜¯å¦æœ‰æ ¹ = next((ä¿¡æ¯.get('æ˜¯å¦æœ‰æ ¹', 'æ— æ ¹') for ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.values() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), "æ— æ ¹")
            
            ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šå› ä¸ºã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åç¥}ã€‘ã€{çª—å£åå­—}ã€‘ã€{çª—å£æ˜¯å¦æœ‰æ ¹}ã€‘ï¼Œâˆ´æœªç°å¤©å¹²åç¥ã€{åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒç»“è®º}ã€‘ã€‚"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
        å†…ç¯å¢ƒç»“è®º = {}
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—')
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == å±æ€§å­å­—å…¸['çª—å£åå­—']), None)
            if çª—å£ä½ç½®:
                çª—å£åç¥ = next((ä¿¡æ¯.get('åç¥', '') for ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.values() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), "")
                çª—å£æ˜¯å¦æœ‰æ ¹ = next((ä¿¡æ¯.get('æ˜¯å¦æœ‰æ ¹', 'æ— æ ¹') for ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.values() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), "æ— æ ¹")
                å†…ç¯å¢ƒç»“è®º[å¤©å¹²å] = {
                'å†…ç¯å¢ƒ': å±æ€§å­å­—å…¸['å†…ç¯å¢ƒ'],
                'ä½œç”¨è·¯å¾„': f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åç¥}ã€‘ã€{çª—å£åå­—}ã€‘ã€{çª—å£æ˜¯å¦æœ‰æ ¹}ã€‘ï¼Œâˆ´æœªç°å¤©å¹²åç¥ã€{å±æ€§å­å­—å…¸['åå­—']}ã€‘ã€{å±æ€§å­å­—å…¸['åç¥']}ã€‘çš„å†…ç¯å¢ƒã€{å±æ€§å­å­—å…¸['å†…ç¯å¢ƒ']}ã€‘ã€‚"
            }
        return å†…ç¯å¢ƒç»“è®º
    åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶()

    #9.9 åˆ†ææœªç°å¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶
    def åˆ†ææœªç°å¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶():
        å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
        
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥', '')
            å¤–ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å¤–ç¯å¢ƒ', '')
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—', '')
            æ˜¯å¦æœ‰é•œåƒ = å±æ€§å­å­—å…¸.get('æ˜¯å¦æœ‰é•œåƒ', '')

            if not çª—å£åå­—:
                å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'] = 'æœªçŸ¥'
                continue  # ç¼ºå°‘çª—å£åå­—ä¿¡æ¯ï¼Œæ— æ³•åˆ¤æ–­

            # æ‰¾å‡ºçª—å£åå­—å¯¹åº”çš„å¹²æ”¯ä½ç½®
            çª—å£ä½ç½® = None
            for ä½ç½®, å¹²å in zip(å¤©å¹²é¡ºåº, æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨):
                if å¹²å == çª—å£åå­—:
                    çª—å£ä½ç½® = ä½ç½®
                    break

            if çª—å£ä½ç½®:
                çª—å£ç´¢å¼• = å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®)
                if çª—å£ç´¢å¼• > 0:
                    å·¦ä¾§ä½ç½® = å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• - 1]
                    å·¦ä¾§åå­— = æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[çª—å£ç´¢å¼• - 1]
                else:
                    å·¦ä¾§åå­— = None  # çª—å£åå­—å·²æ˜¯æœ€å·¦è¾¹ï¼Œæ— å·¦ä¾§

                if å·¦ä¾§åå­—:
                    ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å·¦ä¾§åå­—, çª—å£åå­—)
                    
                    if å¤–ç¯å¢ƒ == 'å‰':
                        if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å·¦ç¯å¢ƒç»“è®º = 'å‰'
                        elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                        else:
                            å·¦ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
                    elif å¤–ç¯å¢ƒ == 'å‡¶':
                        if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å·¦ç¯å¢ƒç»“è®º = 'å‰'
                        else:
                            å·¦ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
                    else:
                        å·¦ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
                else:
                    å·¦ç¯å¢ƒç»“è®º = 'æœªçŸ¥'  # æ— å·¦ä¾§åå­—ï¼Œæ— æ³•åˆ¤æ–­
            else:
                å·¦ç¯å¢ƒç»“è®º = 'æœªçŸ¥'  # çª—å£åå­—ä¸åœ¨å¤©å¹²é¡ºåºä¸­ï¼Œå¯èƒ½æ˜¯ç‰¹æ®Šæƒ…å†µ

            # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åç¥åœ¨å¹´å¹²
            if çª—å£ä½ç½® == 'å¹´å¹²':
                æ—¥å¹²ç”Ÿæ‰¶æœˆå¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2], æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1]) == 'ç”Ÿæ‰¶å…³ç³»'
                æœˆå¹²ç”Ÿæ‰¶å¹´å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1], æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[0]) == 'ç”Ÿæ‰¶å…³ç³»'
                æ—¥å¹²å—åˆ¶æœˆå¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2], æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1]) in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']
                æœˆå¹²å—åˆ¶å¹´å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1], æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[0]) in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']

                ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(çª—å£åå­—, å¤©å¹²å)

                if å¤–ç¯å¢ƒ == 'å‰':
                    if æœˆå¹²ç”Ÿæ‰¶å¹´å¹² and æ—¥å¹²ç”Ÿæ‰¶æœˆå¹²:
                        å·¦ç¯å¢ƒç»“è®º = 'å‰'
                    elif æœˆå¹²ç”Ÿæ‰¶å¹´å¹² and æ—¥å¹²å—åˆ¶æœˆå¹²:
                        å·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif æœˆå¹²å—åˆ¶å¹´å¹² and æ—¥å¹²ç”Ÿæ‰¶æœˆå¹²:
                        å·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif æœˆå¹²å—åˆ¶å¹´å¹² and æ—¥å¹²å—åˆ¶æœˆå¹²:
                        å·¦ç¯å¢ƒç»“è®º = 'å‰'
                    else:
                        å·¦ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
                elif å¤–ç¯å¢ƒ == 'å‡¶':
                    if æœˆå¹²ç”Ÿæ‰¶å¹´å¹² and æ—¥å¹²ç”Ÿæ‰¶æœˆå¹²:
                        å·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif æœˆå¹²ç”Ÿæ‰¶å¹´å¹² and æ—¥å¹²å—åˆ¶æœˆå¹²:
                        å·¦ç¯å¢ƒç»“è®º = 'å‰'
                    elif æœˆå¹²å—åˆ¶å¹´å¹² and æ—¥å¹²ç”Ÿæ‰¶æœˆå¹²:
                        å·¦ç¯å¢ƒç»“è®º = 'å‰'
                    elif æœˆå¹²å—åˆ¶å¹´å¹² and æ—¥å¹²å—åˆ¶æœˆå¹²:
                        å·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                    else:
                        å·¦ç¯å¢ƒç»“è®º = 'æœªçŸ¥'

            # æ£€æŸ¥æ˜¯å¦æœ‰é•œåƒï¼Œéœ€è¦åè½¬ç»“è®º
            if æ˜¯å¦æœ‰é•œåƒ == 'æœ‰é•œåƒ':
                if å·¦ç¯å¢ƒç»“è®º == 'å‰':
                    å·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                elif å·¦ç¯å¢ƒç»“è®º == 'å‡¶':
                    å·¦ç¯å¢ƒç»“è®º = 'å‰'

            # åˆ¤æ–­å·¦ç¯å¢ƒä»£è¡¨çš„å«ä¹‰
            æ˜¯æ­£åç¥ = åç¥ in ['æ­£å®˜', 'æ­£å°', 'æ­£è´¢', 'ä¼¤å®˜', 'åŠ«è´¢']
            if (æ€§åˆ« == 'ç”·' and æ˜¯æ­£åç¥) or (æ€§åˆ« == 'å¥³' and not æ˜¯æ­£åç¥):
                ç¯å¢ƒç±»å‹ = "ç¤¾ä¼šç¯å¢ƒ"
            else:
                ç¯å¢ƒç±»å‹ = "å†…å¿ƒç¯å¢ƒ"

            # å°†å·¦ç¯å¢ƒç»“è®ºè®°å½•åˆ°å±æ€§å­å­—å…¸
            å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'] = å·¦ç¯å¢ƒç»“è®º
            å±æ€§å­å­—å…¸['ç¯å¢ƒç±»å‹'] = ç¯å¢ƒç±»å‹

            ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"æœªç°åç¥ï¼š{åç¥} - {å¤©å¹²å} - å·¦ç¯å¢ƒï¼š{å·¦ç¯å¢ƒç»“è®º} - {ç¯å¢ƒç±»å‹}:{å·¦ç¯å¢ƒç»“è®º}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            # æ·»åŠ æ¨å¯¼è¿‡ç¨‹çš„æ‰“å°
            å·¦ä¾§ä½ç½® = å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• - 1] if çª—å£ç´¢å¼• > 0 else "æ— "
            å·¦ä¾§åå­— = æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[çª—å£ç´¢å¼• - 1] if çª—å£ç´¢å¼• > 0 else "æ— "
            å·¦ä¾§åç¥ = next((ä¿¡æ¯.get('åç¥', '') for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == å·¦ä¾§åå­—), "")
            çª—å£åç¥ = next((ä¿¡æ¯.get('åç¥', '') for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), "")

            if çª—å£ä½ç½® == 'å¹´å¹²':
                æ—¥å¹²æœˆå¹²å…³ç³» = "ç”Ÿ" if æ—¥å¹²ç”Ÿæ‰¶æœˆå¹² else "åˆ¶"
                æœˆå¹²å¹´å¹²å…³ç³» = "ç”Ÿ" if æœˆå¹²ç”Ÿæ‰¶å¹´å¹² else "åˆ¶"
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ã€Œæœªç°åç¥ã®å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æ—¥å¹²ã€‘ã€{æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åç¥']}ã€‘ã€{æ—¥å¹²æœˆå¹²å…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åç¥']}ã€‘ï¼Œã€æœˆå¹²ã€‘ã€{æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åç¥']}ã€‘ã€{æœˆå¹²å¹´å¹²å…³ç³»}ã€‘ã€å¹´å¹²ã€‘ã€{çª—å£åå­—}ã€‘ã€{çª—å£åç¥}ã€‘ã€{ç”Ÿæ‰¶å—åˆ¶å…³ç³»}ã€‘æœªç°å¤©å¹²åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘âˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å·¦ç¯å¢ƒç»“è®º}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            else:
                ç”Ÿåˆ¶å…³ç³» = "ç”Ÿ" if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ã€Œæœªç°åç¥ã®å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{å·¦ä¾§ä½ç½®}ã€‘ã€{å·¦ä¾§åå­—}ã€‘ã€{å·¦ä¾§åç¥}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åç¥}ã€‘ã€{çª—å£åå­—}ã€‘ï¼Œã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åç¥}ã€‘ã€{çª—å£åå­—}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘æœªç°å¤©å¹²åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘âˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å·¦ç¯å¢ƒç»“è®º}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
        
        å·¦ç¯å¢ƒç»“è®º = {}
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—')
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥')
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), None)
            
            if çª—å£ä½ç½® == 'å¹´å¹²':
                # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åç¥åœ¨å¹´å¹²
                æ—¥å¹²æœˆå¹²å…³ç³» = "ç”Ÿ" if æ—¥å¹²ç”Ÿæ‰¶æœˆå¹² else "åˆ¶"
                æœˆå¹²å¹´å¹²å…³ç³» = "ç”Ÿ" if æœˆå¹²ç”Ÿæ‰¶å¹´å¹² else "åˆ¶"
                å·¦ç¯å¢ƒç»“è®º[å¤©å¹²å] = {
                    'å·¦ç¯å¢ƒ': å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'],
                    'ä½œç”¨è·¯å¾„': f"ã€Œæœªç°åç¥ã®å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æ—¥å¹²ã€‘ã€{æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åç¥']}ã€‘ã€{æ—¥å¹²æœˆå¹²å…³ç³»}ã€‘ã€æœˆå¹²ã€‘ã€{æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åç¥']}ã€‘ï¼Œã€æœˆå¹²ã€‘ã€{æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åç¥']}ã€‘ã€{æœˆå¹²å¹´å¹²å…³ç³»}ã€‘ã€å¹´å¹²ã€‘ã€{çª—å£åå­—}ã€‘ã€{çª—å£åç¥}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å·¦ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ']}ã€‘"
                }
            else:
                # æ™®é€šæƒ…å†µ
                å·¦ä¾§ä½ç½® = å¤©å¹²é¡ºåº[å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®) - 1] if å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®) > 0 else None
                if å·¦ä¾§ä½ç½®:
                    å·¦ä¾§åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å·¦ä¾§ä½ç½®]['åå­—']
                    å·¦ä¾§åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å·¦ä¾§ä½ç½®]['åç¥']
                    ç”Ÿåˆ¶å…³ç³» = "ç”Ÿ" if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                    å·¦ç¯å¢ƒç»“è®º[å¤©å¹²å] = {
                        'å·¦ç¯å¢ƒ': å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'],
                        'ä½œç”¨è·¯å¾„': f"ã€Œæœªç°åç¥ã®å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{å·¦ä¾§ä½ç½®}ã€‘ã€{å·¦ä¾§åå­—}ã€‘ã€{å·¦ä¾§åç¥}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åç¥}ã€‘ã€{çª—å£åå­—}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å·¦ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ']}ã€‘"
                    }
        return å·¦ç¯å¢ƒç»“è®º
    åˆ†ææœªç°å¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶()

    # 9.10 åˆ†ææœªç°å¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶
    def åˆ†ææœªç°å¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶():
        å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
        å³ç¯å¢ƒç»“è®ºå­—å…¸ = {}
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥', '')
            å¤–ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å¤–ç¯å¢ƒ', '')
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—', '')
            æ˜¯å¦æœ‰é•œåƒ = å±æ€§å­å­—å…¸.get('æ˜¯å¦æœ‰é•œåƒ', '')

            if not çª—å£åå­—:
                å±æ€§å­å­—å…¸['å³ç¯å¢ƒ'] = 'æœªçŸ¥'
                continue  # ç¼ºå°‘çª—å£åå­—ä¿¡æ¯ï¼Œæ— æ³•åˆ¤æ–­

            # æ‰¾å‡ºçª—å£åå­—å¯¹åº”çš„å¹²æ”¯ä½ç½®
            çª—å£ä½ç½® = None
            for ä½ç½®, å¹²å in zip(å¤©å¹²é¡ºåº, æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨):
                if å¹²å == çª—å£åå­—:
                    çª—å£ä½ç½® = ä½ç½®
                    break

            if çª—å£ä½ç½®:
                çª—å£ç´¢å¼• = å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®)
                if çª—å£ç´¢å¼• < len(å¤©å¹²é¡ºåº) - 1:
                    å³ä¾§ä½ç½® = å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• + 1]
                    å³ä¾§åå­— = æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[çª—å£ç´¢å¼• + 1]
                else:
                    å³ä¾§åå­— = None  # çª—å£åå­—å·²æ˜¯æœ€å³è¾¹ï¼Œæ— å³ä¾§

                if å³ä¾§åå­—:
                    ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å³ä¾§åå­—, çª—å£åå­—)
                    
                    if å¤–ç¯å¢ƒ == 'å‰':
                        if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å³ç¯å¢ƒç»“è®º = 'å‰'
                        elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å³ç¯å¢ƒç»“è®º = 'å‡¶'
                        else:
                            å³ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
                    elif å¤–ç¯å¢ƒ == 'å‡¶':
                        if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å³ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å³ç¯å¢ƒç»“è®º = 'å‰'
                        else:
                            å³ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
                    else:
                        å³ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
                else:
                    å³ç¯å¢ƒç»“è®º = 'æœªçŸ¥'  # æ— å³ä¾§åå­—ï¼Œæ— æ³•åˆ¤æ–­
            else:
                å³ç¯å¢ƒç»“è®º = 'æœªçŸ¥'  # çª—å£åå­—ä¸åœ¨å¤©å¹²é¡ºåºä¸­ï¼Œå¯èƒ½æ˜¯ç‰¹æ®Šæƒ…å†µ

            # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åç¥åœ¨æ—¶å¹²
            if çª—å£ä½ç½® == 'æ—¶å¹²':
                æœˆå¹²ç”Ÿæ‰¶æ—¥å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1], æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2]) == 'ç”Ÿæ‰¶å…³ç³»'
                æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2], æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[3]) == 'ç”Ÿæ‰¶å…³ç³»'
                æœˆå¹²å—åˆ¶æ—¥å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1], æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2]) in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']
                æ—¥å¹²å—åˆ¶æ—¶å¹² = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2], æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[3]) in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']

                if å¤–ç¯å¢ƒ == 'å‰':
                    if æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² and æœˆå¹²ç”Ÿæ‰¶æ—¥å¹²:
                        å³ç¯å¢ƒç»“è®º = 'å‰'
                    elif æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² and æœˆå¹²å—åˆ¶æ—¥å¹²:
                        å³ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif æ—¥å¹²å—åˆ¶æ—¶å¹² and æœˆå¹²ç”Ÿæ‰¶æ—¥å¹²:
                        å³ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif æ—¥å¹²å—åˆ¶æ—¶å¹² and æœˆå¹²å—åˆ¶æ—¥å¹²:
                        å³ç¯å¢ƒç»“è®º = 'å‰'
                    else:
                        å³ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
                elif å¤–ç¯å¢ƒ == 'å‡¶':
                    if æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² and æœˆå¹²ç”Ÿæ‰¶æ—¥å¹²:
                        å³ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² and æœˆå¹²å—åˆ¶æ—¥å¹²:
                        å³ç¯å¢ƒç»“è®º = 'å‰'
                    elif æ—¥å¹²å—åˆ¶æ—¶å¹² and æœˆå¹²ç”Ÿæ‰¶æ—¥å¹²:
                        å³ç¯å¢ƒç»“è®º = 'å‰'
                    elif æ—¥å¹²å—åˆ¶æ—¶å¹² and æœˆå¹²å—åˆ¶æ—¥å¹²:
                        å³ç¯å¢ƒç»“è®º = 'å‡¶'
                    else:
                        å³ç¯å¢ƒç»“è®º = 'æœªçŸ¥'

            # æ£€æŸ¥æ˜¯å¦æœ‰é•œåƒï¼Œéœ€è¦åè½¬ç»“è®º
            if æ˜¯å¦æœ‰é•œåƒ == 'æœ‰é•œåƒ':
                if å³ç¯å¢ƒç»“è®º == 'å‰':
                    å³ç¯å¢ƒç»“è®º = 'å‡¶'
                elif å³ç¯å¢ƒç»“è®º == 'å‡¶':
                    å³ç¯å¢ƒç»“è®º = 'å‰'

            # åˆ¤æ–­å³ç¯å¢ƒä»£è¡¨çš„å«ä¹‰
            æ˜¯æ­£åç¥ = åç¥ in ['æ­£å®˜', 'æ­£å°', 'æ­£è´¢', 'ä¼¤å®˜', 'åŠ«è´¢']
            if (æ€§åˆ«å˜é‡ == 'ç”·' and æ˜¯æ­£åç¥) or (æ€§åˆ«å˜é‡ == 'å¥³' and not æ˜¯æ­£åç¥):
                ç¯å¢ƒç±»å‹ = "å†…å¿ƒç¯å¢ƒ"
            else:
                ç¯å¢ƒç±»å‹ = "ç¤¾ä¼šç¯å¢ƒ"

            # å°†å³ç¯å¢ƒç»“è®ºè®°å½•åˆ°å±æ€§å­å­—å…¸
            å±æ€§å­å­—å…¸['å³ç¯å¢ƒ'] = å³ç¯å¢ƒç»“è®º
            å±æ€§å­å­—å…¸['ç¯å¢ƒç±»å‹'] = ç¯å¢ƒç±»å‹

            ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"æœªç°åç¥ï¼š{åç¥} - {å¤©å¹²å} - å³ç¯å¢ƒï¼š{å³ç¯å¢ƒç»“è®º} - {ç¯å¢ƒç±»å‹}:{å³ç¯å¢ƒç»“è®º}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            # æ·»åŠ æ¨å¯¼è¿‡ç¨‹çš„æ‰“å°
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), "æœªçŸ¥ä½ç½®")
            çª—å£åç¥ = next((ä¿¡æ¯.get('åç¥', '') for ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.values() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), "")
            
            if çª—å£ä½ç½® != 'æ—¶å¹²':
                å³ä¾§ä½ç½® = å¤©å¹²é¡ºåº[å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®) + 1] if å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®) < 3 else "æ— "
                å³ä¾§åå­— = æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®) + 1] if å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®) < 3 else "æ— "
                å³ä¾§åç¥ = next((ä¿¡æ¯.get('åç¥', '') for ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.values() if ä¿¡æ¯.get('åå­—') == å³ä¾§åå­—), "")
                ç”Ÿåˆ¶å…³ç³» = "ç”Ÿ" if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œæœªç°åç¥ã®å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{å³ä¾§ä½ç½®}ã€‘ã€{å³ä¾§åå­—}ã€‘ã€{å³ä¾§åç¥}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{çª—å£åç¥}ã€‘ï¼Œâˆ´æœªç°å¤©å¹²åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å³ç¯å¢ƒç»“è®º}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            else:
                æœˆå¹²åå­— = æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[1]
                æœˆå¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²']['åç¥']
                æ—¥å¹²åå­— = æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[2]
                æ—¥å¹²åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åç¥']
                
                æœˆæ—¥å…³ç³» = "ç”Ÿ" if æœˆå¹²ç”Ÿæ‰¶æ—¥å¹² else "åˆ¶"
                æ—¥æ—¶å…³ç³» = "ç”Ÿ" if æ—¥å¹²ç”Ÿæ‰¶æ—¶å¹² else "åˆ¶"
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œæœªç°åç¥ã®å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ã€{æœˆæ—¥å…³ç³»}ã€‘ã€æ—¥å¹²ã€‘ã€{æ—¥å¹²åå­—}ã€‘ã€{æ—¥å¹²åç¥}ã€‘ï¼Œã€æ—¥å¹²ã€‘ã€{æ—¥å¹²åå­—}ã€‘ã€{æ—¥å¹²åç¥}ã€‘ã€{æ—¥æ—¶å…³ç³»}ã€‘ã€æ—¶å¹²ã€‘ã€{çª—å£åå­—}ã€‘ã€{çª—å£åç¥}ã€‘ï¼Œâˆ´æœªç°å¤©å¹²åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å³ç¯å¢ƒç»“è®º}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            if çª—å£ä½ç½® == 'æ—¶å¹²':
                å³ç¯å¢ƒç»“è®ºå­—å…¸[å¤©å¹²å] = {'å³ç¯å¢ƒ': å³ç¯å¢ƒç»“è®º,
                    'ä½œç”¨è·¯å¾„': f"ğŸ”ã€Œæœªç°åç¥ã®å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æœˆå¹²ã€‘ã€{æœˆå¹²åå­—}ã€‘ã€{æœˆå¹²åç¥}ã€‘ã€{æœˆæ—¥å…³ç³»}ã€‘ã€æ—¥å¹²ã€‘ã€{æ—¥å¹²åå­—}ã€‘ã€{æ—¥å¹²åç¥}ã€‘ï¼Œã€æ—¥å¹²ã€‘ã€{æ—¥å¹²åå­—}ã€‘ã€{æ—¥å¹²åç¥}ã€‘ã€{æ—¥æ—¶å…³ç³»}ã€‘ã€æ—¶å¹²ã€‘ã€{çª—å£åå­—}ã€‘ã€{çª—å£åç¥}ã€‘ï¼Œâˆ´æœªç°å¤©å¹²åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å³ç¯å¢ƒç»“è®º}ã€‘"
                }
            else:
                å³ç¯å¢ƒç»“è®ºå­—å…¸[å¤©å¹²å] = {'å³ç¯å¢ƒ': å³ç¯å¢ƒç»“è®º,
                    'ä½œç”¨è·¯å¾„': f"ğŸ”ã€Œæœªç°åç¥ã®å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{å³ä¾§ä½ç½®}ã€‘ã€{å³ä¾§åå­—}ã€‘ã€{å³ä¾§åç¥}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{çª—å£åç¥}ã€‘ï¼Œâˆ´æœªç°å¤©å¹²åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å³ç¯å¢ƒç»“è®º}ã€‘"
                }

        return å³ç¯å¢ƒç»“è®ºå­—å…¸
    åˆ†ææœªç°å¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶()

    # 9.11 åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ
    def åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ():
        å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
        åœ°æ”¯é¡ºåº = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']

        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥', '')
            å†…ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒ', '')
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—', '')
            æ˜¯å¦æœ‰é•œåƒ = å±æ€§å­å­—å…¸.get('æ˜¯å¦æœ‰é•œåƒ', '')

            if not çª—å£åå­— or not å†…ç¯å¢ƒ:
                å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'æœªçŸ¥'
                continue

            # æ‰¾å‡ºçª—å£åå­—å¯¹åº”çš„å¹²æ”¯ä½ç½®
            çª—å£ä½ç½® = None
            for ä½ç½®, å¹²å in zip(å¤©å¹²é¡ºåº, æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨):
                if å¹²å == çª—å£åå­—:
                    çª—å£ä½ç½® = ä½ç½®
                    break

            if çª—å£ä½ç½®:
                çª—å£ç´¢å¼• = å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®)
                åŒæŸ±åœ°æ”¯ = åœ°æ”¯é¡ºåº[çª—å£ç´¢å¼•]

                if çª—å£ä½ç½® != 'å¹´å¹²':
                    å·¦ä¾§åœ°æ”¯ = åœ°æ”¯é¡ºåº[çª—å£ç´¢å¼• - 1]
                    ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å·¦ä¾§åœ°æ”¯, åŒæŸ±åœ°æ”¯)

                    if å†…ç¯å¢ƒ == 'å‰':
                        if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‰'
                        elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif å†…ç¯å¢ƒ == 'å‡¶':
                        if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‰'
                else:
                    # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åç¥åœ¨å¹´å¹²
                    æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥æ”¯', 'æœˆæ”¯')
                    æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆæ”¯', 'å¹´æ”¯')

                    if å†…ç¯å¢ƒ == 'å‰':
                        if æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' and æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‰'
                        elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' and æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»'] and æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»'] and æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‰'
                    elif å†…ç¯å¢ƒ == 'å‡¶':
                        if æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' and æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' and æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‰'
                        elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»'] and æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‰'
                        elif æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»'] and æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‡¶'

                # æ£€æŸ¥æ˜¯å¦æœ‰é•œåƒï¼Œéœ€è¦åè½¬ç»“è®º
                if æ˜¯å¦æœ‰é•œåƒ == 'æœ‰é•œåƒ':
                    if å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º == 'å‰':
                        å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º == 'å‡¶':
                        å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = 'å‰'

                # å°†å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®ºè®°å½•åˆ°å±æ€§å­å­—å…¸
                å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º

            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ', '')
            æ˜¯æ­£åç¥ = åç¥ in ['æ­£å®˜', 'æ­£å°', 'æ­£è´¢', 'ä¼¤å®˜', 'åŠ«è´¢']
            if (æ€§åˆ«å˜é‡ == 'ç”·' and æ˜¯æ­£åç¥) or (æ€§åˆ«å˜é‡ == 'å¥³' and not æ˜¯æ­£åç¥):
                ç¯å¢ƒç±»å‹ = "ç¤¾ä¼šç¯å¢ƒçš„å†…ç¯å¢ƒ"
            else:
                ç¯å¢ƒç±»å‹ = "å†…å¿ƒç¯å¢ƒçš„å†…ç¯å¢ƒ"
            ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"æœªç°åç¥ï¼š{åç¥} - {å¤©å¹²å} - å†…ç¯å¢ƒå·¦ç¯å¢ƒï¼š{å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º} - {ç¯å¢ƒç±»å‹}:{å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            # æ·»åŠ æ¨å¯¼è¿‡ç¨‹çš„æ‰“å°
            if çª—å£ä½ç½® != 'å¹´å¹²':
                å·¦ä¾§åœ°æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[çª—å£ç´¢å¼• - 1]
                åŒæŸ±åœ°æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[çª—å£ç´¢å¼•]
                ç”Ÿåˆ¶å…³ç³» = "ç”Ÿ" if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šã€{å·¦ä¾§åœ°æ”¯}ã€‘ã€{å·¦ä¾§åœ°æ”¯åå­—}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{åŒæŸ±åœ°æ”¯}ã€‘ã€{åŒæŸ±åœ°æ”¯åå­—}ã€‘ï¼Œã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            else:
                æ—¥æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[2]
                æœˆæ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[1]
                å¹´æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[0]
                æ—¥æœˆå…³ç³» = "ç”Ÿ" if æ—¥æ”¯ä¸æœˆåœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                æœˆå¹´å…³ç³» = "ç”Ÿ" if æœˆæ”¯ä¸å¹´åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ã€{æ—¥æœˆå…³ç³»}ã€‘ã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ï¼Œã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ã€{æœˆå¹´å…³ç³»}ã€‘ã€å¹´æ”¯ã€‘ã€{å¹´æ”¯åå­—}ã€‘ï¼Œã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

        å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®ºå­—å…¸ = {}
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—')
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥', '')
            å†…ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒ', '')
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), None)
            
            if çª—å£ä½ç½® == 'å¹´å¹²':
                # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åœ¨å¹´å¹²
                å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®ºå­—å…¸[å¤©å¹²å] = {
                    'å†…ç¯å¢ƒå·¦ç¯å¢ƒ': å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'],
                    'ä½œç”¨è·¯å¾„': f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒã®å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ã€{æ—¥æœˆå…³ç³»}ã€‘ã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ï¼Œã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ã€{æœˆå¹´å…³ç³»}ã€‘ã€å¹´æ”¯ã€‘ã€{å¹´æ”¯åå­—}ã€‘ï¼Œã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º}ã€‘"
                }
            else:
                # æ™®é€šæƒ…å†µ
                å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®ºå­—å…¸[å¤©å¹²å] = {
                    'å†…ç¯å¢ƒå·¦ç¯å¢ƒ': å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'],
                    'ä½œç”¨è·¯å¾„': f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒã®å·¦ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šã€{å·¦ä¾§åœ°æ”¯}ã€‘ã€{å·¦ä¾§åœ°æ”¯åå­—}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{åŒæŸ±åœ°æ”¯}ã€‘ã€{åŒæŸ±åœ°æ”¯åå­—}ã€‘ï¼Œã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º}ã€‘"
                }
        return å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®ºå­—å…¸
    åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ()

    # 9.12 åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒ
    def åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒ():
        å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
        åœ°æ”¯é¡ºåº = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']

        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥', '')
            å†…ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒ', '')
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—', '')
            æ˜¯å¦æœ‰é•œåƒ = å±æ€§å­å­—å…¸.get('æ˜¯å¦æœ‰é•œåƒ', '')

            if not çª—å£åå­— or not å†…ç¯å¢ƒ:
                å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'æœªçŸ¥'
                continue

            # æ‰¾å‡ºçª—å£åå­—å¯¹åº”çš„å¹²æ”¯ä½ç½®
            çª—å£ä½ç½® = None
            for ä½ç½®, å¹²å in zip(å¤©å¹²é¡ºåº, æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨):
                if å¹²å == çª—å£åå­—:
                    çª—å£ä½ç½® = ä½ç½®
                    break

            if çª—å£ä½ç½®:
                çª—å£ç´¢å¼• = å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®)
                åŒæŸ±åœ°æ”¯ = åœ°æ”¯é¡ºåº[çª—å£ç´¢å¼•]

                if çª—å£ä½ç½® != 'æ—¶å¹²':
                    å³ä¾§åœ°æ”¯ = åœ°æ”¯é¡ºåº[çª—å£ç´¢å¼• + 1]
                    ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å³ä¾§åœ°æ”¯, åŒæŸ±åœ°æ”¯)

                    if å†…ç¯å¢ƒ == 'å‰':
                        if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‰'
                        elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif å†…ç¯å¢ƒ == 'å‡¶':
                        if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‰'
                else:
                    # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åç¥åœ¨æ—¶å¹²
                    æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥æ”¯', 'æ—¶æ”¯')
                    æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆæ”¯', 'æ—¥æ”¯')

                    if å†…ç¯å¢ƒ == 'å‰':
                        if æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' and æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‰'
                        elif æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' and æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»'] and æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»'] and æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‰'
                    elif å†…ç¯å¢ƒ == 'å‡¶':
                        if æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' and æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‡¶'
                        elif æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' and æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‰'
                        elif æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»'] and æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‰'
                        elif æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»'] and æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» in ['å—åˆ¶å…³ç³»', 'ä¸æ—ºä¸å¼±å…³ç³»']:
                            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‡¶'

                # æ£€æŸ¥æ˜¯å¦æœ‰é•œåƒï¼Œéœ€è¦åè½¬ç»“è®º
                if æ˜¯å¦æœ‰é•œåƒ == 'æœ‰é•œåƒ':
                    if å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º == 'å‰':
                        å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‡¶'
                    elif å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º == 'å‡¶':
                        å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = 'å‰'

                # å°†å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®ºè®°å½•åˆ°å±æ€§å­å­—å…¸
                å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º

            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå³ç¯å¢ƒ', '')
            æ˜¯æ­£åç¥ = åç¥ in ['æ­£å®˜', 'æ­£å°', 'æ­£è´¢', 'ä¼¤å®˜', 'åŠ«è´¢']
            if (æ€§åˆ«å˜é‡ == 'ç”·' and æ˜¯æ­£åç¥) or (æ€§åˆ«å˜é‡ == 'å¥³' and not æ˜¯æ­£åç¥):
                ç¯å¢ƒç±»å‹ = "å†…å¿ƒç¯å¢ƒçš„å†…ç¯å¢ƒ"
            else:
                ç¯å¢ƒç±»å‹ = "ç¤¾ä¼šç¯å¢ƒçš„å†…ç¯å¢ƒ"
            ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"æœªç°åç¥ï¼š{åç¥} - {å¤©å¹²å} - å†…ç¯å¢ƒå³ç¯å¢ƒï¼š{å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º} - {ç¯å¢ƒç±»å‹}:{å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º}"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            
            # æ·»åŠ æ¨å¯¼è¿‡ç¨‹çš„æ‰“å°
            if çª—å£ä½ç½® != 'æ—¶å¹²':
                å³ä¾§åœ°æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[çª—å£ç´¢å¼• + 1]
                åŒæŸ±åœ°æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[çª—å£ç´¢å¼•]
                ç”Ÿåˆ¶å…³ç³» = "ç”Ÿ" if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒçš„å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{å³ä¾§åœ°æ”¯}ã€‘ã€{å³ä¾§åœ°æ”¯åå­—}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{åŒæŸ±åœ°æ”¯}ã€‘ã€{åŒæŸ±åœ°æ”¯åå­—}ã€‘ï¼Œã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            else:
                æ—¥æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[2]
                æœˆæ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[1]
                æ—¶æ”¯åå­— = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[3]
                æ—¥æ—¶å…³ç³» = "ç”Ÿ" if æ—¥æ”¯ä¸æ—¶åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                æœˆæ—¥å…³ç³» = "ç”Ÿ" if æœˆæ”¯ä¸æ—¥åœ°æ”¯ä½œç”¨å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
                ä½œç”¨é“¾è·¯è¿‡ç¨‹ = f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒçš„å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ã€{æœˆæ—¥å…³ç³»}ã€‘ã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ï¼Œã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ã€{æ—¥æ—¶å…³ç³»}ã€‘ã€æ—¶æ”¯ã€‘ã€{æ—¶æ”¯åå­—}ã€‘ï¼Œã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º}ã€‘"
                æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
                print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
    
        å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®ºå­—å…¸ = {}
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—')
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥', '')
            å†…ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒ', '')
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), None)
            
            if çª—å£ä½ç½® == 'æ—¶å¹²':
                # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åœ¨æ—¶å¹²
                å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®ºå­—å…¸[å¤©å¹²å] = {'å†…ç¯å¢ƒå³ç¯å¢ƒ': å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'],
                    'ä½œç”¨è·¯å¾„': f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒã®å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€æœˆæ”¯ã€‘ã€{æœˆæ”¯åå­—}ã€‘ã€{æœˆæ—¥å…³ç³»}ã€‘ã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ï¼Œã€æ—¥æ”¯ã€‘ã€{æ—¥æ”¯åå­—}ã€‘ã€{æ—¥æ—¶å…³ç³»}ã€‘ã€æ—¶æ”¯ã€‘ã€{æ—¶æ”¯åå­—}ã€‘ï¼Œã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º}ã€‘"}
            else:
                # æ™®é€šæƒ…å†µ
                å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®ºå­—å…¸[å¤©å¹²å] = {'å†…ç¯å¢ƒå³ç¯å¢ƒ': å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'],
                    'ä½œç”¨è·¯å¾„': f"ğŸ”ã€Œæœªç°åç¥ã®å†…ç¯å¢ƒã®å³ç¯å¢ƒã€æ¨å¯¼è¿‡ç¨‹ï¼šâˆµã€{å³ä¾§åœ°æ”¯}ã€‘ã€{å³ä¾§åœ°æ”¯åå­—}ã€‘ã€{ç”Ÿåˆ¶å…³ç³»}ã€‘ã€{åŒæŸ±åœ°æ”¯}ã€‘ã€{åŒæŸ±åœ°æ”¯åå­—}ã€‘ï¼Œã€{çª—å£ä½ç½®}ã€‘ã€{çª—å£åå­—}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒã€{å†…ç¯å¢ƒ}ã€‘ï¼Œâˆ´æœªç°åç¥ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒï¼ˆ{ç¯å¢ƒç±»å‹}ï¼‰ã€{å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º}ã€‘"}
        return å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®ºå­—å…¸
    åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒ()






     # æ‰“å°æœªç°åç¥ä¿¡æ¯
    for åå­—, å±æ€§ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
        æ”¶é›†æ–­è¯­(f"æœªç°åç¥çš„å¿Œç”¨ç¥ä¿¡æ¯:ã€{åå­—}ã€‘- ã€{å±æ€§['åç¥']}ã€‘ - ã€{å±æ€§['å¿Œç”¨ç¥å½’å±']}ã€‘")

    def åˆ¤æ–­æ—¥ä¸»è‡ªèº«çŠ¶æ€():   #æ ¹æ®æ ¼å±€åˆ¤æ–­æ—¥ä¸»æ˜¯ç”¨ç¥è¿˜æ˜¯å¿Œç¥ï¼Œå¹¶æ›´æ–°GUIæ˜¾ç¤º
        import contextlib
        æ—¥å¹²æ ‡ç­¾ç´¢å¼• = 2
        # æ ¹æ®æ ¼å±€åˆ¤æ–­æ—¥ä¸»çŠ¶æ€
        if æ ¼å±€ in ['ä»å¼ºæ ¼å±€', 'èº«å¼±æ ¼å±€']:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['å¿Œç”¨ç¥å½’å±'] = 'ç”¨ç¥'
            å¤©å¹²_shen_æ ‡ç­¾ = å¤©å¹²_shen_æ ‡ç­¾_åˆ—è¡¨[æ—¥å¹²æ ‡ç­¾ç´¢å¼•]
            åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åç¥']
            å¤©å¹²_shen_æ ‡ç­¾.config(text=f"{åç¥}ï¼ˆç”¨ç¥ï¼‰", fg='#da61cd')
        elif æ ¼å±€ in ['ä»å¼±æ ¼å±€', 'èº«å¼ºæ ¼å±€']:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['å¿Œç”¨ç¥å½’å±'] = 'å¿Œç¥'
            å¤©å¹²_shen_æ ‡ç­¾ = å¤©å¹²_shen_æ ‡ç­¾_åˆ—è¡¨[æ—¥å¹²æ ‡ç­¾ç´¢å¼•]
            åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['åç¥']
            å¤©å¹²_shen_æ ‡ç­¾.config(text=f"{åç¥}ï¼ˆå¿Œç¥ï¼‰", fg='#52577d')
        # åˆ¤æ–­æ—¥å¹²çš„å·¦å³ç¯å¢ƒ
        æœˆå¹²ç”Ÿæ‰¶å—åˆ¶ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆå¹²', 'æ—¥å¹²')
        æ—¶å¹²ç”Ÿæ‰¶å—åˆ¶ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¶å¹²', 'æ—¥å¹²')
        æ—¥æ”¯ç”Ÿæ‰¶å—åˆ¶ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¥æ”¯', 'æ—¥å¹²')
        æœˆæ”¯ç”Ÿæ‰¶å—åˆ¶ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æœˆæ”¯', 'æ—¥æ”¯')
        æ—¶æ”¯ç”Ÿæ‰¶å—åˆ¶ = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶('æ—¶æ”¯', 'æ—¥æ”¯')
        # åˆ¤æ–­æ—¥å¹²å·¦å³ç¯å¢ƒ
        æ—¥å¹²å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']['å¿Œç”¨ç¥å½’å±']
        # å·¦ç¯å¢ƒåˆ¤æ–­
        if (æ—¥å¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥' and æœˆå¹²ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»') or \
           (æ—¥å¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥' and æœˆå¹²ç”Ÿæ‰¶å—åˆ¶ == 'å—åˆ¶å…³ç³»'):
            æ—¥å¹²å·¦ç¯å¢ƒ = 'å‰'
        else:
            æ—¥å¹²å·¦ç¯å¢ƒ = 'å‡¶'
            
        # å³ç¯å¢ƒåˆ¤æ–­
        if (æ—¥å¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥' and æ—¶å¹²ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»') or \
           (æ—¥å¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥' and æ—¶å¹²ç”Ÿæ‰¶å—åˆ¶ == 'å—åˆ¶å…³ç³»'):
            æ—¥å¹²å³ç¯å¢ƒ = 'å‰'
        else:
            æ—¥å¹²å³ç¯å¢ƒ = 'å‡¶'

        # å†…ç¯å¢ƒåˆ¤æ–­
        if (æ—¥å¹²å¿Œç”¨ç¥å½’å± == 'ç”¨ç¥' and æ—¥æ”¯ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»') or \
           (æ—¥å¹²å¿Œç”¨ç¥å½’å± == 'å¿Œç¥' and æ—¥æ”¯ç”Ÿæ‰¶å—åˆ¶ == 'å—åˆ¶å…³ç³»'):
            æ—¥å¹²å†…ç¯å¢ƒ = 'å‰'
        else:
            æ—¥å¹²å†…ç¯å¢ƒ = 'å‡¶'

        # å†…ç¯å¢ƒçš„å·¦å³ç¯å¢ƒåˆ¤æ–­
        if (æ—¥å¹²å†…ç¯å¢ƒ == 'å‰' and æœˆæ”¯ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»') or \
           (æ—¥å¹²å†…ç¯å¢ƒ == 'å‡¶' and æœˆæ”¯ç”Ÿæ‰¶å—åˆ¶ == 'å—åˆ¶å…³ç³»'):
            å†…ç¯å¢ƒå·¦ç¯å¢ƒ = 'å‰'
        else:
            å†…ç¯å¢ƒå·¦ç¯å¢ƒ = 'å‡¶'

        if (æ—¥å¹²å†…ç¯å¢ƒ == 'å‰' and æ—¶æ”¯ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»') or \
           (æ—¥å¹²å†…ç¯å¢ƒ == 'å‡¶' and æ—¶æ”¯ç”Ÿæ‰¶å—åˆ¶ == 'å—åˆ¶å…³ç³»'):
            å†…ç¯å¢ƒå³ç¯å¢ƒ = 'å‰'
        else:
            å†…ç¯å¢ƒå³ç¯å¢ƒ = 'å‡¶'
        
        with contextlib.redirect_stdout(None):
            # æ‰“å°ç»“è®º
            æœˆå¹²å…³ç³» = "ç”Ÿ" if æœˆå¹²ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            æ—¶å¹²å…³ç³» = "ç”Ÿ" if æ—¶å¹²ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            æ—¥æ”¯å…³ç³» = "ç”Ÿ" if æ—¥æ”¯ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            æœˆæ”¯å…³ç³» = "ç”Ÿ" if æœˆæ”¯ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            æ—¶æ”¯å…³ç³» = "ç”Ÿ" if æ—¶æ”¯ç”Ÿæ‰¶å—åˆ¶ == 'ç”Ÿæ‰¶å…³ç³»' else "åˆ¶"
            # åœ¨å‡½æ•°æœ«å°¾æ·»åŠ ï¼Œå­˜å‚¨ç¯å¢ƒä¿¡æ¯åˆ°å…«å­—ä¿¡æ¯ä¸»å­—å…¸
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²'].update({'å·¦ç¯å¢ƒ': æ—¥å¹²å·¦ç¯å¢ƒ,'å³ç¯å¢ƒ': æ—¥å¹²å³ç¯å¢ƒ,'å†…ç¯å¢ƒ': æ—¥å¹²å†…ç¯å¢ƒ,'å†…ç¯å¢ƒå·¦ç¯å¢ƒ': å†…ç¯å¢ƒå·¦ç¯å¢ƒ,'å†…ç¯å¢ƒå³ç¯å¢ƒ': å†…ç¯å¢ƒå³ç¯å¢ƒ})

            ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"âˆµæ—¥å¹²ä¸º{æ—¥å¹²å¿Œç”¨ç¥å½’å±}ï¼Œæœˆå¹²ã€{æœˆå¹²å…³ç³»}ã€‘æ—¥å¹²ï¼Œæ—¶å¹²ã€{æ—¶å¹²å…³ç³»}ã€‘æ—¥å¹²ï¼Œâˆ´æ—¥å¹²çš„å·¦ç¯å¢ƒä¸ºã€{æ—¥å¹²å·¦ç¯å¢ƒ}ã€‘ï¼Œæ—¥å¹²çš„å³ç¯å¢ƒä¸ºã€{æ—¥å¹²å³ç¯å¢ƒ}ã€‘"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)

            ä½œç”¨é“¾è·¯è¿‡ç¨‹ =f"âˆµæ—¥å¹²ä¸º{æ—¥å¹²å¿Œç”¨ç¥å½’å±}ï¼Œæ—¥æ”¯ã€{æ—¥æ”¯å…³ç³»}ã€‘æ—¥å¹²ï¼Œâˆ´æ—¥å¹²çš„å†…ç¯å¢ƒä¸ºã€{æ—¥å¹²å†…ç¯å¢ƒ}ã€‘ã€‚âˆµæœˆæ”¯ã€{æœˆæ”¯å…³ç³»}ã€‘æ—¥æ”¯ï¼Œæ—¶æ”¯ã€{æ—¶æ”¯å…³ç³»}ã€‘æ—¥æ”¯ï¼Œâˆ´æ—¥å¹²å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒä¸ºã€{å†…ç¯å¢ƒå·¦ç¯å¢ƒ}ã€‘ï¼Œæ—¥å¹²å†…ç¯å¢ƒçš„å³ç¯å¢ƒä¸ºã€{å†…ç¯å¢ƒå³ç¯å¢ƒ}ã€‘ã€‚"
            æ”¶é›†æ–­è¯­(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
            print(ä½œç”¨é“¾è·¯è¿‡ç¨‹)
        
        # åœ¨å‡½æ•°æœ«å°¾ï¼Œæ„å»ºå¹¶è¿”å›ç»“è®ºå­—å…¸
        ç»“è®ºä¿¡æ¯ = {'ç¯å¢ƒä¿¡æ¯': {'å·¦ç¯å¢ƒ': æ—¥å¹²å·¦ç¯å¢ƒ,'å³ç¯å¢ƒ': æ—¥å¹²å³ç¯å¢ƒ,'å†…ç¯å¢ƒ': æ—¥å¹²å†…ç¯å¢ƒ,'å†…ç¯å¢ƒå·¦ç¯å¢ƒ': å†…ç¯å¢ƒå·¦ç¯å¢ƒ,'å†…ç¯å¢ƒå³ç¯å¢ƒ': å†…ç¯å¢ƒå³ç¯å¢ƒ},
            'ä½œç”¨è·¯å¾„è¯´æ˜': {'å¤–ç¯å¢ƒè¯´æ˜': f"âˆµæ—¥å¹²ä¸º{æ—¥å¹²å¿Œç”¨ç¥å½’å±}ï¼Œæœˆå¹²ã€{æœˆå¹²å…³ç³»}ã€‘æ—¥å¹²ï¼Œæ—¶å¹²ã€{æ—¶å¹²å…³ç³»}ã€‘æ—¥å¹²ï¼Œâˆ´æ—¥å¹²çš„å·¦ç¯å¢ƒä¸ºã€{æ—¥å¹²å·¦ç¯å¢ƒ}ã€‘ï¼Œæ—¥å¹²çš„å³ç¯å¢ƒä¸ºã€{æ—¥å¹²å³ç¯å¢ƒ}ã€‘",'å†…ç¯å¢ƒè¯´æ˜': f"âˆµæ—¥å¹²ä¸º{æ—¥å¹²å¿Œç”¨ç¥å½’å±}ï¼Œæ—¥æ”¯ã€{æ—¥æ”¯å…³ç³»}ã€‘æ—¥å¹²ï¼Œâˆ´æ—¥å¹²çš„å†…ç¯å¢ƒä¸ºã€{æ—¥å¹²å†…ç¯å¢ƒ}ã€‘",'å†…ç¯å¢ƒæ‰©å±•è¯´æ˜': f"âˆµæœˆæ”¯ã€{æœˆæ”¯å…³ç³»}ã€‘æ—¥æ”¯ï¼Œæ—¶æ”¯ã€{æ—¶æ”¯å…³ç³»}ã€‘æ—¥æ”¯ï¼Œâˆ´æ—¥å¹²å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒä¸ºã€{å†…ç¯å¢ƒå·¦ç¯å¢ƒ}ã€‘ï¼Œæ—¥å¹²å†…ç¯å¢ƒçš„å³ç¯å¢ƒä¸ºã€{å†…ç¯å¢ƒå³ç¯å¢ƒ}ã€‘"}}
        
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²'].update(ç»“è®ºä¿¡æ¯['ç¯å¢ƒä¿¡æ¯'])
        return ç»“è®ºä¿¡æ¯
    åˆ¤æ–­æ—¥ä¸»è‡ªèº«çŠ¶æ€()




    # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ GUIçª—å£é‡Œåˆ›å»ºä¸€ä¸ªæ–°çš„Frameæ¥å®¹çº³åç¥åˆ†æç»“æœ
    åç¥åˆ†æç»“æœæ¡†æ¶ = tk.Frame(åˆ†æå‘½ç›˜ç•Œé¢çª—å£, bg='#f5f5f1')
    åç¥åˆ†æç»“æœæ¡†æ¶.pack(pady=(0, 0))  # è®¾ç½®ä¸ä¸Šæ–¹å‘½å±€çš„é—´è·ä¸º20åƒç´ 
    #ğŸ–¥ï¸å·²ç°åç¥å±•ç¤ºåŒº
    å·²ç°åç¥å‰å‡¶ç•Œé¢å±•ç¤ºæ–‡æœ¬ = "ã€å·²ç°åç¥ã€‘ğŸ˜\n"
    for ä¸‰å¤©å¹²éå†åˆ—è¡¨ in ['æ—¶å¹²', 'æœˆå¹²', 'å¹´å¹²']:
        åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(ä¸‰å¤©å¹²éå†åˆ—è¡¨).get('åç¥')
        å¿Œç”¨ç¥å½’å± = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(ä¸‰å¤©å¹²éå†åˆ—è¡¨).get('å¿Œç”¨ç¥å½’å±')
        å¤–ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(ä¸‰å¤©å¹²éå†åˆ—è¡¨).get('å¤–ç¯å¢ƒ')
        å†…ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(ä¸‰å¤©å¹²éå†åˆ—è¡¨).get('å†…ç¯å¢ƒ')
        å·¦ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(ä¸‰å¤©å¹²éå†åˆ—è¡¨).get('å·¦ç¯å¢ƒ')
        å³ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(ä¸‰å¤©å¹²éå†åˆ—è¡¨).get('å³ç¯å¢ƒ')
        å†…ç¯å¢ƒå·¦ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(ä¸‰å¤©å¹²éå†åˆ—è¡¨).get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ')
        å†…ç¯å¢ƒå³ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(ä¸‰å¤©å¹²éå†åˆ—è¡¨).get('å†…ç¯å¢ƒå³ç¯å¢ƒ')

        å·²ç°åç¥å‰å‡¶ç•Œé¢å±•ç¤ºæ–‡æœ¬ += f"{ä¸‰å¤©å¹²éå†åˆ—è¡¨}ğŸ‘‰ {åç¥}({å¿Œç”¨ç¥å½’å±})ã€‚ å¤–ç¯å¢ƒï¼š{å¤–ç¯å¢ƒ}ã€‚ å†…ç¯å¢ƒï¼š{å†…ç¯å¢ƒ}ã€‚ å·¦ç¯å¢ƒï¼š{å·¦ç¯å¢ƒ}ã€‚ å³ç¯å¢ƒï¼š{å³ç¯å¢ƒ}ã€‚ å†…ç¯å¢ƒå·¦ç¯å¢ƒ:{å†…ç¯å¢ƒå·¦ç¯å¢ƒ}ã€‚  å†…ç¯å¢ƒå³ç¯å¢ƒ:{å†…ç¯å¢ƒå³ç¯å¢ƒ}\n"
    # åˆ›å»ºå·²ç°åç¥æ ‡ç­¾å¹¶æ·»åŠ åˆ°æ¡†æ¶ä¸­
    å·²ç°åç¥æ ‡ç­¾ = tk.Label(åç¥åˆ†æç»“æœæ¡†æ¶, text=å·²ç°åç¥å‰å‡¶ç•Œé¢å±•ç¤ºæ–‡æœ¬, font=("Arial", 9), fg="#7e7e7e", bg='#f5f5f1', justify=tk.LEFT, anchor='w') #"justify=tk.LEFT"ä»£è¡¨æ–‡æœ¬å·¦å¯¹é½ã€‚"anchor='w'"ä»£è¡¨æ ‡ç­¾å†…å®¹å·¦å¯¹é½
    å·²ç°åç¥æ ‡ç­¾.pack(padx=50, pady=(0, 10), anchor='w')  # å‘å·¦å¯¹é½ï¼Œä¸Šä¸‹é—´è·10åƒç´          
     #ğŸ–¥ï¸æœªç°åç¥å±•ç¤ºåŒº
    æœªç°åç¥å‰å‡¶ç•Œé¢å±•ç¤ºæ–‡æœ¬ = "ã€æœªç°åç¥ã€‘ğŸ«¥\n"
    for å¤©å¹²å,å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
        åç¥ = å­å­—å…¸.get('åç¥', '')
        å¿Œç”¨ç¥å½’å± = å­å­—å…¸.get('å¿Œç”¨ç¥å½’å±', '')
        å¤–ç¯å¢ƒ = å­å­—å…¸.get('å¤–ç¯å¢ƒ', '')
        å†…ç¯å¢ƒ = å­å­—å…¸.get('å†…ç¯å¢ƒ', '')
        å·¦ç¯å¢ƒ = å­å­—å…¸.get('å·¦ç¯å¢ƒ')
        å³ç¯å¢ƒ = å­å­—å…¸.get('å³ç¯å¢ƒ')
        å†…ç¯å¢ƒå·¦ç¯å¢ƒ = å­å­—å…¸.get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ')
        å†…ç¯å¢ƒå³ç¯å¢ƒ = å­å­—å…¸.get('å†…ç¯å¢ƒå³ç¯å¢ƒ')
        æœªç°åç¥å‰å‡¶ç•Œé¢å±•ç¤ºæ–‡æœ¬ += f"{å¤©å¹²å}ğŸ‘‰ {åç¥}({å¿Œç”¨ç¥å½’å±})ã€‚ å¤–ç¯å¢ƒï¼š{å¤–ç¯å¢ƒ}ã€‚ å†…ç¯å¢ƒï¼š{å†…ç¯å¢ƒ}ã€‚ å·¦ç¯å¢ƒï¼š{å·¦ç¯å¢ƒ}ã€‚ å³ç¯å¢ƒï¼š{å³ç¯å¢ƒ}ã€‚ å†…ç¯å¢ƒå·¦ç¯å¢ƒ:{å†…ç¯å¢ƒå·¦ç¯å¢ƒ}ã€‚ å†…ç¯å¢ƒå³ç¯å¢ƒ:{å†…ç¯å¢ƒå³ç¯å¢ƒ}\n"
    # åˆ›å»ºæœªç°åç¥æ ‡ç­¾å¹¶æ·»åŠ åˆ°æ¡†æ¶ä¸­
    æœªç°åç¥æ ‡ç­¾ = tk.Label(åç¥åˆ†æç»“æœæ¡†æ¶, text=æœªç°åç¥å‰å‡¶ç•Œé¢å±•ç¤ºæ–‡æœ¬, font=("Arial", 9), fg="#7e7e7e", bg='#f5f5f1', justify=tk.LEFT, anchor='w')
    æœªç°åç¥æ ‡ç­¾.pack(padx=50, pady=(0, 10), anchor='w')  # å‘å·¦å¯¹é½ï¼Œä¸Šä¸‹é—´è·10åƒç´ 





    # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ åˆ›å»ºä¸€ä¸ªå®¹å™¨æ¡†æ¶æ¥æ”¾ç½®æ‰€æœ‰åˆ†æç»“æœå’Œæ“ä½œåŒºåŸŸ
    åº•éƒ¨æ“ä½œåŒºåŸŸæ¡†æ¶ = tk.Frame(åˆ†æå‘½ç›˜ç•Œé¢çª—å£, bg='#f5f5f1')
    åº•éƒ¨æ“ä½œåŒºåŸŸæ¡†æ¶.pack(fill=tk.BOTH, padx=50, pady=(10, 20))
    # åˆ›å»ºå·¦å³åˆ†æ æ¡†æ¶
    å·¦ä¾§æ¡†æ¶ = tk.Frame(åº•éƒ¨æ“ä½œåŒºåŸŸæ¡†æ¶, bg='#f5f5f1')
    å·¦ä¾§æ¡†æ¶.pack(side=tk.LEFT, fill=tk.BOTH, expand=True)
    å³ä¾§æ¡†æ¶ = tk.Frame(åº•éƒ¨æ“ä½œåŒºåŸŸæ¡†æ¶, bg='#f5f5f1')
    å³ä¾§æ¡†æ¶.pack(side=tk.RIGHT, fill=tk.BOTH)

    # 1.ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ åˆ›å»ºå³ä¾§å¤§è¿æµå¹´é€‰æ‹©æ¡†æ¶
    é€‰æ‹©åŒºåŸŸæ¡†æ¶ = tk.Frame(å³ä¾§æ¡†æ¶, bg='#f5f5f1')
    é€‰æ‹©åŒºåŸŸæ¡†æ¶.pack(anchor='e', pady=(10, 0))
    # 2.åˆ›å»ºå¤§è¿é€‰æ‹©éƒ¨åˆ†
    å¤§è¿å®¹å™¨ = tk.Frame(é€‰æ‹©åŒºåŸŸæ¡†æ¶, bg='#f5f5f1')
    å¤§è¿å®¹å™¨.pack(side=tk.LEFT, padx=(0, 20))
    # ã€Šå¤§è¿ã€‹é€‰æ‹©éƒ¨åˆ†
    å¤§è¿å®¹å™¨ = tk.Frame(é€‰æ‹©åŒºåŸŸæ¡†æ¶, bg='#f5f5f1')
    å¤§è¿å®¹å™¨.pack(side=tk.LEFT, padx=(0, 20))
    å¤§è¿æŒ‰é’® = tk.Button(å¤§è¿å®¹å™¨, text="å¤§è¿â–¼", width=20, bg='white', relief='solid', borderwidth=1)
    å¤§è¿æŒ‰é’®.pack()
    å¤§è¿åˆ—è¡¨æ¡† = tk.Listbox(å¤§è¿å®¹å™¨, selectmode=tk.MULTIPLE, height=0, width=20)
    å·²é€‰å¤§è¿æ ‡ç­¾ = tk.Label(å¤§è¿å®¹å™¨, text="", bg='#f5f5f1', width=20)
    å·²é€‰å¤§è¿æ ‡ç­¾.pack()


    # 3.è·å–å¤§è¿ä¿¡æ¯å¹¶æ·»åŠ åˆ°åˆ—è¡¨æ¡†
    å¤§è¿ä¿¡æ¯åˆ—è¡¨ = []
    global æµå¹´å¤©å¹²å­—å…¸, æµå¹´åœ°æ”¯å­—å…¸
    æµå¹´å¤©å¹²å­—å…¸ = {}# æ›´æ–°æµå¹´åˆ—è¡¨å‡½æ•°
    æµå¹´åœ°æ”¯å­—å…¸ = {}
    yun = ba.getYun(not options.n)
    for dayun in yun.getDaYun()[1:]:
        age = dayun.getStartAge()
        ganzhi = dayun.getGanZhi()
        year_str = 'ğŸ“’å¤§è¿'
        å¤§è¿ä¿¡æ¯ = f"{age}å²  {year_str}  {ganzhi}"
        å¤§è¿åˆ—è¡¨æ¡†.insert(tk.END, å¤§è¿ä¿¡æ¯)
        å¤§è¿ä¿¡æ¯åˆ—è¡¨.append(å¤§è¿ä¿¡æ¯)
        # åœ¨å¤„ç†æ¯ä¸ªå¤§è¿ä¿¡æ¯æ—¶
        å¤§è¿å¤©å¹² = ganzhi[0]  # å–ç¬¬ä¸€ä¸ªå­—ç¬¦ä½œä¸ºå¤©å¹²
        å¤§è¿åœ°æ”¯ = ganzhi[1]  # å–ç¬¬äºŒä¸ªå­—ç¬¦ä½œä¸ºåœ°æ”¯
        # æ›´æ–°å¤§è¿å¤©å¹²å­—å…¸
        if å¤§è¿å¤©å¹² not in å¤§è¿å¤©å¹²å­—å…¸:
            å¤§è¿å¤©å¹²å­—å…¸[å¤§è¿å¤©å¹²] = {"é˜´é˜³å±æ€§": è®¡ç®—é˜´é˜³å±æ€§(å¤§è¿å¤©å¹²), "æ—ºå¼±çŠ¶æ€": "","æ˜¯å¦å®ç¥": ""}
        # æ›´æ–°å¤§è¿åœ°æ”¯å­—å…¸
        if å¤§è¿åœ°æ”¯ not in å¤§è¿åœ°æ”¯å­—å…¸:
            å¤§è¿åœ°æ”¯å­—å…¸[å¤§è¿åœ°æ”¯] = {"é˜´é˜³å±æ€§": è®¡ç®—é˜´é˜³å±æ€§(å¤§è¿åœ°æ”¯), "æ—ºå¼±çŠ¶æ€": "","æ˜¯å¦å®ç¥": "","æ˜¯å¦ç©ºäº¡": "ç©ºäº¡" if å¤§è¿åœ°æ”¯ in åœ°æ”¯ç©ºäº¡å­—å…¸[zhus[2]] else "ä¸ç©ºäº¡"}
            if å¤§è¿åœ°æ”¯å­—å…¸[å¤§è¿åœ°æ”¯]["æ˜¯å¦ç©ºäº¡"] == "ç©ºäº¡":  # å¦‚æœåœ°æ”¯ç©ºäº¡ï¼Œæ›´æ–°æ—ºå¼±çŠ¶æ€
                å¤§è¿åœ°æ”¯å­—å…¸[å¤§è¿åœ°æ”¯]["æ—ºå¼±çŠ¶æ€"] = "ä¸å¼±ä¸æ—º"


    # 4.ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ åˆ›å»ºæµå¹´å®¹å™¨å’Œç»„ä»¶
    æµå¹´å®¹å™¨ = tk.Frame(é€‰æ‹©åŒºåŸŸæ¡†æ¶, bg='#f5f5f1')
    æµå¹´å®¹å™¨.pack(side=tk.LEFT)
    æµå¹´æŒ‰é’® = tk.Button(æµå¹´å®¹å™¨, text="æµå¹´â–¼", width=20, bg='white', relief='solid', borderwidth=1)
    æµå¹´æŒ‰é’®.pack()
    æµå¹´åˆ—è¡¨æ¡† = tk.Listbox(æµå¹´å®¹å™¨, selectmode=tk.MULTIPLE, height=0, width=20)
    å·²é€‰æµå¹´æ ‡ç­¾ = tk.Label(æµå¹´å®¹å™¨, text="", bg='#f5f5f1', width=20)
    å·²é€‰æµå¹´æ ‡ç­¾.pack()
    # æµå¹´æç¤ºæ ‡ç­¾æ”¾åœ¨æµå¹´å®¹å™¨ä¸‹æ–¹
    æµå¹´æç¤ºæ ‡ç­¾ = tk.Label(æµå¹´å®¹å™¨, text="è¯·å…ˆé€‰æ‹©å¤§è¿ï¼Œæ‰èƒ½æ˜¾ç¤ºå¯¹åº”çš„æµå¹´", font=("Arial", 9), fg="#7e7e7e", bg='#f5f5f1')
    æµå¹´æç¤ºæ ‡ç­¾.pack(pady=(5, 0))

    # å®šä¹‰æ‰€æœ‰äº‹ä»¶å¤„ç†å‡½æ•°
    def åˆ‡æ¢å¤§è¿åˆ—è¡¨æ˜¾ç¤ºçŠ¶æ€(event=None):
        å½“å‰é«˜åº¦ = å¤§è¿åˆ—è¡¨æ¡†.cget('height')   #æ§åˆ¶å¤§è¿åˆ—è¡¨çš„æ˜¾ç¤ºå’Œéšè—
        if å½“å‰é«˜åº¦ == 0:
            å¤§è¿åˆ—è¡¨æ¡†.configure(height=7)  # æ˜¾ç¤ºåˆ—è¡¨
            å¤§è¿æŒ‰é’®.configure(text="å¤§è¿â–²")
            å¤§è¿åˆ—è¡¨æ¡†.pack()  # æ˜¾ç¤ºåˆ—è¡¨æ¡†
        else:
            å¤§è¿åˆ—è¡¨æ¡†.configure(height=0)  # éšè—åˆ—è¡¨
            å¤§è¿æŒ‰é’®.configure(text="å¤§è¿â–¼")


    def æŸ¥çœ‹å¤§è¿ä½œç”¨æŒ‰é’®ç‚¹å‡»():
        global å½“å‰é€‰ä¸­å¤§è¿
        print("ğŸ§ğŸ§ğŸ§ğŸ§ğŸ§ğŸ§ğŸ§æµ‹è¯•ï¼šæŸ¥çœ‹å¤§è¿ä½œç”¨æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼") 
        if not å½“å‰é€‰ä¸­å¤§è¿:
            print("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªå¤§è¿ï¼")
            return

        å¤„ç†å¤§è¿ä½œç”¨()
        æ›´æ–°å¤§è¿ä½œç”¨åçš„ç¯å¢ƒç»“è®º()

    def å¤„ç†å¤§è¿é€‰æ‹©(event):
        global å½“å‰é€‰ä¸­å¤§è¿
        ç‚¹å‡»ç´¢å¼• = å¤§è¿åˆ—è¡¨æ¡†.nearest(event.y)     #å¤„ç†å¤§è¿çš„é€‰æ‹©å’Œå–æ¶ˆé€‰æ‹©
        if ç‚¹å‡»ç´¢å¼• in å¤§è¿åˆ—è¡¨æ¡†.curselection():
            å¤§è¿åˆ—è¡¨æ¡†.selection_clear(ç‚¹å‡»ç´¢å¼•)
            å½“å‰é€‰ä¸­å¤§è¿ = None  # æ¸…é™¤å…¨å±€å˜é‡ä¸­çš„é€‰æ‹©
        else:
            å¤§è¿åˆ—è¡¨æ¡†.selection_clear(0, tk.END)
            å¤§è¿åˆ—è¡¨æ¡†.selection_set(ç‚¹å‡»ç´¢å¼•)
            å½“å‰é€‰ä¸­å¤§è¿ = å¤§è¿åˆ—è¡¨æ¡†.get(ç‚¹å‡»ç´¢å¼•)  
        æ›´æ–°å·²é€‰å¤§è¿æ˜¾ç¤º()
    
    def æ›´æ–°æµå¹´åˆ—è¡¨(event=None):
        global å½“å‰é€‰ä¸­å¤§è¿, æµå¹´å¤©å¹²å­—å…¸, æµå¹´åœ°æ”¯å­—å…¸
        æµå¹´åˆ—è¡¨æ¡†.delete(0, tk.END)
        æµå¹´å¤©å¹²å­—å…¸.clear()
        æµå¹´åœ°æ”¯å­—å…¸.clear()
        if å½“å‰é€‰ä¸­å¤§è¿: 
            æµå¹´æç¤ºæ ‡ç­¾.pack_forget()
            age = int(å½“å‰é€‰ä¸­å¤§è¿.split('å²')[0])

            # è·å–åŸå±€å…ƒç´ åå­—åˆ—è¡¨ï¼ˆç”¨äºåˆ¤æ–­å®ç¥ï¼‰
            åŸå±€å…ƒç´ åå­—åˆ—è¡¨ = []
            for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items():
                # è·³è¿‡ç©ºäº¡çš„åœ°æ”¯
                if 'æ”¯' in ä½ç½® and ä¿¡æ¯.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                    continue
                åå­— = ä¿¡æ¯.get('åå­—')
                if åå­—:
                    åŸå±€å…ƒç´ åå­—åˆ—è¡¨.append(åå­—)

            for dayun in yun.getDaYun()[1:]:
                if dayun.getStartAge() == age:
                    for liunian in dayun.getLiuNian():
                        current_age = liunian.getAge()
                        if age <= current_age < age + 10:
                            year = str(liunian.getYear())
                            æµå¹´å¤©å¹² = liunian.getGanZhi()[0]
                            æµå¹´åœ°æ”¯ = liunian.getGanZhi()[1]
                            ganzhi = æµå¹´å¤©å¹² + æµå¹´åœ°æ”¯
                            æµå¹´ä¿¡æ¯ = f"{current_age}å²  {year}  {ganzhi}"
                            æµå¹´åˆ—è¡¨æ¡†.insert(tk.END, æµå¹´ä¿¡æ¯)

                            # æ›´æ–°æµå¹´å¤©å¹²å­—å…¸
                            if æµå¹´å¤©å¹² not in æµå¹´å¤©å¹²å­—å…¸:
                                æµå¹´å¤©å¹²å­—å…¸[æµå¹´å¤©å¹²] = {"é˜´é˜³å±æ€§": è®¡ç®—é˜´é˜³å±æ€§(æµå¹´å¤©å¹²),
                                    "æ—ºå¼±çŠ¶æ€": "",
                                    "æ˜¯å¦å®ç¥": "å®ç¥" if æµå¹´å¤©å¹² in åŸå±€å…ƒç´ åå­—åˆ—è¡¨ else "è™šç¥"}

                            # æ›´æ–°æµå¹´åœ°æ”¯å­—å…¸
                            if æµå¹´åœ°æ”¯ not in æµå¹´åœ°æ”¯å­—å…¸:
                                æµå¹´åœ°æ”¯å­—å…¸[æµå¹´åœ°æ”¯] = {"é˜´é˜³å±æ€§": è®¡ç®—é˜´é˜³å±æ€§(æµå¹´åœ°æ”¯),
                                    "æ—ºå¼±çŠ¶æ€": "",
                                    "æ˜¯å¦å®ç¥": "å®ç¥" if æµå¹´åœ°æ”¯ in åŸå±€å…ƒç´ åå­—åˆ—è¡¨ else "è™šç¥",
                                    "æ˜¯å¦ç©ºäº¡": "ç©ºäº¡" if æµå¹´åœ°æ”¯ in åœ°æ”¯ç©ºäº¡å­—å…¸[zhus[2]] else "ä¸ç©ºäº¡"}
                                # å¦‚æœåœ°æ”¯ç©ºäº¡ï¼Œæ›´æ–°æ—ºå¼±çŠ¶æ€
                                if æµå¹´åœ°æ”¯å­—å…¸[æµå¹´åœ°æ”¯]["æ˜¯å¦ç©ºäº¡"] == "ç©ºäº¡":
                                    æµå¹´åœ°æ”¯å­—å…¸[æµå¹´åœ°æ”¯]["æ—ºå¼±çŠ¶æ€"] = "ä¸å¼±ä¸æ—º"

            # æ‰“å°è°ƒè¯•ä¿¡æ¯
            #print("\n=== ğŸŒŸğŸŒŸğŸŒŸæµå¹´å¤©å¹²å­—å…¸ ===")
            #for å¤©å¹², å±æ€§ in æµå¹´å¤©å¹²å­—å…¸.items():
                #print(f"{å¤©å¹²}: {å±æ€§}")
            #print("\n=== ğŸŒŸğŸŒŸğŸŒŸæµå¹´åœ°æ”¯å­—å…¸ ===")
            #for åœ°æ”¯, å±æ€§ in æµå¹´åœ°æ”¯å­—å…¸.items():
                #print(f"{åœ°æ”¯}: {å±æ€§}")
        else:
            æµå¹´æç¤ºæ ‡ç­¾.pack()
            æµå¹´åˆ—è¡¨æ¡†.pack_forget()
            æµå¹´æŒ‰é’®.configure(text="æµå¹´â–¼")

    # æµå¹´ç›¸å…³å‡½æ•°
    def åˆ‡æ¢æµå¹´åˆ—è¡¨æ˜¾ç¤ºçŠ¶æ€(event=None):      #æ§åˆ¶æµå¹´åˆ—è¡¨çš„æ˜¾ç¤ºå’Œéšè—
        å½“å‰é«˜åº¦ = æµå¹´åˆ—è¡¨æ¡†.cget('height')        
        if å½“å‰é«˜åº¦ == 0:
            æµå¹´åˆ—è¡¨æ¡†.configure(height=5)
            æµå¹´æŒ‰é’®.configure(text="æµå¹´â–²")
            æµå¹´åˆ—è¡¨æ¡†.pack()
        else:
            æµå¹´åˆ—è¡¨æ¡†.configure(height=0)
            æµå¹´æŒ‰é’®.configure(text="æµå¹´â–¼")
            æµå¹´åˆ—è¡¨æ¡†.pack_forget()
            æ›´æ–°å·²é€‰æµå¹´æ˜¾ç¤º()

    def æ›´æ–°å·²é€‰æµå¹´æ˜¾ç¤º():    #æ›´æ–°å·²é€‰æµå¹´æ ‡ç­¾çš„æ˜¾ç¤ºå†…å®¹
        global å½“å‰é€‰ä¸­æµå¹´åˆ—è¡¨
        é€‰ä¸­é¡¹ = [æµå¹´åˆ—è¡¨æ¡†.get(idx) for idx in æµå¹´åˆ—è¡¨æ¡†.curselection()]
        å½“å‰é€‰ä¸­æµå¹´åˆ—è¡¨ = é€‰ä¸­é¡¹  # ä¿å­˜é€‰ä¸­çš„æµå¹´
        å·²é€‰æµå¹´æ ‡ç­¾.configure(text=", ".join(é€‰ä¸­é¡¹) if é€‰ä¸­é¡¹ else "")

    def å¤„ç†æµå¹´é€‰æ‹©(event):   #å¤„ç†æµå¹´çš„é€‰æ‹©å’Œå–æ¶ˆé€‰æ‹©
        ç‚¹å‡»ç´¢å¼• = æµå¹´åˆ—è¡¨æ¡†.nearest(event.y)
        if ç‚¹å‡»ç´¢å¼• in æµå¹´åˆ—è¡¨æ¡†.curselection():
            æµå¹´åˆ—è¡¨æ¡†.selection_clear(ç‚¹å‡»ç´¢å¼•)
        else:
            æµå¹´åˆ—è¡¨æ¡†.selection_set(ç‚¹å‡»ç´¢å¼•)
        æ›´æ–°å·²é€‰æµå¹´æ˜¾ç¤º()

    # 7.ç»‘å®šäº‹ä»¶
    å¤§è¿æŒ‰é’®.bind('<Button-1>', åˆ‡æ¢å¤§è¿åˆ—è¡¨æ˜¾ç¤ºçŠ¶æ€)
    å¤§è¿åˆ—è¡¨æ¡†.bind('<Button-1>', å¤„ç†å¤§è¿é€‰æ‹©)
    æµå¹´æŒ‰é’®.bind('<Button-1>', åˆ‡æ¢æµå¹´åˆ—è¡¨æ˜¾ç¤ºçŠ¶æ€)
    æµå¹´åˆ—è¡¨æ¡†.bind('<Button-1>', å¤„ç†æµå¹´é€‰æ‹©)



    # æ·»åŠ æŸ¥çœ‹å¤§è¿ä½œç”¨æŒ‰é’®å’ŒæŸ¥çœ‹å¤§è¿æµå¹´ä½œç”¨æŒ‰é’®
    æŸ¥çœ‹å¤§è¿ä½œç”¨æŒ‰é’® = tk.Button(é€‰æ‹©åŒºåŸŸæ¡†æ¶, text="æŸ¥çœ‹å¤§è¿ä½œç”¨",command=æŸ¥çœ‹å¤§è¿ä½œç”¨æŒ‰é’®ç‚¹å‡», font=("Arial", 9), bg='white', relief='solid', borderwidth=1)
    æŸ¥çœ‹å¤§è¿ä½œç”¨æŒ‰é’®.pack(side=tk.LEFT, padx=(20, 0))


     
    def æ›´æ–°å·²é€‰å¤§è¿æ˜¾ç¤º():
        é€‰ä¸­é¡¹ = [å¤§è¿åˆ—è¡¨æ¡†.get(idx) for idx in å¤§è¿åˆ—è¡¨æ¡†.curselection()]    #è·å–ç”¨æˆ·å±•ç¤ºæœ€ç»ˆé€‰æ‹©ç»“æœé€‰çš„å¤§è¿
        å·²é€‰å¤§è¿æ ‡ç­¾.configure(text=", ".join(é€‰ä¸­é¡¹) if é€‰ä¸­é¡¹ else "")   #åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºé€‰çš„å¤§è¿
        æ›´æ–°æµå¹´åˆ—è¡¨()       #æ›´æ–°æµå¹´çš„æ˜¾ç¤º

    def å¤„ç†ç©ºäº¡ç‰¹æ®Šæƒ…å†µ():
        # å¤„ç†å¤§è¿åœ°æ”¯ç©ºäº¡çš„æƒ…å†µ
        for å¤§è¿åœ°æ”¯, å±æ€§å­—å…¸ in å¤§è¿åœ°æ”¯å­—å…¸.items():
            if å±æ€§å­—å…¸['æ˜¯å¦ç©ºäº¡'] == 'ç©ºäº¡':
                # ç©ºäº¡åœ°æ”¯çŠ¶æ€è®¾ä¸ºä¸å¼±ä¸æ—º
                å±æ€§å­—å…¸['æ—ºå¼±çŠ¶æ€'] = 'ä¸å¼±ä¸æ—º'
                å¤§è¿åœ°æ”¯é˜´é˜³ = å±æ€§å­—å…¸['é˜´é˜³å±æ€§']
                # éå†åŸå±€åœ°æ”¯ï¼Œå¤„ç†å¤§è¿ç©ºäº¡åœ°æ”¯å¯¹åŸå±€åœ°æ”¯çš„ä½œç”¨
                for åŸå±€åœ°æ”¯é”® in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']:
                    åŸå±€åœ°æ”¯é˜´é˜³ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŸå±€åœ°æ”¯é”®]['é˜´é˜³å±æ€§']
                    ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿åœ°æ”¯, åŸå±€åœ°æ”¯é”®)
                    # å¦‚æœåŸå±€åœ°æ”¯æ˜¯ç©ºäº¡çš„ï¼Œç›´æ¥è®¾ä¸ºä¸å¼±ä¸æ—ºå¹¶è·³è¿‡
                    if å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŸå±€åœ°æ”¯é”®]['æ˜¯å¦ç©ºäº¡'] == 'ç©ºäº¡':
                        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŸå±€åœ°æ”¯é”®]['æ—ºå¼±çŠ¶æ€'] = 'ä¸å¼±ä¸æ—º'
                        continue
                    # å¤„ç†å¤§è¿ç©ºäº¡åœ°æ”¯å¯¹åŸå±€åœ°æ”¯çš„ä½œç”¨
                    if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»':
                        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŸå±€åœ°æ”¯é”®]['æ—ºå¼±çŠ¶æ€'] = 'æ—º'
                    elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
                        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŸå±€åœ°æ”¯é”®]['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
        # å¤„ç†åŸå±€ç©ºäº¡åœ°æ”¯çš„ç‰¹æ®Šæƒ…å†µ
        for åœ°æ”¯é”®, åœ°æ”¯ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items():
            if åœ°æ”¯ä¿¡æ¯.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                # è®¾ç½®ç©ºäº¡åœ°æ”¯çŠ¶æ€ä¸ºä¸å¼±ä¸æ—º
                åœ°æ”¯ä¿¡æ¯['æ—ºå¼±çŠ¶æ€'] = 'ä¸å¼±ä¸æ—º'
                # æ‰¾åˆ°ä¸ç©ºäº¡åœ°æ”¯åŒæŸ±çš„å¤©å¹²
                å¤©å¹²é”® = åœ°æ”¯é”®.replace('æ”¯', 'å¹²')
                # æ›´æ–°åŒæŸ±å¤©å¹²çš„ç¯å¢ƒçŠ¶æ€
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²é”®]['å†…ç¯å¢ƒ'] = 'ä¸å‰ä¸å‡¶'
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²é”®]['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'ä¸å‰ä¸å‡¶'
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²é”®]['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'ä¸å‰ä¸å‡¶'
                # æ›´æ–°ä»¥è¯¥å¤©å¹²ä¸ºçª—å£çš„æœªç°åç¥çš„ç¯å¢ƒçŠ¶æ€
                å¤©å¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²é”®]['åå­—']
                for æœªç°åç¥, å±æ€§ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
                    if å±æ€§.get('çª—å£åå­—') == å¤©å¹²åå­—:
                        å±æ€§['å†…ç¯å¢ƒ'] = 'ä¸å‰ä¸å‡¶'
                        å±æ€§['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'ä¸å‰ä¸å‡¶'
                        å±æ€§['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'ä¸å‰ä¸å‡¶'
    def å¤„ç†å®ç¥æƒ…å†µ():
        åŸå±€å…ƒç´ åå­—åˆ—è¡¨ = []
        for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items():
            # è·³è¿‡ç©ºäº¡çš„åœ°æ”¯
            if 'æ”¯' in ä½ç½® and ä¿¡æ¯.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                continue
            # ä½¿ç”¨.get()æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰'åå­—'é”®å°±è·³è¿‡
            åå­— = ä¿¡æ¯.get('åå­—')
            if åå­—:  # åªæœ‰å½“åå­—å­˜åœ¨æ—¶æ‰æ·»åŠ 
                åŸå±€å…ƒç´ åå­—åˆ—è¡¨.append(åå­—)
        # æ£€æŸ¥å¤§è¿å¤©å¹²æ˜¯å¦ä¸ºå®ç¥
        for å¤©å¹², å±æ€§ in å¤§è¿å¤©å¹²å­—å…¸.items():
            if å¤©å¹² in åŸå±€å…ƒç´ åå­—åˆ—è¡¨:
                å±æ€§['æ˜¯å¦å®ç¥'] = 'å®ç¥'
            else:
                å±æ€§['æ˜¯å¦å®ç¥'] = 'è™šç¥'
        # æ£€æŸ¥å¤§è¿åœ°æ”¯æ˜¯å¦ä¸ºå®ç¥
        for åœ°æ”¯, å±æ€§ in å¤§è¿åœ°æ”¯å­—å…¸.items():
            if åœ°æ”¯ in åŸå±€å…ƒç´ åå­—åˆ—è¡¨:
                å±æ€§['æ˜¯å¦å®ç¥'] = 'å®ç¥'
            else:
                å±æ€§['æ˜¯å¦å®ç¥'] = 'è™šç¥'
    def æ›´æ–°ç¯å¢ƒå‰å‡¶ç»“è®º():
    # å¤„ç†å·²ç°åç¥çš„å„ç§ç¯å¢ƒ
        for å¤©å¹²é”®, å¤©å¹²ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items():
            if 'å¹²' not in å¤©å¹²é”®:  # è·³è¿‡åœ°æ”¯
                continue
                
            # è·å–ç›¸å…³çŠ¶æ€
            å¤–ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å¤–ç¯å¢ƒ', '')
            å†…ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å†…ç¯å¢ƒ', '')
            å·¦ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å·¦ç¯å¢ƒ', '')
            å³ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å³ç¯å¢ƒ', '')
            å†…ç¯å¢ƒå·¦ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ', '')
            å†…ç¯å¢ƒå³ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å†…ç¯å¢ƒå³ç¯å¢ƒ', '')

            # å¤„ç†å·²ç°åç¥çš„å¤–ç¯å¢ƒ
            if å¤–ç¯å¢ƒ in ['å‰', 'å‡¶']:
                æ—ºå¼±çŠ¶æ€ = å¤©å¹²ä¿¡æ¯.get('æ—ºå¼±çŠ¶æ€', '')
                if 'å¼±' in æ—ºå¼±çŠ¶æ€:  # åŒ…æ‹¬ "å¼±" å’Œ "å¼±+"
                    æ–°ç¯å¢ƒ = 'å‡¶' if å¤–ç¯å¢ƒ == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å¤–ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ

            # å¤„ç†å·²ç°åç¥çš„å†…ç¯å¢ƒ
            if å†…ç¯å¢ƒ in ['å‰', 'å‡¶']:
                åŒæŸ±åœ°æ”¯é”® = å¤©å¹²é”®.replace('å¹²', 'æ”¯')
                åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŒæŸ±åœ°æ”¯é”®].get('æ—ºå¼±çŠ¶æ€', '')
                if 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                    æ–°ç¯å¢ƒ = 'å‡¶' if å†…ç¯å¢ƒ == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å†…ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in åœ°æ”¯æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ

            # å¤„ç†å·²ç°åç¥çš„å·¦ç¯å¢ƒ
            if å·¦ç¯å¢ƒ in ['å‰', 'å‡¶']:
                if å¤©å¹²é”® == 'å¹´å¹²':
                    å‚è€ƒå¤©å¹² = 'æ—¥å¹²'
                else:
                    å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
                    å½“å‰ç´¢å¼• = å¤©å¹²é¡ºåº.index(å¤©å¹²é”®)
                    å‚è€ƒå¤©å¹² = å¤©å¹²é¡ºåº[å½“å‰ç´¢å¼• - 1] if å½“å‰ç´¢å¼• > 0 else ''
                
                if å‚è€ƒå¤©å¹²:
                    å‚è€ƒæ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å‚è€ƒå¤©å¹²].get('æ—ºå¼±çŠ¶æ€', '')
                    if 'å¼±' in å‚è€ƒæ—ºå¼±çŠ¶æ€:
                        æ–°ç¯å¢ƒ = 'å‡¶' if å·¦ç¯å¢ƒ == 'å‰' else 'å‰'
                        å¤©å¹²ä¿¡æ¯['å·¦ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in å‚è€ƒæ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ

            # å¤„ç†å·²ç°åç¥çš„å³ç¯å¢ƒ
            if å³ç¯å¢ƒ in ['å‰', 'å‡¶']:
                if å¤©å¹²é”® == 'æ—¶å¹²':
                    å‚è€ƒå¤©å¹² = 'æœˆå¹²'
                else:
                    å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
                    å½“å‰ç´¢å¼• = å¤©å¹²é¡ºåº.index(å¤©å¹²é”®)
                    å‚è€ƒå¤©å¹² = å¤©å¹²é¡ºåº[å½“å‰ç´¢å¼• + 1] if å½“å‰ç´¢å¼• < 3 else ''
                if å‚è€ƒå¤©å¹²:
                    å‚è€ƒæ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å‚è€ƒå¤©å¹²].get('æ—ºå¼±çŠ¶æ€', '')
                    if 'å¼±' in å‚è€ƒæ—ºå¼±çŠ¶æ€:
                        æ–°ç¯å¢ƒ = 'å‡¶' if å³ç¯å¢ƒ == 'å‰' else 'å‰'
                        å¤©å¹²ä¿¡æ¯['å³ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in å‚è€ƒæ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ

            # å¤„ç†å·²ç°åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒå’Œå³ç¯å¢ƒ
            for ç¯å¢ƒé”®, ç¯å¢ƒå€¼ in [('å†…ç¯å¢ƒå·¦ç¯å¢ƒ', å†…ç¯å¢ƒå·¦ç¯å¢ƒ), ('å†…ç¯å¢ƒå³ç¯å¢ƒ', å†…ç¯å¢ƒå³ç¯å¢ƒ)]:
                if ç¯å¢ƒå€¼ in ['å‰', 'å‡¶']:
                    åŒæŸ±åœ°æ”¯é”® = å¤©å¹²é”®.replace('å¹²', 'æ”¯')
                    åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŒæŸ±åœ°æ”¯é”®].get('æ—ºå¼±çŠ¶æ€', '')
                    if 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        æ–°ç¯å¢ƒ = 'å‡¶' if ç¯å¢ƒå€¼ == 'å‰' else 'å‰'
                        å¤©å¹²ä¿¡æ¯[ç¯å¢ƒé”®] = æ–°ç¯å¢ƒ + "+" if "+" in åœ°æ”¯æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ

            #å¤„ç†æ—¥å¹²ç¯å¢ƒå‰å‡¶ç»“è®º
            if å¤©å¹²é”® == 'æ—¥å¹²': 
                æœˆå¹²æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('æ—ºå¼±çŠ¶æ€', '') 
                if 'å¼±' in æœˆå¹²æ—ºå¼±çŠ¶æ€:     # å¤„ç†æ—¥å¹²å·¦ç¯å¢ƒï¼ˆå—æœˆå¹²å½±å“ï¼‰
                    æ–°ç¯å¢ƒ = 'å‡¶' if å¤©å¹²ä¿¡æ¯['å·¦ç¯å¢ƒ'] == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å·¦ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in æœˆå¹²æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ

                æ—¶å¹²æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¶å¹²'].get('æ—ºå¼±çŠ¶æ€', '')   # å¤„ç†æ—¥å¹²å³ç¯å¢ƒï¼ˆå—æ—¶å¹²å½±å“ï¼‰
                if 'å¼±' in æ—¶å¹²æ—ºå¼±çŠ¶æ€:
                    æ–°ç¯å¢ƒ = 'å‡¶' if å¤©å¹²ä¿¡æ¯['å³ç¯å¢ƒ'] == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å³ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in æ—¶å¹²æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ

                æ—¥æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯'].get('æ—ºå¼±çŠ¶æ€', '')   # å¤„ç†æ—¥å¹²å†…ç¯å¢ƒï¼ˆå—æ—¥æ”¯å½±å“ï¼‰
                if 'å¼±' in æ—¥æ”¯æ—ºå¼±çŠ¶æ€:
                    æ–°ç¯å¢ƒ = 'å‡¶' if å¤©å¹²ä¿¡æ¯['å†…ç¯å¢ƒ'] == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å†…ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in æ—¥æ”¯æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ

                if 'å¼±' in æ—¥æ”¯æ—ºå¼±çŠ¶æ€:
                    for ç¯å¢ƒé”® in ['å†…ç¯å¢ƒå·¦ç¯å¢ƒ', 'å†…ç¯å¢ƒå³ç¯å¢ƒ']:    # å¤„ç†å†…ç¯å¢ƒçš„å·¦å³ç¯å¢ƒï¼ˆä»ç„¶å—æ—¥æ”¯çŠ¶æ€å½±å“ï¼‰
                        æ–°ç¯å¢ƒ = 'å‡¶' if å¤©å¹²ä¿¡æ¯[ç¯å¢ƒé”®] == 'å‰' else 'å‰'
                        å¤©å¹²ä¿¡æ¯[ç¯å¢ƒé”®] = æ–°ç¯å¢ƒ + "+" if "+" in æ—¥æ”¯æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
            
        # å¤„ç†æœªç°åç¥çš„å„ç§ç¯å¢ƒ
        for å¤©å¹²å, å±æ€§å­å­—å…¸ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—', '')
            if not çª—å£åå­—:
                continue
            # è·å–çª—å£åç¥æ‰€åœ¨ä½ç½®å’Œç›¸å…³ä¿¡æ¯
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯['åå­—'] == çª—å£åå­—), None)
            if not çª—å£ä½ç½®:
                continue
            # å¤„ç†æœªç°åç¥çš„å¤–ç¯å¢ƒ
            å¤–ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å¤–ç¯å¢ƒ', '')
            if å¤–ç¯å¢ƒ in ['å‰', 'å‡¶']:
                çª—å£æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '')
                if 'å¼±' in çª—å£æ—ºå¼±çŠ¶æ€:
                    æ–°ç¯å¢ƒ = 'å‡¶' if å¤–ç¯å¢ƒ == 'å‰' else 'å‰'
                    å±æ€§å­å­—å…¸['å¤–ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in çª—å£æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
            # å¤„ç†æœªç°åç¥çš„å†…ç¯å¢ƒ
            å†…ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒ', '')
            if å†…ç¯å¢ƒ in ['å‰', 'å‡¶']:
                çª—å£åœ°æ”¯é”® = çª—å£ä½ç½®.replace('å¹²', 'æ”¯')
                åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£åœ°æ”¯é”®].get('æ—ºå¼±çŠ¶æ€', '')
                if 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                    æ–°ç¯å¢ƒ = 'å‡¶' if å†…ç¯å¢ƒ == 'å‰' else 'å‰'
                    å±æ€§å­å­—å…¸['å†…ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in åœ°æ”¯æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
            # å¤„ç†æœªç°åç¥çš„å·¦ç¯å¢ƒ
            å·¦ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å·¦ç¯å¢ƒ', '')
            if å·¦ç¯å¢ƒ in ['å‰', 'å‡¶']:
                if çª—å£ä½ç½® == 'å¹´å¹²':
                    å‚è€ƒæ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²'].get('æ—ºå¼±çŠ¶æ€', '')
                else:
                    å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
                    çª—å£ç´¢å¼• = å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®)
                    å·¦è¾¹ä½ç½® = å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• - 1] if çª—å£ç´¢å¼• > 0 else None
                    å‚è€ƒæ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å·¦è¾¹ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '') if å·¦è¾¹ä½ç½® else ''

                if 'å¼±' in å‚è€ƒæ—ºå¼±çŠ¶æ€:
                    æ–°ç¯å¢ƒ = 'å‡¶' if å·¦ç¯å¢ƒ == 'å‰' else 'å‰'
                    å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in å‚è€ƒæ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
            # å¤„ç†æœªç°åç¥çš„å³ç¯å¢ƒ
            å³ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å³ç¯å¢ƒ', '')
            if å³ç¯å¢ƒ in ['å‰', 'å‡¶']:
                if çª—å£ä½ç½® == 'æ—¶å¹²':
                    å‚è€ƒæ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('æ—ºå¼±çŠ¶æ€', '')
                else:
                    å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
                    çª—å£ç´¢å¼• = å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®)
                    å³è¾¹ä½ç½® = å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• + 1] if çª—å£ç´¢å¼• < 3 else None
                    å‚è€ƒæ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å³è¾¹ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '') if å³è¾¹ä½ç½® else ''

                if 'å¼±' in å‚è€ƒæ—ºå¼±çŠ¶æ€:
                    æ–°ç¯å¢ƒ = 'å‡¶' if å³ç¯å¢ƒ == 'å‰' else 'å‰'
                    å±æ€§å­å­—å…¸['å³ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + "+" if "+" in å‚è€ƒæ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
            # å¤„ç†æœªç°åç¥çš„å†…ç¯å¢ƒçš„å·¦å³ç¯å¢ƒ
            for ç¯å¢ƒé”®, ç‰¹æ®Šä½ç½® in [('å†…ç¯å¢ƒå·¦ç¯å¢ƒ', 'å¹´å¹²'), ('å†…ç¯å¢ƒå³ç¯å¢ƒ', 'æ—¶å¹²')]:
                ç¯å¢ƒå€¼ = å±æ€§å­å­—å…¸.get(ç¯å¢ƒé”®, '')
                if ç¯å¢ƒå€¼ in ['å‰', 'å‡¶']:
                    çª—å£åœ°æ”¯é”® = çª—å£ä½ç½®.replace('å¹²', 'æ”¯')
                    if çª—å£ä½ç½® == ç‰¹æ®Šä½ç½®:
                        å‚è€ƒåœ°æ”¯é”® = 'æ—¥æ”¯'
                    else:
                        åœ°æ”¯é¡ºåº = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']
                        çª—å£ç´¢å¼• = åœ°æ”¯é¡ºåº.index(çª—å£åœ°æ”¯é”®)
                        å‚è€ƒç´¢å¼• = çª—å£ç´¢å¼• - 1 if 'å·¦' in ç¯å¢ƒé”® else çª—å£ç´¢å¼• + 1
                        å‚è€ƒåœ°æ”¯é”® = åœ°æ”¯é¡ºåº[å‚è€ƒç´¢å¼•] if 0 <= å‚è€ƒç´¢å¼• < 4 else None
                    if å‚è€ƒåœ°æ”¯é”®:
                        å‚è€ƒæ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å‚è€ƒåœ°æ”¯é”®].get('æ—ºå¼±çŠ¶æ€', '')
                        if 'å¼±' in å‚è€ƒæ—ºå¼±çŠ¶æ€:
                            æ–°ç¯å¢ƒ = 'å‡¶' if ç¯å¢ƒå€¼ == 'å‰' else 'å‰'
                            å±æ€§å­å­—å…¸[ç¯å¢ƒé”®] = æ–°ç¯å¢ƒ + "+" if "+" in å‚è€ƒæ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
    def æ›´æ–°å¹²æ”¯æ—ºå¼±çŠ¶æ€(å¤§è¿å¹²æ”¯, åŸå±€å¹²æ”¯, å¤§è¿é˜´é˜³, åŸå±€é˜´é˜³):
        ç”Ÿæ‰¶å—åˆ¶å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿å¹²æ”¯, åŸå±€å¹²æ”¯)
        æ˜¯åŒæ€§ä½œç”¨ = (å¤§è¿é˜´é˜³ == åŸå±€é˜´é˜³)
        
        # åˆ¤æ–­æ˜¯å¦ä¸ºå®ç¥
        æ˜¯å®ç¥ = False
        if å¤§è¿å¹²æ”¯ in å¤§è¿å¤©å¹²å­—å…¸:
            æ˜¯å®ç¥ = å¤§è¿å¤©å¹²å­—å…¸[å¤§è¿å¹²æ”¯]['æ˜¯å¦å®ç¥'] == 'å®ç¥'
        elif å¤§è¿å¹²æ”¯ in å¤§è¿åœ°æ”¯å­—å…¸:
            æ˜¯å®ç¥ = å¤§è¿åœ°æ”¯å­—å…¸[å¤§è¿å¹²æ”¯]['æ˜¯å¦å®ç¥'] == 'å®ç¥'
        
        # ç¡®å®šåŸºç¡€æ—ºå¼±çŠ¶æ€
        if ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
            åŸºç¡€çŠ¶æ€ = "æ—º" if æ˜¯åŒæ€§ä½œç”¨ else "å¼±"
        elif ç”Ÿæ‰¶å—åˆ¶å…³ç³» == 'å—åˆ¶å…³ç³»':
            åŸºç¡€çŠ¶æ€ = "å¼±" if æ˜¯åŒæ€§ä½œç”¨ else "æ—º"
        
        # å¦‚æœæ˜¯å®ç¥ï¼Œæ·»åŠ "+"æ ‡è®°
        æœ€ç»ˆçŠ¶æ€ = åŸºç¡€çŠ¶æ€ + "+" if æ˜¯å®ç¥ else åŸºç¡€çŠ¶æ€
        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŸå±€å¹²æ”¯]['æ—ºå¼±çŠ¶æ€'] = æœ€ç»ˆçŠ¶æ€ 
    def å¤„ç†å¤§è¿ä½œç”¨():     # æ›´æ–°åŸå±€å¹²æ”¯çš„æ—ºå¼±çŠ¶æ€
        global å½“å‰é€‰ä¸­å¤§è¿
        if å½“å‰é€‰ä¸­å¤§è¿:
            print(f"ğŸ¥”ğŸ¥”ğŸ¥”é€‰ä¸­å¤§è¿: {å½“å‰é€‰ä¸­å¤§è¿}")
            print("ğŸ¥”ğŸ¥”ğŸ¥”å¼€å§‹å¤„ç†å¤§è¿ä½œç”¨â€¦â€¦")
            å¤„ç†ç©ºäº¡ç‰¹æ®Šæƒ…å†µ()
            å¤„ç†å®ç¥æƒ…å†µ() 
            å¤§è¿å¹²æ”¯ = å¤§è¿ä¿¡æ¯.split()[-1]
            å¤§è¿å¤©å¹² = å¤§è¿å¹²æ”¯[0]
            å¤§è¿åœ°æ”¯ = å¤§è¿å¹²æ”¯[1]
            # æ·»åŠ å®‰å…¨æ£€æŸ¥
            if å¤§è¿å¤©å¹² not in å¤§è¿å¤©å¹²å­—å…¸:
                print(f"è­¦å‘Šï¼š{å¤§è¿å¤©å¹²}ä¸åœ¨å¤§è¿å¤©å¹²å­—å…¸ä¸­")
            if å¤§è¿åœ°æ”¯ not in å¤§è¿åœ°æ”¯å­—å…¸:
                print(f"è­¦å‘Šï¼š{å¤§è¿åœ°æ”¯}ä¸åœ¨å¤§è¿åœ°æ”¯å­—å…¸ä¸­")
            å¤§è¿å¤©å¹²é˜´é˜³ = å¤§è¿å¤©å¹²å­—å…¸[å¤§è¿å¤©å¹²]['é˜´é˜³å±æ€§']
            å¤§è¿åœ°æ”¯é˜´é˜³ = å¤§è¿åœ°æ”¯å­—å…¸[å¤§è¿åœ°æ”¯]['é˜´é˜³å±æ€§']
            for åŸå±€å¤©å¹² in ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']:
                åŸå±€å¤©å¹²é˜´é˜³ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŸå±€å¤©å¹²]['é˜´é˜³å±æ€§']
                æ›´æ–°å¹²æ”¯æ—ºå¼±çŠ¶æ€(å¤§è¿å¤©å¹², åŸå±€å¤©å¹², å¤§è¿å¤©å¹²é˜´é˜³, åŸå±€å¤©å¹²é˜´é˜³)
            for åŸå±€åœ°æ”¯ in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']:
                åŸå±€åœ°æ”¯é˜´é˜³ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŸå±€åœ°æ”¯]['é˜´é˜³å±æ€§']
                æ›´æ–°å¹²æ”¯æ—ºå¼±çŠ¶æ€(å¤§è¿åœ°æ”¯, åŸå±€åœ°æ”¯, å¤§è¿åœ°æ”¯é˜´é˜³, åŸå±€åœ°æ”¯é˜´é˜³)
        else:
            print("ğŸ¥”ğŸ¥”ğŸ¥”æ²¡æœ‰é€‰ä¸­ä»»ä½•å¤§è¿ï¼")  # è°ƒè¯•è¯­å¥
        æ›´æ–°ç¯å¢ƒå‰å‡¶ç»“è®º()

    def æ›´æ–°å¤§è¿ä½œç”¨åçš„ç¯å¢ƒç»“è®º():
        import contextlib
        global å½“å‰é€‰ä¸­å¤§è¿
        if not å½“å‰é€‰ä¸­å¤§è¿:
            print("ğŸ¥”ğŸ¥”ğŸ¥”è¯·å…ˆé€‰æ‹©ä¸€ä¸ªå¤§è¿ï¼")  # è°ƒè¯•è¯­å¥
            return
        å¤§è¿å¹²æ”¯ = å½“å‰é€‰ä¸­å¤§è¿.split()[-1]
        å¤§è¿å¤©å¹² = å¤§è¿å¹²æ”¯[0]
        å¤§è¿åœ°æ”¯ = å¤§è¿å¹²æ”¯[1]
        
        print(f"ğŸ‘¼ğŸ‘¼ğŸ‘¼\n{å¤§è¿å¹²æ”¯}å¤§è¿ä½œç”¨åˆ°åŸå±€åï¼ŒåŸå±€å„ç§ç¯å¢ƒçš„ç»“è®ºå¦‚ä¸‹ï¼š")
        
        print("\n=== ğŸ˜ å·²ç°åç¥çš„ç¯å¢ƒ ===")
        with contextlib.redirect_stdout(None):
            å¤–ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶()
            å†…ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶()
            å·¦ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶()
            å³ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶()
            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒå‰å‡¶()
            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå³ç¯å¢ƒå‰å‡¶()
        for å¤©å¹² in ['æ—¶å¹²', 'æœˆå¹²', 'å¹´å¹²']:
            å¤©å¹²åå­— = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['åå­—']
            åç¥ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²]['åç¥']
            æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²].get('æ—ºå¼±çŠ¶æ€', '')
            å¤–ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²].get('å¤–ç¯å¢ƒ', '')
            å†…ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²].get('å†…ç¯å¢ƒ', '')
            å·¦ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²].get('å·¦ç¯å¢ƒ', '')
            å³ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²].get('å³ç¯å¢ƒ', '')
            å†…ç¯å¢ƒå·¦ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²].get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ', '')
            å†…ç¯å¢ƒå³ç¯å¢ƒ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²].get('å†…ç¯å¢ƒå³ç¯å¢ƒ', '')
            åŒæŸ±åœ°æ”¯é”® = å¤©å¹².replace('å¹²', 'æ”¯')
            åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŒæŸ±åœ°æ”¯é”®].get('æ—ºå¼±çŠ¶æ€', '')
            
            # å¤„ç†å¤–ç¯å¢ƒ
            if æ—ºå¼±çŠ¶æ€:
                if 'å¼±' in æ—ºå¼±çŠ¶æ€:
                    æ–°ç¯å¢ƒ = 'å‡¶' if å¤–ç¯å¢ƒ == 'å‰' else 'å‰'
                    if '+' in æ—ºå¼±çŠ¶æ€:
                        æ–°ç¯å¢ƒ += '+'
                else:
                    æ–°ç¯å¢ƒ = å¤–ç¯å¢ƒ
                    if '+' in æ—ºå¼±çŠ¶æ€:
                        æ–°ç¯å¢ƒ += '+'
            else:
                æ–°ç¯å¢ƒ = å¤–ç¯å¢ƒ
            
            # å¤„ç†å†…ç¯å¢ƒ
            if åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                if 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                    æ–°å†…ç¯å¢ƒ = 'å‡¶' if å†…ç¯å¢ƒ == 'å‰' else 'å‰'
                    if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        æ–°å†…ç¯å¢ƒ += '+'
                else:
                    æ–°å†…ç¯å¢ƒ = å†…ç¯å¢ƒ
                    if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        æ–°å†…ç¯å¢ƒ += '+'
            else:
                æ–°å†…ç¯å¢ƒ = å†…ç¯å¢ƒ
            
            # å¤„ç†å·¦ç¯å¢ƒ
            if æ—ºå¼±çŠ¶æ€:
                if 'å¼±' in æ—ºå¼±çŠ¶æ€:
                    æ–°å·¦ç¯å¢ƒ = 'å‡¶' if å·¦ç¯å¢ƒ == 'å‰' else 'å‰'
                    if '+' in æ—ºå¼±çŠ¶æ€:
                        æ–°å·¦ç¯å¢ƒ += '+'
                else:
                    æ–°å·¦ç¯å¢ƒ = å·¦ç¯å¢ƒ
                    if '+' in æ—ºå¼±çŠ¶æ€:
                        æ–°å·¦ç¯å¢ƒ += '+'
            else:
                æ–°å·¦ç¯å¢ƒ = å·¦ç¯å¢ƒ
            
            # å¤„ç†å³ç¯å¢ƒ
            if æ—ºå¼±çŠ¶æ€:
                if 'å¼±' in æ—ºå¼±çŠ¶æ€:
                    æ–°å³ç¯å¢ƒ = 'å‡¶' if å³ç¯å¢ƒ == 'å‰' else 'å‰'
                    if '+' in æ—ºå¼±çŠ¶æ€:
                        æ–°å³ç¯å¢ƒ += '+'
                else:
                    æ–°å³ç¯å¢ƒ = å³ç¯å¢ƒ
                    if '+' in æ—ºå¼±çŠ¶æ€:
                        æ–°å³ç¯å¢ƒ += '+'
            else:
                æ–°å³ç¯å¢ƒ = å³ç¯å¢ƒ
            
            # å¤„ç†å†…ç¯å¢ƒå·¦ç¯å¢ƒ
            if åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                if 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                    æ–°å†…ç¯å¢ƒå·¦ç¯å¢ƒ = 'å‡¶' if å†…ç¯å¢ƒå·¦ç¯å¢ƒ == 'å‰' else 'å‰'
                    if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        æ–°å†…ç¯å¢ƒå·¦ç¯å¢ƒ += '+'
                else:
                    æ–°å†…ç¯å¢ƒå·¦ç¯å¢ƒ = å†…ç¯å¢ƒå·¦ç¯å¢ƒ
                    if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        æ–°å†…ç¯å¢ƒå·¦ç¯å¢ƒ += '+'
            else:
                æ–°å†…ç¯å¢ƒå·¦ç¯å¢ƒ = å†…ç¯å¢ƒå·¦ç¯å¢ƒ
                
            # å¤„ç†å†…ç¯å¢ƒå³ç¯å¢ƒ
            if åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                if 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                    æ–°å†…ç¯å¢ƒå³ç¯å¢ƒ = 'å‡¶' if å†…ç¯å¢ƒå³ç¯å¢ƒ == 'å‰' else 'å‰'
                    if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        æ–°å†…ç¯å¢ƒå³ç¯å¢ƒ += '+'
                else:
                    æ–°å†…ç¯å¢ƒå³ç¯å¢ƒ = å†…ç¯å¢ƒå³ç¯å¢ƒ
                    if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        æ–°å†…ç¯å¢ƒå³ç¯å¢ƒ += '+'
            else:
                æ–°å†…ç¯å¢ƒå³ç¯å¢ƒ = å†…ç¯å¢ƒå³ç¯å¢ƒ

            print(f"\nã€ŠåŸå±€å·²ç°åç¥å¤–ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å¤–ç¯å¢ƒç»“è®º[å¤©å¹²]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å†…ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å†…ç¯å¢ƒç»“è®º[å¤©å¹²]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å·¦ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å·¦ç¯å¢ƒç»“è®º[å¤©å¹²]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å³ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å³ç¯å¢ƒç»“è®º[å¤©å¹²]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å†…ç¯å¢ƒå·¦ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º[å¤©å¹²]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å†…ç¯å¢ƒå³ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º[å¤©å¹²]['ä½œç”¨è·¯å¾„']}")

                
            # åˆ¤æ–­æ˜¯å¦ä¸ºå®ç¥
            æ˜¯å®ç¥ = False
            if å¤§è¿å¹²æ”¯[0] in å¤§è¿å¤©å¹²å­—å…¸:
                æ˜¯å®ç¥ = å¤§è¿å¤©å¹²å­—å…¸[å¤§è¿å¹²æ”¯[0]]['æ˜¯å¦å®ç¥'] == 'å®ç¥'
            
            print(f"\nã€Šå¤§è¿ä½œç”¨åçš„å¤–ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çŠ¶æ€ä¸ºã€{æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å¤–ç¯å¢ƒä¸ºã€{æ–°ç¯å¢ƒ}ã€‘")
            
            print(f"\nã€Šå¤§è¿ä½œç”¨åçš„å†…ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{åŒæŸ±åœ°æ”¯é”®}ã€‘çŠ¶æ€ä¸ºã€{åœ°æ”¯æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒä¸ºã€{æ–°å†…ç¯å¢ƒ}ã€‘")
            
            print(f"\nã€Šå¤§è¿ä½œç”¨åçš„å·¦ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çŠ¶æ€ä¸ºã€{æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å·¦ç¯å¢ƒä¸ºã€{æ–°å·¦ç¯å¢ƒ}ã€‘")

            print(f"\nã€Šå¤§è¿ä½œç”¨åçš„å³ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çŠ¶æ€ä¸ºã€{æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å³ç¯å¢ƒä¸ºã€{æ–°å³ç¯å¢ƒ}ã€‘")

            print(f"\nã€Šå¤§è¿ä½œç”¨åçš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{åŒæŸ±åœ°æ”¯é”®}ã€‘çŠ¶æ€ä¸ºã€{åœ°æ”¯æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒå·¦ç¯å¢ƒä¸ºã€{æ–°å†…ç¯å¢ƒå·¦ç¯å¢ƒ}ã€‘")
            
            print(f"\nã€Šå¤§è¿ä½œç”¨åçš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{åŒæŸ±åœ°æ”¯é”®}ã€‘çŠ¶æ€ä¸ºã€{åœ°æ”¯æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒå³ç¯å¢ƒä¸ºã€{æ–°å†…ç¯å¢ƒå³ç¯å¢ƒ}ã€‘")
            
        else:
            print(f" âˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å¤–ç¯å¢ƒä¸ºã€{å¤–ç¯å¢ƒ}ã€‘")
            print(f" âˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒä¸ºã€{å†…ç¯å¢ƒ}ã€‘")
            print(f" âˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å·¦ç¯å¢ƒä¸ºã€{å·¦ç¯å¢ƒ}ã€‘")
            print(f" âˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å³ç¯å¢ƒä¸ºã€{å³ç¯å¢ƒ}ã€‘")
            print(f" âˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒå·¦ç¯å¢ƒä¸ºã€{å†…ç¯å¢ƒå·¦ç¯å¢ƒ}ã€‘")
            print(f" âˆ´ã€{å¤©å¹²}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒå³ç¯å¢ƒä¸ºã€{å†…ç¯å¢ƒå³ç¯å¢ƒ}ã€‘")




        print("\n=== ğŸ«¥ æœªç°åç¥çš„ç¯å¢ƒ ===")
        with contextlib.redirect_stdout(None):
            æœªç°å¤–ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶()
            æœªç°å†…ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶()
            æœªç°å·¦ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶()
            æœªç°å³ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶()
            æœªç°å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ()
            æœªç°å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒ()

        # è·å–æ‰€æœ‰æœªç°åç¥çš„åˆ—è¡¨
        æœªç°åç¥åˆ—è¡¨ = list(æœªç°æ­£ååç¥ä¸»å­—å…¸.keys())

        # å¤„ç†åœ°æ”¯æ—ºå¼±çŠ¶æ€å¯¹æœªç°åç¥å†…ç¯å¢ƒçš„å½±å“
        for å¤©å¹²å in æœªç°åç¥åˆ—è¡¨:
            å±æ€§å­å­—å…¸ = æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²å]
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—')
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥') 
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), None)  # æ‰¾åˆ°çª—å£åç¥å¯¹åº”çš„ä½ç½®
            åŒæŸ±åœ°æ”¯é”® = çª—å£ä½ç½®.replace('å¹²', 'æ”¯') if çª—å£ä½ç½® else ''
            åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŒæŸ±åœ°æ”¯é”®].get('æ—ºå¼±çŠ¶æ€') if åŒæŸ±åœ°æ”¯é”® else ''
            å¤©å¹²æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®].get('æ—ºå¼±çŠ¶æ€') if çª—å£ä½ç½® else ''
            if çª—å£ä½ç½®:
                åœ°æ”¯ä½ç½® = çª—å£ä½ç½®.replace('å¹²', 'æ”¯')   # è·å–åŒæŸ±åœ°æ”¯çš„ä½ç½®
                åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åœ°æ”¯ä½ç½®].get('æ—ºå¼±çŠ¶æ€')  # è·å–åœ°æ”¯çš„æ—ºå¼±çŠ¶æ€
                å¤©å¹²æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®].get('æ—ºå¼±çŠ¶æ€') 
                

                # å¦‚æœçª—å£åç¥çš„å¤©å¹²æ˜¯å¼±ï¼Œåˆ™åè½¬å¤–ç¯å¢ƒå‰å‡¶
                if 'å¼±' in å¤©å¹²æ—ºå¼±çŠ¶æ€:
                    åŸå¤–ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å¤–ç¯å¢ƒ', '')
                    if åŸå¤–ç¯å¢ƒ == 'å‰':
                        å±æ€§å­å­—å…¸['å¤–ç¯å¢ƒ'] = 'å‡¶'
                    elif åŸå¤–ç¯å¢ƒ == 'å‡¶':
                        å±æ€§å­å­—å…¸['å¤–ç¯å¢ƒ'] = 'å‰'
                    # å¦‚æœå¤©å¹²æ—ºå¼±çŠ¶æ€å¸¦æœ‰'+'ï¼Œåˆ™åœ¨æ–°å†…ç¯å¢ƒåä¹ŸåŠ ä¸Š'+'
                    if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        å±æ€§å­å­—å…¸['å¤–ç¯å¢ƒ'] += '+'

                # å¦‚æœåœ°æ”¯æ˜¯å¼±ï¼Œåˆ™åè½¬å†…ç¯å¢ƒå‰å‡¶
                if 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                    åŸå†…ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒ', '')
                    if åŸå†…ç¯å¢ƒ == 'å‰':
                        å±æ€§å­å­—å…¸['å†…ç¯å¢ƒ'] = 'å‡¶'
                    elif åŸå†…ç¯å¢ƒ == 'å‡¶':
                        å±æ€§å­å­—å…¸['å†…ç¯å¢ƒ'] = 'å‰'
                    # å¦‚æœåœ°æ”¯æ—ºå¼±çŠ¶æ€å¸¦æœ‰'+'ï¼Œåˆ™åœ¨æ–°å†…ç¯å¢ƒåä¹ŸåŠ ä¸Š'+'
                    if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        å±æ€§å­å­—å…¸['å†…ç¯å¢ƒ'] += '+'

                # å¤„ç†æœªç°åç¥å·¦ç¯å¢ƒ
                å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
                çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, å¹²å in zip(å¤©å¹²é¡ºåº, æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨) if å¹²å == çª—å£åå­—), None)
                if çª—å£ä½ç½® == 'å¹´å¹²':
                    # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åç¥åœ¨å¹´å¹²
                    æœˆå¹²æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('æ—ºå¼±çŠ¶æ€', '')
                    æ—¥å¹²æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²'].get('æ—ºå¼±çŠ¶æ€', '')
                    
                    # æ ¹æ®æ—¥å¹²å’Œæœˆå¹²çš„æ—ºå¼±çŠ¶æ€è°ƒæ•´å·¦ç¯å¢ƒ
                    if ('å¼±' in æ—¥å¹²æ—ºå¼±çŠ¶æ€ and 'å¼±' in æœˆå¹²æ—ºå¼±çŠ¶æ€):
                        åŸå·¦ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å·¦ç¯å¢ƒ', '')
                        if åŸå·¦ç¯å¢ƒ == 'å‰':
                            å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'] = 'å‡¶'
                        elif åŸå·¦ç¯å¢ƒ == 'å‡¶':
                            å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'] = 'å‰'
                        # å¦‚æœä¸¤ä¸ªæ—ºå¼±çŠ¶æ€éƒ½å¸¦æœ‰'+'ï¼Œåˆ™åœ¨æ–°å·¦ç¯å¢ƒåä¹ŸåŠ ä¸Š'+'
                        if '+' in æ—¥å¹²æ—ºå¼±çŠ¶æ€ and '+' in æœˆå¹²æ—ºå¼±çŠ¶æ€:
                            å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'] += '+'
                else:
                    # æ™®é€šæƒ…å†µï¼šæ‰¾åˆ°å·¦ä¾§ä½ç½®çš„æ—ºå¼±çŠ¶æ€
                    çª—å£ç´¢å¼• = å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®) if çª—å£ä½ç½® else -1
                    if çª—å£ç´¢å¼• > 0:
                        å·¦ä¾§ä½ç½® = å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• - 1]
                        å·¦ä¾§æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å·¦ä¾§ä½ç½®].get('æ—ºå¼±çŠ¶æ€')
                        
                        # å¦‚æœå·¦ä¾§ä½ç½®çš„æ—ºå¼±çŠ¶æ€æ˜¯'å¼±'æˆ–'å¼±+'ï¼Œåè½¬å·¦ç¯å¢ƒç»“è®º
                        if 'å¼±' in å·¦ä¾§æ—ºå¼±çŠ¶æ€:
                            åŸå·¦ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å·¦ç¯å¢ƒ')
                            if åŸå·¦ç¯å¢ƒ == 'å‰':
                                å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'] = 'å‡¶'
                            elif åŸå·¦ç¯å¢ƒ == 'å‡¶':
                                å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'] = 'å‰'
                            # å¦‚æœæ—ºå¼±çŠ¶æ€å¸¦æœ‰'+'ï¼Œåˆ™åœ¨æ–°å·¦ç¯å¢ƒåä¹ŸåŠ ä¸Š'+'
                            if '+' in å·¦ä¾§æ—ºå¼±çŠ¶æ€:
                                å±æ€§å­å­—å…¸['å·¦ç¯å¢ƒ'] += '+'

                # å¤„ç†æœªç°åç¥å³ç¯å¢ƒ
                if çª—å£ä½ç½® == 'æ—¶å¹²':
                    # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åç¥åœ¨æ—¶å¹²
                    æœˆå¹²æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('æ—ºå¼±çŠ¶æ€')
                    æ—¥å¹²æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²'].get('æ—ºå¼±çŠ¶æ€')
                    
                    # æ ¹æ®æœˆå¹²å’Œæ—¥å¹²çš„æ—ºå¼±çŠ¶æ€è°ƒæ•´å³ç¯å¢ƒ
                    if ('å¼±' in æœˆå¹²æ—ºå¼±çŠ¶æ€ and 'å¼±' in æ—¥å¹²æ—ºå¼±çŠ¶æ€):
                        åŸå³ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å³ç¯å¢ƒ')
                        if åŸå³ç¯å¢ƒ == 'å‰':
                            å±æ€§å­å­—å…¸['å³ç¯å¢ƒ'] = 'å‡¶'
                        elif åŸå³ç¯å¢ƒ == 'å‡¶':
                            å±æ€§å­å­—å…¸['å³ç¯å¢ƒ'] = 'å‰'
                        # å¦‚æœä¸¤ä¸ªæ—ºå¼±çŠ¶æ€éƒ½å¸¦æœ‰'+'ï¼Œåˆ™åœ¨æ–°å³ç¯å¢ƒåä¹ŸåŠ ä¸Š'+'
                        if '+' in æœˆå¹²æ—ºå¼±çŠ¶æ€ and '+' in æ—¥å¹²æ—ºå¼±çŠ¶æ€:
                            å±æ€§å­å­—å…¸['å³ç¯å¢ƒ'] += '+'
                else:
                    # æ™®é€šæƒ…å†µï¼šæ‰¾åˆ°å³ä¾§ä½ç½®çš„æ—ºå¼±çŠ¶æ€
                    çª—å£ç´¢å¼• = å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®) if çª—å£ä½ç½® else -1
                    if çª—å£ç´¢å¼• < len(å¤©å¹²é¡ºåº) - 1:
                        å³ä¾§ä½ç½® = å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• + 1]
                        å³ä¾§æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å³ä¾§ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '')             
                        # å¦‚æœå³ä¾§ä½ç½®çš„æ—ºå¼±çŠ¶æ€æ˜¯'å¼±'æˆ–'å¼±+'ï¼Œåè½¬å³ç¯å¢ƒç»“è®º
                        if 'å¼±' in å³ä¾§æ—ºå¼±çŠ¶æ€:
                            åŸå³ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å³ç¯å¢ƒ', '')
                            if åŸå³ç¯å¢ƒ == 'å‰':
                                å±æ€§å­å­—å…¸['å³ç¯å¢ƒ'] = 'å‡¶'
                            elif åŸå³ç¯å¢ƒ == 'å‡¶':
                                å±æ€§å­å­—å…¸['å³ç¯å¢ƒ'] = 'å‰'
                            # å¦‚æœæ—ºå¼±çŠ¶æ€å¸¦æœ‰'+'ï¼Œåˆ™åœ¨æ–°å³ç¯å¢ƒåä¹ŸåŠ ä¸Š'+'
                            if '+' in å³ä¾§æ—ºå¼±çŠ¶æ€:
                                å±æ€§å­å­—å…¸['å³ç¯å¢ƒ'] += '+'  

                # å¤„ç†æœªç°åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ
                if çª—å£ä½ç½® == 'å¹´å¹²':
                    # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åœ¨å¹´å¹²
                    æ—¥æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯'].get('æ—ºå¼±çŠ¶æ€', '')
                    æœˆæ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯'].get('æ—ºå¼±çŠ¶æ€', '')
                    
                    if ('å¼±' in æ—¥æ”¯æ—ºå¼±çŠ¶æ€ and 'å¼±' in æœˆæ”¯æ—ºå¼±çŠ¶æ€):
                        åŸå†…ç¯å¢ƒå·¦ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ', '')
                        if åŸå†…ç¯å¢ƒå·¦ç¯å¢ƒ == 'å‰':
                            å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‡¶'
                        elif åŸå†…ç¯å¢ƒå·¦ç¯å¢ƒ == 'å‡¶':
                            å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‰'
                        if '+' in æ—¥æ”¯æ—ºå¼±çŠ¶æ€ and '+' in æœˆæ”¯æ—ºå¼±çŠ¶æ€:
                            å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] += '+'
                else:
                    # æ™®é€šæƒ…å†µ
                    åœ°æ”¯é¡ºåº = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']
                    åŒæŸ±åœ°æ”¯ = çª—å£ä½ç½®.replace('å¹²', 'æ”¯')
                    åœ°æ”¯ç´¢å¼• = åœ°æ”¯é¡ºåº.index(åŒæŸ±åœ°æ”¯)
                    if åœ°æ”¯ç´¢å¼• > 0:
                        å·¦ä¾§åœ°æ”¯ä½ç½® = åœ°æ”¯é¡ºåº[åœ°æ”¯ç´¢å¼• - 1]
                        å·¦ä¾§åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å·¦ä¾§åœ°æ”¯ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '')
                        if 'å¼±' in å·¦ä¾§åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                            åŸå†…ç¯å¢ƒå·¦ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ', '')
                            if åŸå†…ç¯å¢ƒå·¦ç¯å¢ƒ == 'å‰':
                                å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‡¶'
                            elif åŸå†…ç¯å¢ƒå·¦ç¯å¢ƒ == 'å‡¶':
                                å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = 'å‰'
                            if '+' in å·¦ä¾§åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                                å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] += '+'

            # å¤„ç†æœªç°åç¥çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒ
            if çª—å£ä½ç½® == 'æ—¶å¹²':
                # ç‰¹æ®Šæƒ…å†µï¼šçª—å£åœ¨æ—¶å¹²
                æœˆæ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯'].get('æ—ºå¼±çŠ¶æ€', '')
                æ—¥æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯'].get('æ—ºå¼±çŠ¶æ€', '')
                
                if ('å¼±' in æœˆæ”¯æ—ºå¼±çŠ¶æ€ and 'å¼±' in æ—¥æ”¯æ—ºå¼±çŠ¶æ€):
                    åŸå†…ç¯å¢ƒå³ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå³ç¯å¢ƒ', '')
                    if åŸå†…ç¯å¢ƒå³ç¯å¢ƒ == 'å‰':
                        å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‡¶'
                    elif åŸå†…ç¯å¢ƒå³ç¯å¢ƒ == 'å‡¶':
                        å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‰'
                    if '+' in æœˆæ”¯æ—ºå¼±çŠ¶æ€ and '+' in æ—¥æ”¯æ—ºå¼±çŠ¶æ€:
                        å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'] += '+'
            else:
                # æ™®é€šæƒ…å†µ
                åœ°æ”¯é¡ºåº = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']
                åŒæŸ±åœ°æ”¯ = çª—å£ä½ç½®.replace('å¹²', 'æ”¯')
                åœ°æ”¯ç´¢å¼• = åœ°æ”¯é¡ºåº.index(åŒæŸ±åœ°æ”¯)
                
                if åœ°æ”¯ç´¢å¼• < len(åœ°æ”¯é¡ºåº) - 1:
                    å³ä¾§åœ°æ”¯ä½ç½® = åœ°æ”¯é¡ºåº[åœ°æ”¯ç´¢å¼• + 1]
                    å³ä¾§åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å³ä¾§åœ°æ”¯ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '')
                    
                    if 'å¼±' in å³ä¾§åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                        åŸå†…ç¯å¢ƒå³ç¯å¢ƒ = å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå³ç¯å¢ƒ', '')
                        if åŸå†…ç¯å¢ƒå³ç¯å¢ƒ == 'å‰':
                            å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‡¶'
                        elif åŸå†…ç¯å¢ƒå³ç¯å¢ƒ == 'å‡¶':
                            å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = 'å‰'
                        if '+' in å³ä¾§åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                            å±æ€§å­å­—å…¸['å†…ç¯å¢ƒå³ç¯å¢ƒ'] += '+'


            print(f"\nã€ŠåŸå±€æœªç°åç¥å¤–ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{æœªç°å¤–ç¯å¢ƒç»“è®º[å¤©å¹²å]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€æœªç°åç¥å†…ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{æœªç°å†…ç¯å¢ƒç»“è®º[å¤©å¹²å]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€æœªç°åç¥å·¦ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{æœªç°å·¦ç¯å¢ƒç»“è®º[å¤©å¹²å]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€æœªç°åç¥å³ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{æœªç°å³ç¯å¢ƒç»“è®º[å¤©å¹²å]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€æœªç°åç¥å†…ç¯å¢ƒå·¦ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{æœªç°å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º[å¤©å¹²å]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€æœªç°åç¥å†…ç¯å¢ƒå³ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{æœªç°å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º[å¤©å¹²å]['ä½œç”¨è·¯å¾„']}")



            # åˆ¤æ–­æ˜¯å¦ä¸ºå®ç¥
            æ˜¯å®ç¥ = False
            if å¤§è¿å¹²æ”¯[0] in å¤§è¿å¤©å¹²å­—å…¸:
                æ˜¯å®ç¥ = å¤§è¿å¤©å¹²å­—å…¸[å¤§è¿å¹²æ”¯[0]]['æ˜¯å¦å®ç¥'] == 'å®ç¥'
            
            print(f"\nã€Šå¤§è¿ä½œç”¨åæœªç°åç¥çš„å¤–ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘çŠ¶æ€ä¸ºã€{å¤©å¹²æ—ºå¼±çŠ¶æ€}ã€‘")
            print(f" âˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å¤–ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å¤–ç¯å¢ƒ')}ã€‘")
            
            print(f"\nã€Šå¤§è¿ä½œç”¨åæœªç°åç¥çš„å†…ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{çª—å£åå­—}ã€‘åŒæŸ±åœ°æ”¯ã€{åŒæŸ±åœ°æ”¯é”®}ã€‘çŠ¶æ€ä¸ºã€{åœ°æ”¯æ—ºå¼±çŠ¶æ€}ã€‘")
            print(f" âˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒ')}ã€‘")

            print(f"\nã€Šå¤§è¿ä½œç”¨åæœªç°åç¥çš„å·¦ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œ" + (f"ä½¿ã€æ—¥å¹²ã€‘çŠ¶æ€ä¸ºã€{æ—¥å¹²æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œã€æœˆå¹²ã€‘çŠ¶æ€ä¸ºã€{æœˆå¹²æ—ºå¼±çŠ¶æ€}ã€‘" if çª—å£ä½ç½® == 'å¹´å¹²' else f"ä½¿å·¦ä¾§ã€{å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• - 1] if çª—å£ç´¢å¼• > 0 else 'æ— '}ã€‘çŠ¶æ€ä¸ºã€{å·¦ä¾§æ—ºå¼±çŠ¶æ€ if çª—å£ç´¢å¼• > 0 else 'æ— '}ã€‘"))
            print(f" âˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å·¦ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å·¦ç¯å¢ƒ')}ã€‘")

            print(f"\nã€Šå¤§è¿ä½œç”¨åæœªç°åç¥çš„å³ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œ" + (f"ä½¿ã€æœˆå¹²ã€‘çŠ¶æ€ä¸ºã€{æœˆå¹²æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œã€æ—¥å¹²ã€‘çŠ¶æ€ä¸ºã€{æ—¥å¹²æ—ºå¼±çŠ¶æ€}ã€‘" if çª—å£ä½ç½® == 'æ—¶å¹²' else f"ä½¿å³ä¾§ã€{å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• + 1] if çª—å£ç´¢å¼• < len(å¤©å¹²é¡ºåº) - 1 else 'æ— '}ã€‘çŠ¶æ€ä¸ºã€{å³ä¾§æ—ºå¼±çŠ¶æ€ if çª—å£ç´¢å¼• < len(å¤©å¹²é¡ºåº) - 1 else 'æ— '}ã€‘"))
            print(f" âˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å³ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å³ç¯å¢ƒ')}ã€‘")

            print(f"\nã€Šå¤§è¿ä½œç”¨åæœªç°åç¥çš„å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œ" + (f"ä½¿ã€æ—¥æ”¯ã€‘çŠ¶æ€ä¸ºã€{æ—¥æ”¯æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œã€æœˆæ”¯ã€‘çŠ¶æ€ä¸ºã€{æœˆæ”¯æ—ºå¼±çŠ¶æ€}ã€‘" if çª—å£ä½ç½® == 'å¹´å¹²' else f"ä½¿å·¦ä¾§åœ°æ”¯ã€{å·¦ä¾§åœ°æ”¯ä½ç½® if åœ°æ”¯ç´¢å¼• > 0 else 'æ— '}ã€‘çŠ¶æ€ä¸ºã€{å·¦ä¾§åœ°æ”¯æ—ºå¼±çŠ¶æ€ if åœ°æ”¯ç´¢å¼• > 0 else 'æ— '}ã€‘"))
            print(f" âˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒå·¦ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ')}ã€‘")

            print(f"\nã€Šå¤§è¿ä½œç”¨åæœªç°åç¥çš„å†…ç¯å¢ƒå³ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿{'(å®ç¥)' if æ˜¯å®ç¥ else ''}ä½œç”¨äºåŸå±€åï¼Œ" + (f"ä½¿ã€æœˆæ”¯ã€‘çŠ¶æ€ä¸ºã€{æœˆæ”¯æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œã€æ—¥æ”¯ã€‘çŠ¶æ€ä¸ºã€{æ—¥æ”¯æ—ºå¼±çŠ¶æ€}ã€‘" if çª—å£ä½ç½® == 'æ—¶å¹²' else f"ä½¿å³ä¾§åœ°æ”¯ã€{å³ä¾§åœ°æ”¯ä½ç½® if åœ°æ”¯ç´¢å¼• < len(åœ°æ”¯é¡ºåº) - 1 else 'æ— '}ã€‘çŠ¶æ€ä¸ºã€{å³ä¾§åœ°æ”¯æ—ºå¼±çŠ¶æ€ if åœ°æ”¯ç´¢å¼• < len(åœ°æ”¯é¡ºåº) - 1 else 'æ— '}ã€‘"))
            print(f" âˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒå³ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå³ç¯å¢ƒ')}ã€‘")




        print("\n===ğŸ¤ æ—¥å¹²çš„ç¯å¢ƒ ===")
        æ—¥å¹²ä¿¡æ¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']
        åŸå§‹ç»“è®º = åˆ¤æ–­æ—¥ä¸»è‡ªèº«çŠ¶æ€()['ä½œç”¨è·¯å¾„è¯´æ˜']
        å¤§è¿å¤©å¹² = å¤§è¿å¹²æ”¯[0]
        å¤§è¿åœ°æ”¯ = å¤§è¿å¹²æ”¯[1]

        print(f"æ—¥å¹²ã€{æ—¥å¹²ä¿¡æ¯['åå­—']}ã€‘åœ¨ã€{å¤§è¿å¹²æ”¯}ã€‘ä½œç”¨åçš„ç¯å¢ƒï¼š")

        # å¤–ç¯å¢ƒéƒ¨åˆ†
        æœˆå¹²å…³ç³» = 'ç”Ÿ' if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿å¤©å¹², 'æœˆå¹²') == 'ç”Ÿæ‰¶å…³ç³»' else 'åˆ¶'
        æ—¶å¹²å…³ç³» = 'ç”Ÿ' if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿å¤©å¹², 'æ—¶å¹²') == 'ç”Ÿæ‰¶å…³ç³»' else 'åˆ¶'
        print(f"ã€ŠåŸå±€æ—¥ä¸»å¤–ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{åŸå§‹ç»“è®º['å¤–ç¯å¢ƒè¯´æ˜']} \nã€Šå¤§è¿ä½œç”¨å æ—¥ä¸»å¤–ç¯å¢ƒçš„ç»“æœã€‹ï¼š âˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿ä½œç”¨äºåŸå±€åï¼Œã€{æœˆå¹²å…³ç³»}ã€‘æœˆå¹²ï¼Œã€{æ—¶å¹²å…³ç³»}ã€‘æ—¶å¹²ï¼Œ âˆ´æ—¥å¹²çš„å·¦ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å·¦ç¯å¢ƒ']}ã€‘ï¼Œæ—¥å¹²çš„å³ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å³ç¯å¢ƒ']}ã€‘")

        # å†…ç¯å¢ƒéƒ¨åˆ†
        æ—¥æ”¯å…³ç³» = 'ç”Ÿ' if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿å¤©å¹², 'æ—¥æ”¯') == 'ç”Ÿæ‰¶å…³ç³»' else 'åˆ¶'
        print(f"ã€ŠåŸå±€æ—¥ä¸»å†…ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{åŸå§‹ç»“è®º['å†…ç¯å¢ƒè¯´æ˜']} \nã€Šå¤§è¿ä½œç”¨å æ—¥ä¸»å†…ç¯å¢ƒçš„ç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿ä½œç”¨äºåŸå±€åï¼Œã€{æ—¥æ”¯å…³ç³»}ã€‘æ—¥æ”¯ï¼Œ âˆ´æ—¥å¹²çš„å†…ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å†…ç¯å¢ƒ']}ã€‘")

        # å†…ç¯å¢ƒæ‰©å±•éƒ¨åˆ†
        æœˆæ”¯å…³ç³» = 'ç”Ÿ' if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿åœ°æ”¯, 'æœˆæ”¯') == 'ç”Ÿæ‰¶å…³ç³»' else 'åˆ¶'
        æ—¶æ”¯å…³ç³» = 'ç”Ÿ' if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿åœ°æ”¯, 'æ—¶æ”¯') == 'ç”Ÿæ‰¶å…³ç³»' else 'åˆ¶'
        print(f"ã€ŠåŸå±€æ—¥ä¸»å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ/å³ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{åŸå§‹ç»“è®º['å†…ç¯å¢ƒæ‰©å±•è¯´æ˜']} \nã€Šå¤§è¿ä½œç”¨å æ—¥ä¸»å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ/å³ç¯å¢ƒçš„ç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿ä½œç”¨äºåŸå±€åï¼Œã€{æœˆæ”¯å…³ç³»}ã€‘æœˆæ”¯ï¼Œã€{æ—¶æ”¯å…³ç³»}ã€‘æ—¶æ”¯ï¼Œ âˆ´æ—¥å¹²å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å†…ç¯å¢ƒå·¦ç¯å¢ƒ']}ã€‘ï¼Œæ—¥å¹²å†…ç¯å¢ƒçš„å³ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å†…ç¯å¢ƒå³ç¯å¢ƒ']}ã€‘")



    def å¤„ç†å¤§è¿æµå¹´å…±åŒä½œç”¨():
        if not å½“å‰é€‰ä¸­æµå¹´åˆ—è¡¨:  # ä½¿ç”¨ä¿å­˜çš„æµå¹´åˆ—è¡¨
            print("è¯·å…ˆé€‰æ‹©æµå¹´ï¼")
            return

        # è·å–å½“å‰é€‰ä¸­çš„å¤§è¿ä¿¡æ¯
        å¤§è¿å¹²æ”¯ = å½“å‰é€‰ä¸­å¤§è¿.split()[-1]
        å¤§è¿å¤©å¹² = å¤§è¿å¹²æ”¯[0]
        å¤§è¿åœ°æ”¯ = å¤§è¿å¹²æ”¯[1]
        å¤§è¿å¤©å¹²å±æ€§ = å¤§è¿å¤©å¹²å­—å…¸[å¤§è¿å¤©å¹²]
        å¤§è¿å¤©å¹²å±æ€§['åå­—'] = å¤§è¿å¤©å¹²
        å¤§è¿åœ°æ”¯å±æ€§ = å¤§è¿åœ°æ”¯å­—å…¸[å¤§è¿åœ°æ”¯]
        å¤§è¿åœ°æ”¯å±æ€§['åå­—'] = å¤§è¿åœ°æ”¯

        for ä½ç½® in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']:   # å…ˆå¤„ç†åŸå±€ç©ºäº¡åœ°æ”¯
            åœ°æ”¯å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
            if åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'

        # è·å–åŸå±€å¤©å¹²çš„é˜´é˜³å±æ€§åˆ—è¡¨
        åŸå±€å¤©å¹²é˜´é˜³åˆ—è¡¨ = [å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['é˜´é˜³å±æ€§'] for ä½ç½® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']]
        if åŸå±€å¤©å¹²é˜´é˜³åˆ—è¡¨.count('é˜´') == 4:
            åŸå±€å±æ€§ = 'å…¨é˜´'
        elif åŸå±€å¤©å¹²é˜´é˜³åˆ—è¡¨.count('é˜³') == 4:
            åŸå±€å±æ€§ = 'å…¨é˜³'
        else:
            åŸå±€å±æ€§ = 'æœ‰é˜´æœ‰é˜³'

        # éå†é€‰ä¸­çš„æµå¹´
        for æµå¹´ä¿¡æ¯ in å½“å‰é€‰ä¸­æµå¹´åˆ—è¡¨:
            æµå¹´å¹²æ”¯ = æµå¹´ä¿¡æ¯.split()[-1]
            æµå¹´å¤©å¹² = æµå¹´å¹²æ”¯[0]
            æµå¹´åœ°æ”¯ = æµå¹´å¹²æ”¯[1]
            æµå¹´å¤©å¹²å±æ€§ = æµå¹´å¤©å¹²å­—å…¸[æµå¹´å¤©å¹²]
            æµå¹´å¤©å¹²å±æ€§['åå­—'] = æµå¹´å¤©å¹²
            æµå¹´åœ°æ”¯å±æ€§ = æµå¹´åœ°æ”¯å­—å…¸[æµå¹´åœ°æ”¯]
            æµå¹´åœ°æ”¯å±æ€§['åå­—'] = æµå¹´åœ°æ”¯

            # åˆ¤æ–­å¤§è¿å’Œæµå¹´å¤©å¹²ã€åœ°æ”¯çš„å®è™šç¥å±æ€§å’Œé˜´é˜³å±æ€§
            å¤§è¿å¤©å¹²å®è™š = å¤§è¿å¤©å¹²å±æ€§['æ˜¯å¦å®ç¥']
            æµå¹´å¤©å¹²å®è™š = æµå¹´å¤©å¹²å±æ€§['æ˜¯å¦å®ç¥']
            å¤§è¿åœ°æ”¯å®è™š = å¤§è¿åœ°æ”¯å±æ€§['æ˜¯å¦å®ç¥']
            æµå¹´åœ°æ”¯å®è™š = æµå¹´åœ°æ”¯å±æ€§['æ˜¯å¦å®ç¥']
            å¤§è¿åœ°æ”¯ç©ºäº¡ = å¤§è¿åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡', 'ä¸ç©ºäº¡')
            æµå¹´åœ°æ”¯ç©ºäº¡ = æµå¹´åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡', 'ä¸ç©ºäº¡')

            # å¤„ç†å¤©å¹²éƒ¨åˆ†
            if å¤§è¿å¤©å¹²å®è™š == 'å®ç¥' or æµå¹´å¤©å¹²å®è™š == 'å®ç¥':
                # ä¼˜å…ˆå¤„ç†å®ç¥
                å¤„ç†å®ç¥å¤©å¹²(å¤§è¿å¤©å¹²å±æ€§, æµå¹´å¤©å¹²å±æ€§)
            else:
                # æŒ‰ç…§é˜´é˜³å±æ€§å¤„ç†
                å¤„ç†å¤©å¹²é˜´é˜³(åŸå±€å±æ€§, å¤§è¿å¤©å¹²å±æ€§, æµå¹´å¤©å¹²å±æ€§)

            # å¤„ç†åœ°æ”¯éƒ¨åˆ†
            if å¤§è¿åœ°æ”¯å®è™š == 'å®ç¥' or æµå¹´åœ°æ”¯å®è™š == 'å®ç¥':
                # ä¼˜å…ˆå¤„ç†å®ç¥
                å¤„ç†å®ç¥åœ°æ”¯(å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§)
            elif å¤§è¿åœ°æ”¯ç©ºäº¡ == 'ç©ºäº¡' or æµå¹´åœ°æ”¯ç©ºäº¡ == 'ç©ºäº¡':
                # å¤„ç†ç©ºäº¡æƒ…å†µ
                å¤„ç†åœ°æ”¯ç©ºäº¡(å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§)
            else:
                # æŒ‰ç…§é˜´é˜³å±æ€§å¤„ç†
                å¤„ç†åœ°æ”¯é˜´é˜³(åŸå±€å±æ€§, å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§)

        # å¤„ç†å¤©å¹²ä½œç”¨åŸå±€
        å¤©å¹²ä½œç”¨åŸå±€(å¤§è¿å¤©å¹²å±æ€§)
        å¤©å¹²ä½œç”¨åŸå±€(æµå¹´å¤©å¹²å±æ€§)

        for ä½ç½® in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']:   # å¤„ç†åœ°æ”¯ä½œç”¨åŸå±€
            åŸå±€åœ°æ”¯å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
            if åŸå±€åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') != 'ç©ºäº¡':     # ç©ºäº¡åœ°æ”¯ä¸å‚ä¸ä½œç”¨
                åˆ¤æ–­åœ°æ”¯ä½œç”¨(å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§, åŸå±€åœ°æ”¯å±æ€§)

        æ›´æ–°å¤§è¿æµå¹´å…±åŒä½œç”¨åçš„ç¯å¢ƒå‰å‡¶ç»“è®º()
        print(f"å¤„ç†å®Œæ¯•ï¼š{æµå¹´ä¿¡æ¯}çš„ç¯å¢ƒå‰å‡¶å·²æ›´æ–°ã€‚")
    def æ›´æ–°å¤§è¿æµå¹´å…±åŒä½œç”¨åçš„ç¯å¢ƒå‰å‡¶ç»“è®º():
        import contextlib
        global å½“å‰é€‰ä¸­æµå¹´åˆ—è¡¨
        if not å½“å‰é€‰ä¸­æµå¹´åˆ—è¡¨:
            print("è¯·å…ˆé€‰æ‹©æµå¹´ï¼")
            return
        å¤§è¿å¹²æ”¯ = å½“å‰é€‰ä¸­å¤§è¿.split()[-1]
        æµå¹´ä¿¡æ¯ = å½“å‰é€‰ä¸­æµå¹´åˆ—è¡¨[-1]
        æµå¹´å¹²æ”¯ = æµå¹´ä¿¡æ¯.split()[-1]  # è·å–å¹²æ”¯éƒ¨åˆ†
        print(f"ğŸ‘¼ğŸ‘¼ğŸ‘¼\nã€å¤§è¿:{å¤§è¿å¹²æ”¯} +æµå¹´:{æµå¹´å¹²æ”¯}ã€‘å¤§è¿ä½œç”¨åˆ°åŸå±€åï¼ŒåŸå±€å„ç§ç¯å¢ƒçš„ç»“è®ºå¦‚ä¸‹ï¼š")
        with contextlib.redirect_stdout(None):
            å¤–ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶()
            å†…ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶()
            å·¦ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶()
            å³ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶()
            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒå‰å‡¶()
            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå³ç¯å¢ƒå‰å‡¶()
    
        for ä½ç½® in ['æ—¶å¹²', 'æœˆå¹²', 'å¹´å¹²']:  # ä¸åŒ…å«æ—¥å¹²
            å¤©å¹²ä¿¡æ¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
            if 'å¹²' not in ä½ç½®:
                continue

        print("\n=== ğŸ˜ å·²ç°åç¥çš„ç¯å¢ƒ ===")
        with contextlib.redirect_stdout(None):   # 1. å…ˆè·å–ç¯å¢ƒç»“è®º
            å¤–ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶()
            å†…ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶()
            å·¦ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶()
            å³ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶()
            å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒå‰å‡¶()
            å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = åˆ†æå¤©å¹²åç¥çš„å†…ç¯å¢ƒå³ç¯å¢ƒå‰å‡¶()
        
        å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¶å¹²']      # 2. å¤„ç†å„ä¸ªä½ç½®çš„ç¯å¢ƒ
        for ä½ç½® in å¤©å¹²é¡ºåº:
            å¤©å¹²ä¿¡æ¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
            åŒæŸ±åœ°æ”¯é”® = ä½ç½®.replace('å¹²', 'æ”¯')
            åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŒæŸ±åœ°æ”¯é”®].get('æ—ºå¼±çŠ¶æ€', '')
            æ—ºå¼±çŠ¶æ€ = å¤©å¹²ä¿¡æ¯.get('æ—ºå¼±çŠ¶æ€', '')

            # æ‰“å°ç¯å¢ƒç»“è®º
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å¤–ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å¤–ç¯å¢ƒç»“è®º[ä½ç½®]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å†…ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å†…ç¯å¢ƒç»“è®º[ä½ç½®]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å·¦ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å·¦ç¯å¢ƒç»“è®º[ä½ç½®]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å³ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å³ç¯å¢ƒç»“è®º[ä½ç½®]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å†…ç¯å¢ƒå·¦ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º[ä½ç½®]['ä½œç”¨è·¯å¾„']}")
            print(f"\nã€ŠåŸå±€å·²ç°åç¥å†…ç¯å¢ƒå³ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º[ä½ç½®]['ä½œç”¨è·¯å¾„']}")
            
            # å¤„ç†å¤–ç¯å¢ƒ
            if 'å¼±' in æ—ºå¼±çŠ¶æ€:
                åŸå¤–ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å¤–ç¯å¢ƒ')
                if åŸå¤–ç¯å¢ƒ in ['å‰', 'å‡¶']:
                    æ–°ç¯å¢ƒ = 'å‡¶' if åŸå¤–ç¯å¢ƒ == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å¤–ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + '+' if '+' in æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
                    
            # å¤„ç†å†…ç¯å¢ƒ
            if åœ°æ”¯æ—ºå¼±çŠ¶æ€ and 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                åŸå†…ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å†…ç¯å¢ƒ')
                if åŸå†…ç¯å¢ƒ in ['å‰', 'å‡¶']:
                    æ–°ç¯å¢ƒ = 'å‡¶' if åŸå†…ç¯å¢ƒ == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å†…ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + '+' if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ

            # å¤„ç†å·¦ç¯å¢ƒ
            if åœ°æ”¯æ—ºå¼±çŠ¶æ€ and 'å¼±' in æ—ºå¼±çŠ¶æ€:
                åŸå·¦ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å·¦ç¯å¢ƒ')
                if åŸå·¦ç¯å¢ƒ in ['å‰', 'å‡¶']:
                    æ–°ç¯å¢ƒ = 'å‡¶' if åŸå·¦ç¯å¢ƒ == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å·¦ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + '+' if '+' in æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
            
            # å¤„ç†å³ç¯å¢ƒ
            if åœ°æ”¯æ—ºå¼±çŠ¶æ€ and 'å¼±' in æ—ºå¼±çŠ¶æ€:
                åŸå³ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å³ç¯å¢ƒ')
                if åŸå³ç¯å¢ƒ in ['å‰', 'å‡¶']:
                    æ–°ç¯å¢ƒ = 'å‡¶' if åŸå³ç¯å¢ƒ == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å³ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + '+' if '+' in æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
            
            # å¤„ç†å†…ç¯å¢ƒå·¦ç¯å¢ƒ
            if åœ°æ”¯æ—ºå¼±çŠ¶æ€ and 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                åŸå†…ç¯å¢ƒå·¦ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ')
                if åŸå†…ç¯å¢ƒå·¦ç¯å¢ƒ in ['å‰', 'å‡¶']:
                    æ–°ç¯å¢ƒ = 'å‡¶' if åŸå†…ç¯å¢ƒå·¦ç¯å¢ƒ == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å†…ç¯å¢ƒå·¦ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + '+' if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ
                
            # å¤„ç†å†…ç¯å¢ƒå³ç¯å¢ƒ
            if åœ°æ”¯æ—ºå¼±çŠ¶æ€ and 'å¼±' in åœ°æ”¯æ—ºå¼±çŠ¶æ€:
                åŸå†…ç¯å¢ƒå³ç¯å¢ƒ = å¤©å¹²ä¿¡æ¯.get('å†…ç¯å¢ƒå³ç¯å¢ƒ')
                if åŸå†…ç¯å¢ƒå³ç¯å¢ƒ in ['å‰', 'å‡¶']:
                    æ–°ç¯å¢ƒ = 'å‡¶' if åŸå†…ç¯å¢ƒå³ç¯å¢ƒ == 'å‰' else 'å‰'
                    å¤©å¹²ä¿¡æ¯['å†…ç¯å¢ƒå³ç¯å¢ƒ'] = æ–°ç¯å¢ƒ + '+' if '+' in åœ°æ”¯æ—ºå¼±çŠ¶æ€ else æ–°ç¯å¢ƒ


            # 4. å¤„ç†ç¯å¢ƒå˜åŒ–
            å¤©å¹²åå­— = å¤©å¹²ä¿¡æ¯['åå­—']
            åç¥ = å¤©å¹²ä¿¡æ¯['åç¥']
            
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åçš„å¤–ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{ä½ç½®}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çŠ¶æ€ä¸ºã€{æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´å¤–ç¯å¢ƒä¸ºã€{å¤©å¹²ä¿¡æ¯['å¤–ç¯å¢ƒ']}ã€‘")
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åçš„å†…ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{åŒæŸ±åœ°æ”¯é”®}ã€‘çŠ¶æ€ä¸ºã€{åœ°æ”¯æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´å†…ç¯å¢ƒä¸ºã€{å¤©å¹²ä¿¡æ¯['å†…ç¯å¢ƒ']}ã€‘")
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åçš„å·¦ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{ä½ç½®}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çŠ¶æ€ä¸ºã€{æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´å·¦ç¯å¢ƒä¸ºã€{å¤©å¹²ä¿¡æ¯['å·¦ç¯å¢ƒ']}ã€‘")
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åçš„å³ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{ä½ç½®}ã€‘ã€{å¤©å¹²åå­—}ã€‘ã€{åç¥}ã€‘çŠ¶æ€ä¸ºã€{æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´å³ç¯å¢ƒä¸ºã€{å¤©å¹²ä¿¡æ¯['å³ç¯å¢ƒ']}ã€‘")
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åçš„å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{åŒæŸ±åœ°æ”¯é”®}ã€‘çŠ¶æ€ä¸ºã€{åœ°æ”¯æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´å†…ç¯å¢ƒå·¦ç¯å¢ƒä¸ºã€{å¤©å¹²ä¿¡æ¯['å†…ç¯å¢ƒå·¦ç¯å¢ƒ']}ã€‘")
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åçš„å†…ç¯å¢ƒå³ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{åŒæŸ±åœ°æ”¯é”®}ã€‘çŠ¶æ€ä¸ºã€{åœ°æ”¯æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´å†…ç¯å¢ƒå³ç¯å¢ƒä¸ºã€{å¤©å¹²ä¿¡æ¯['å†…ç¯å¢ƒå³ç¯å¢ƒ']}ã€‘")



        print("\n=== ğŸ«¥ æœªç°åç¥çš„ç¯å¢ƒ ===")
        with contextlib.redirect_stdout(None):
            æœªç°å¤–ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å¤–ç¯å¢ƒå‰å‡¶()
            æœªç°å†…ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒå‰å‡¶()
            æœªç°å·¦ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å·¦ç¯å¢ƒå‰å‡¶()
            æœªç°å³ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å³ç¯å¢ƒå‰å‡¶()
            æœªç°å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ()
            æœªç°å†…ç¯å¢ƒå³ç¯å¢ƒç»“è®º = åˆ†ææœªç°å¤©å¹²åç¥çš„å†…ç¯å¢ƒçš„å³ç¯å¢ƒ()
        # è·å–æ‰€æœ‰æœªç°åç¥çš„åˆ—è¡¨
        æœªç°åç¥åˆ—è¡¨ = list(æœªç°æ­£ååç¥ä¸»å­—å…¸.keys())

        for å¤©å¹²å in æœªç°åç¥åˆ—è¡¨:
            å±æ€§å­å­—å…¸ = æœªç°æ­£ååç¥ä¸»å­—å…¸[å¤©å¹²å]
            çª—å£åå­— = å±æ€§å­å­—å…¸.get('çª—å£åå­—')
            åç¥ = å±æ€§å­å­—å…¸.get('åç¥')
            çª—å£ä½ç½® = next((ä½ç½® for ä½ç½®, ä¿¡æ¯ in å…«å­—ä¿¡æ¯ä¸»å­—å…¸.items() if ä¿¡æ¯.get('åå­—') == çª—å£åå­—), None)
            
            if not çª—å£ä½ç½®:
                continue

            # è·å–å¤©å¹²å’Œåœ°æ”¯çš„æ—ºå¼±çŠ¶æ€
            å¤©å¹²æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '')
            åœ°æ”¯ä½ç½® = çª—å£ä½ç½®.replace('å¹²', 'æ”¯')
            åœ°æ”¯æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åœ°æ”¯ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '')

            # å¤„ç†å¤–ç¯å¢ƒå’Œå†…ç¯å¢ƒ
            for ç¯å¢ƒç±»å‹, å‚è€ƒçŠ¶æ€ in [('å¤–ç¯å¢ƒ', å¤©å¹²æ—ºå¼±çŠ¶æ€), ('å†…ç¯å¢ƒ', åœ°æ”¯æ—ºå¼±çŠ¶æ€)]:
                if 'å¼±' in å‚è€ƒçŠ¶æ€ and å±æ€§å­å­—å…¸.get(ç¯å¢ƒç±»å‹) in ['å‰', 'å‡¶']:
                    å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] = 'å‡¶' if å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] == 'å‰' else 'å‰'
                    if '+' in å‚è€ƒçŠ¶æ€:
                        å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] += '+'

            # å¤„ç†å·¦å³ç¯å¢ƒ
            å¤©å¹²é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
            çª—å£ç´¢å¼• = å¤©å¹²é¡ºåº.index(çª—å£ä½ç½®)

            # ç‰¹æ®Šä½ç½®å¤„ç†ï¼ˆå¹´å¹²å’Œæ—¶å¹²ï¼‰
            ç‰¹æ®Šä½ç½®å¤„ç† = {
                'å¹´å¹²': ('å·¦ç¯å¢ƒ', ['æœˆå¹²', 'æ—¥å¹²']),
                'æ—¶å¹²': ('å³ç¯å¢ƒ', ['æœˆå¹²', 'æ—¥å¹²'])
            }

            if çª—å£ä½ç½® in ç‰¹æ®Šä½ç½®å¤„ç†:
                ç¯å¢ƒç±»å‹, å‚è€ƒä½ç½®åˆ—è¡¨ = ç‰¹æ®Šä½ç½®å¤„ç†[çª—å£ä½ç½®]
                if all('å¼±' in å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '') for ä½ç½® in å‚è€ƒä½ç½®åˆ—è¡¨):
                    åŸç¯å¢ƒ = å±æ€§å­å­—å…¸.get(ç¯å¢ƒç±»å‹, '')
                    if åŸç¯å¢ƒ in ['å‰', 'å‡¶']:
                        å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] = 'å‡¶' if åŸç¯å¢ƒ == 'å‰' else 'å‰'
                        if all('+' in å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '') for ä½ç½® in å‚è€ƒä½ç½®åˆ—è¡¨):
                            å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] += '+'
            else:
                # æ™®é€šä½ç½®å¤„ç†
                for ç¯å¢ƒç±»å‹, åç§» in [('å·¦ç¯å¢ƒ', -1), ('å³ç¯å¢ƒ', 1)]:
                    ç›¸é‚»ç´¢å¼• = çª—å£ç´¢å¼• + åç§»
                    if 0 <= ç›¸é‚»ç´¢å¼• < len(å¤©å¹²é¡ºåº):
                        ç›¸é‚»ä½ç½® = å¤©å¹²é¡ºåº[ç›¸é‚»ç´¢å¼•]
                        ç›¸é‚»æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ç›¸é‚»ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '')
                        if 'å¼±' in ç›¸é‚»æ—ºå¼±çŠ¶æ€ and å±æ€§å­å­—å…¸.get(ç¯å¢ƒç±»å‹) in ['å‰', 'å‡¶']:
                            å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] = 'å‡¶' if å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] == 'å‰' else 'å‰'
                            if '+' in ç›¸é‚»æ—ºå¼±çŠ¶æ€:
                                å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] += '+'

            # å¤„ç†å†…ç¯å¢ƒçš„å·¦å³ç¯å¢ƒ
            åœ°æ”¯é¡ºåº = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']
            åœ°æ”¯ç´¢å¼• = åœ°æ”¯é¡ºåº.index(åœ°æ”¯ä½ç½®)

            # ç‰¹æ®Šä½ç½®å¤„ç†ï¼ˆå¹´æ”¯å’Œæ—¶æ”¯çš„å†…ç¯å¢ƒå·¦å³ç¯å¢ƒï¼‰
            ç‰¹æ®Šåœ°æ”¯å¤„ç† = {'å¹´æ”¯': ('å†…ç¯å¢ƒå·¦ç¯å¢ƒ', ['æœˆæ”¯', 'æ—¥æ”¯']),
                'æ—¶æ”¯': ('å†…ç¯å¢ƒå³ç¯å¢ƒ', ['æœˆæ”¯', 'æ—¥æ”¯'])}

            if åœ°æ”¯ä½ç½® in ç‰¹æ®Šåœ°æ”¯å¤„ç†:
                ç¯å¢ƒç±»å‹, å‚è€ƒä½ç½®åˆ—è¡¨ = ç‰¹æ®Šåœ°æ”¯å¤„ç†[åœ°æ”¯ä½ç½®]
                if all('å¼±' in å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '') for ä½ç½® in å‚è€ƒä½ç½®åˆ—è¡¨):
                    åŸç¯å¢ƒ = å±æ€§å­å­—å…¸.get(ç¯å¢ƒç±»å‹, '')
                    if åŸç¯å¢ƒ in ['å‰', 'å‡¶']:
                        å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] = 'å‡¶' if åŸç¯å¢ƒ == 'å‰' else 'å‰'
                        if all('+' in å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '') for ä½ç½® in å‚è€ƒä½ç½®åˆ—è¡¨):
                            å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] += '+'
            else:
                # æ™®é€šä½ç½®å¤„ç†
                for ç¯å¢ƒç±»å‹, åç§» in [('å†…ç¯å¢ƒå·¦ç¯å¢ƒ', -1), ('å†…ç¯å¢ƒå³ç¯å¢ƒ', 1)]:
                    ç›¸é‚»ç´¢å¼• = åœ°æ”¯ç´¢å¼• + åç§»
                    if 0 <= ç›¸é‚»ç´¢å¼• < len(åœ°æ”¯é¡ºåº):
                        ç›¸é‚»ä½ç½® = åœ°æ”¯é¡ºåº[ç›¸é‚»ç´¢å¼•]
                        ç›¸é‚»æ—ºå¼±çŠ¶æ€ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ç›¸é‚»ä½ç½®].get('æ—ºå¼±çŠ¶æ€', '')
                        if 'å¼±' in ç›¸é‚»æ—ºå¼±çŠ¶æ€ and å±æ€§å­å­—å…¸.get(ç¯å¢ƒç±»å‹) in ['å‰', 'å‡¶']:
                            å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] = 'å‡¶' if å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] == 'å‰' else 'å‰'
                            if '+' in ç›¸é‚»æ—ºå¼±çŠ¶æ€:
                                å±æ€§å­å­—å…¸[ç¯å¢ƒç±»å‹] += '+'

            # æ‰“å°ç»“æœ
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åæœªç°åç¥çš„å¤–ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{çª—å£ä½ç½®}ã€‘çŠ¶æ€ä¸ºã€{å¤©å¹²æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å¤–ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å¤–ç¯å¢ƒ')}ã€‘")
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åæœªç°åç¥çš„å†…ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œä½¿ã€{åœ°æ”¯ä½ç½®}ã€‘çŠ¶æ€ä¸ºã€{åœ°æ”¯æ—ºå¼±çŠ¶æ€}ã€‘ï¼Œâˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒ')}ã€‘")
            
            å·¦ç¯å¢ƒä¿¡æ¯ = "ä½¿ã€æœˆå¹²ã€‘çŠ¶æ€ä¸ºã€{}ã€‘ï¼Œã€æ—¥å¹²ã€‘çŠ¶æ€ä¸ºã€{}ã€‘".format(å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('æ—ºå¼±çŠ¶æ€', ''), å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²'].get('æ—ºå¼±çŠ¶æ€', '')
            ) if çª—å£ä½ç½® == 'å¹´å¹²' else "ä½¿å·¦ä¾§ã€{}ã€‘çŠ¶æ€ä¸ºã€{}ã€‘".format(
                å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• - 1] if çª—å£ç´¢å¼• > 0 else 'æ— ',
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• - 1], {}).get('æ—ºå¼±çŠ¶æ€', 'æ— ') if çª—å£ç´¢å¼• > 0 else 'æ— '
            )
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åæœªç°åç¥çš„å·¦ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œ{å·¦ç¯å¢ƒä¿¡æ¯}ï¼Œâˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å·¦ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å·¦ç¯å¢ƒ')}ã€‘")

            å³ç¯å¢ƒä¿¡æ¯ = "ä½¿ã€æœˆå¹²ã€‘çŠ¶æ€ä¸ºã€{}ã€‘ï¼Œã€æ—¥å¹²ã€‘çŠ¶æ€ä¸ºã€{}ã€‘".format(
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆå¹²'].get('æ—ºå¼±çŠ¶æ€', ''),
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²'].get('æ—ºå¼±çŠ¶æ€', '')
            ) if çª—å£ä½ç½® == 'æ—¶å¹²' else "ä½¿å³ä¾§ã€{}ã€‘çŠ¶æ€ä¸ºã€{}ã€‘".format(
                å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• + 1] if çª—å£ç´¢å¼• < len(å¤©å¹²é¡ºåº) - 1 else 'æ— ',
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(å¤©å¹²é¡ºåº[çª—å£ç´¢å¼• + 1], {}).get('æ—ºå¼±çŠ¶æ€', 'æ— ') if çª—å£ç´¢å¼• < len(å¤©å¹²é¡ºåº) - 1 else 'æ— '
            )
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åæœªç°åç¥çš„å³ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œ{å³ç¯å¢ƒä¿¡æ¯}ï¼Œâˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å³ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å³ç¯å¢ƒ')}ã€‘")

            å†…ç¯å¢ƒå·¦ç¯å¢ƒä¿¡æ¯ = "ä½¿ã€æ—¥æ”¯ã€‘çŠ¶æ€ä¸ºã€{}ã€‘ï¼Œã€æœˆæ”¯ã€‘çŠ¶æ€ä¸ºã€{}ã€‘".format(
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯'].get('æ—ºå¼±çŠ¶æ€', ''),
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯'].get('æ—ºå¼±çŠ¶æ€', '')
            ) if åœ°æ”¯ä½ç½® == 'å¹´æ”¯' else "ä½¿å·¦ä¾§åœ°æ”¯ã€{}ã€‘çŠ¶æ€ä¸ºã€{}ã€‘".format(
                åœ°æ”¯é¡ºåº[åœ°æ”¯ç´¢å¼• - 1] if åœ°æ”¯ç´¢å¼• > 0 else 'æ— ',
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(åœ°æ”¯é¡ºåº[åœ°æ”¯ç´¢å¼• - 1], {}).get('æ—ºå¼±çŠ¶æ€', 'æ— ') if åœ°æ”¯ç´¢å¼• > 0 else 'æ— '
            )
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åæœªç°åç¥çš„å†…ç¯å¢ƒå·¦ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œ{å†…ç¯å¢ƒå·¦ç¯å¢ƒä¿¡æ¯}ï¼Œâˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒå·¦ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå·¦ç¯å¢ƒ')}ã€‘")

            å†…ç¯å¢ƒå³ç¯å¢ƒä¿¡æ¯ = "ä½¿ã€æœˆæ”¯ã€‘çŠ¶æ€ä¸ºã€{}ã€‘ï¼Œã€æ—¥æ”¯ã€‘çŠ¶æ€ä¸ºã€{}ã€‘".format(
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æœˆæ”¯'].get('æ—ºå¼±çŠ¶æ€', ''),
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥æ”¯'].get('æ—ºå¼±çŠ¶æ€', '')
            ) if åœ°æ”¯ä½ç½® == 'æ—¶æ”¯' else "ä½¿å³ä¾§åœ°æ”¯ã€{}ã€‘çŠ¶æ€ä¸ºã€{}ã€‘".format(
                åœ°æ”¯é¡ºåº[åœ°æ”¯ç´¢å¼• + 1] if åœ°æ”¯ç´¢å¼• < len(åœ°æ”¯é¡ºåº) - 1 else 'æ— ',
                å…«å­—ä¿¡æ¯ä¸»å­—å…¸.get(åœ°æ”¯é¡ºåº[åœ°æ”¯ç´¢å¼• + 1], {}).get('æ—ºå¼±çŠ¶æ€', 'æ— ') if åœ°æ”¯ç´¢å¼• < len(åœ°æ”¯é¡ºåº) - 1 else 'æ— '
            )
            print(f"\nã€Šå¤§è¿æµå¹´ä½œç”¨åæœªç°åç¥çš„å†…ç¯å¢ƒå³ç¯å¢ƒç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œ{å†…ç¯å¢ƒå³ç¯å¢ƒä¿¡æ¯}ï¼Œâˆ´ã€{å¤©å¹²å}ã€‘ã€{åç¥}ã€‘å†…ç¯å¢ƒå³ç¯å¢ƒä¸ºã€{å±æ€§å­å­—å…¸.get('å†…ç¯å¢ƒå³ç¯å¢ƒ')}ã€‘")

        print("\n===ğŸ¤ æ—¥å¹²çš„ç¯å¢ƒ ===")
        æ—¥å¹²ä¿¡æ¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸['æ—¥å¹²']
        åŸå§‹ç»“è®º = åˆ¤æ–­æ—¥ä¸»è‡ªèº«çŠ¶æ€()['ä½œç”¨è·¯å¾„è¯´æ˜']
        
        # è·å–å¤§è¿å’Œæµå¹´çš„å¹²æ”¯
        å¤§è¿å¤©å¹², å¤§è¿åœ°æ”¯ = å¤§è¿å¹²æ”¯[0], å¤§è¿å¹²æ”¯[1]
        æµå¹´å¤©å¹², æµå¹´åœ°æ”¯ = æµå¹´å¹²æ”¯[0], æµå¹´å¹²æ”¯[1]
        
        # å®šä¹‰ç”Ÿåˆ¶å…³ç³»è·å–å‡½æ•°
        def è·å–ç”Ÿåˆ¶å…³ç³»(ä½œç”¨å¹²æ”¯, è¢«ä½œç”¨ä½ç½®):
            return 'ç”Ÿ' if åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(ä½œç”¨å¹²æ”¯, è¢«ä½œç”¨ä½ç½®) == 'ç”Ÿæ‰¶å…³ç³»' else 'åˆ¶'
        
        # è·å–å„ä¸ªä½ç½®çš„å…³ç³»
        å…³ç³»ä¿¡æ¯ = {
            'æœˆå¹²': (è·å–ç”Ÿåˆ¶å…³ç³»(å¤§è¿å¤©å¹², 'æœˆå¹²'), è·å–ç”Ÿåˆ¶å…³ç³»(æµå¹´å¤©å¹², 'æœˆå¹²')),
            'æ—¶å¹²': (è·å–ç”Ÿåˆ¶å…³ç³»(å¤§è¿å¤©å¹², 'æ—¶å¹²'), è·å–ç”Ÿåˆ¶å…³ç³»(æµå¹´å¤©å¹², 'æ—¶å¹²')),
            'æ—¥æ”¯': (è·å–ç”Ÿåˆ¶å…³ç³»(å¤§è¿å¤©å¹², 'æ—¥æ”¯'), è·å–ç”Ÿåˆ¶å…³ç³»(æµå¹´å¤©å¹², 'æ—¥æ”¯')),
            'æœˆæ”¯': (è·å–ç”Ÿåˆ¶å…³ç³»(å¤§è¿åœ°æ”¯, 'æœˆæ”¯'), è·å–ç”Ÿåˆ¶å…³ç³»(æµå¹´åœ°æ”¯, 'æœˆæ”¯')),
            'æ—¶æ”¯': (è·å–ç”Ÿåˆ¶å…³ç³»(å¤§è¿åœ°æ”¯, 'æ—¶æ”¯'), è·å–ç”Ÿåˆ¶å…³ç³»(æµå¹´åœ°æ”¯, 'æ—¶æ”¯'))
        }
        
        # æ‰“å°ç¯å¢ƒä¿¡æ¯
        print(f"\nã€ŠåŸå±€æ—¥ä¸»å¤–ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{åŸå§‹ç»“è®º['å¤–ç¯å¢ƒè¯´æ˜']} \n\nã€Šå¤§è¿æµå¹´ä½œç”¨åæ—¥ä¸»å¤–ç¯å¢ƒçš„ç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œå¤§è¿ã€{å…³ç³»ä¿¡æ¯['æœˆå¹²'][0]}ã€‘æœˆå¹²ï¼Œã€{å…³ç³»ä¿¡æ¯['æ—¶å¹²'][0]}ã€‘æ—¶å¹²ï¼Œæµå¹´ã€{å…³ç³»ä¿¡æ¯['æœˆå¹²'][1]}ã€‘æœˆå¹²ï¼Œã€{å…³ç³»ä¿¡æ¯['æ—¶å¹²'][1]}ã€‘æ—¶å¹²ï¼Œâˆ´æ—¥å¹²çš„å·¦ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å·¦ç¯å¢ƒ']}ã€‘ï¼Œæ—¥å¹²çš„å³ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å³ç¯å¢ƒ']}ã€‘")
        
        print(f"\nã€ŠåŸå±€æ—¥ä¸»å†…ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{åŸå§‹ç»“è®º['å†…ç¯å¢ƒè¯´æ˜']} \n\nã€Šå¤§è¿æµå¹´ä½œç”¨åæ—¥ä¸»å†…ç¯å¢ƒçš„ç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œå¤§è¿ã€{å…³ç³»ä¿¡æ¯['æ—¥æ”¯'][0]}ã€‘æ—¥æ”¯ï¼Œæµå¹´ã€{å…³ç³»ä¿¡æ¯['æ—¥æ”¯'][1]}ã€‘æ—¥æ”¯ï¼Œâˆ´æ—¥å¹²çš„å†…ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å†…ç¯å¢ƒ']}ã€‘")
        
        print(f"\nã€ŠåŸå±€æ—¥ä¸»å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ/å³ç¯å¢ƒä½œç”¨è·¯å¾„ã€‹ï¼š{åŸå§‹ç»“è®º['å†…ç¯å¢ƒæ‰©å±•è¯´æ˜']} \n\nã€Šå¤§è¿æµå¹´ä½œç”¨åæ—¥ä¸»å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒ/å³ç¯å¢ƒçš„ç»“æœã€‹ï¼šâˆµã€{å¤§è¿å¹²æ”¯}ã€‘å¤§è¿å’Œã€{æµå¹´å¹²æ”¯}ã€‘æµå¹´ä½œç”¨äºåŸå±€åï¼Œå¤§è¿ã€{å…³ç³»ä¿¡æ¯['æœˆæ”¯'][0]}ã€‘æœˆæ”¯ï¼Œã€{å…³ç³»ä¿¡æ¯['æ—¶æ”¯'][0]}ã€‘æ—¶æ”¯ï¼Œæµå¹´ã€{å…³ç³»ä¿¡æ¯['æœˆæ”¯'][1]}ã€‘æœˆæ”¯ï¼Œã€{å…³ç³»ä¿¡æ¯['æ—¶æ”¯'][1]}ã€‘æ—¶æ”¯ï¼Œâˆ´æ—¥å¹²å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å†…ç¯å¢ƒå·¦ç¯å¢ƒ']}ã€‘ï¼Œæ—¥å¹²å†…ç¯å¢ƒçš„å³ç¯å¢ƒä¸ºã€{æ—¥å¹²ä¿¡æ¯['å†…ç¯å¢ƒå³ç¯å¢ƒ']}ã€‘")

    def å¤„ç†å®ç¥å¤©å¹²(å¤§è¿å¤©å¹²å±æ€§, æµå¹´å¤©å¹²å±æ€§):
        if å¤§è¿å¤©å¹²å±æ€§['æ˜¯å¦å®ç¥'] == 'å®ç¥' and æµå¹´å¤©å¹²å±æ€§['æ˜¯å¦å®ç¥'] == 'å®ç¥':
            # æƒ…å†µ8ï¼šå®ç¥å’Œå®ç¥
            æµå¹´å¤©å¹²å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'æ—º+'
            å¤©å¹²ä½œç”¨åŸå±€(æµå¹´å¤©å¹²å±æ€§)
        else:
            # æƒ…å†µ7ï¼šä¸€ä¸ªå®ç¥ï¼Œä¸€ä¸ªè™šç¥
            if å¤§è¿å¤©å¹²å±æ€§['æ˜¯å¦å®ç¥'] == 'å®ç¥':
                æ›´æ–°æ—ºå¼±çŠ¶æ€(æµå¹´å¤©å¹²å±æ€§, å¤§è¿å¤©å¹²å±æ€§)
                å¤©å¹²ä½œç”¨åŸå±€(å¤§è¿å¤©å¹²å±æ€§)
            else:
                æ›´æ–°æ—ºå¼±çŠ¶æ€(å¤§è¿å¤©å¹²å±æ€§, æµå¹´å¤©å¹²å±æ€§)
                å¤©å¹²ä½œç”¨åŸå±€(æµå¹´å¤©å¹²å±æ€§)

    def å¤„ç†å®ç¥åœ°æ”¯(å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§):
        if å¤§è¿åœ°æ”¯å±æ€§['æ˜¯å¦å®ç¥'] == 'å®ç¥' and æµå¹´åœ°æ”¯å±æ€§['æ˜¯å¦å®ç¥'] == 'å®ç¥':
            æµå¹´åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'æ—º+'
            åœ°æ”¯ä½œç”¨åŸå±€(æµå¹´åœ°æ”¯å±æ€§)
        else:
            if å¤§è¿åœ°æ”¯å±æ€§['æ˜¯å¦å®ç¥'] == 'å®ç¥':
                æ›´æ–°æ—ºå¼±çŠ¶æ€(æµå¹´åœ°æ”¯å±æ€§, å¤§è¿åœ°æ”¯å±æ€§)
                å¤§è¿åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] += '+'
                åœ°æ”¯ä½œç”¨åŸå±€(å¤§è¿åœ°æ”¯å±æ€§)
            else:
                æ›´æ–°æ—ºå¼±çŠ¶æ€(å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§)
                æµå¹´åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] += '+'
                åœ°æ”¯ä½œç”¨åŸå±€(æµå¹´åœ°æ”¯å±æ€§)

    def å¤„ç†å¤©å¹²é˜´é˜³(åŸå±€å±æ€§, å¤§è¿å¤©å¹²å±æ€§, æµå¹´å¤©å¹²å±æ€§):
        å¤§è¿å¯¹æµå¹´å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿å¤©å¹²å±æ€§['åå­—'], æµå¹´å¤©å¹²å±æ€§['åå­—'])
        æµå¹´å¯¹å¤§è¿å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æµå¹´å¤©å¹²å±æ€§['åå­—'], å¤§è¿å¤©å¹²å±æ€§['åå­—'])
        
        # è®¾ç½®å¤§è¿å¤©å¹²çš„æ—ºå¼±çŠ¶æ€
        if æµå¹´å¯¹å¤§è¿å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
            å¤§è¿å¤©å¹²å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'æ—º'
        elif æµå¹´å¯¹å¤§è¿å…³ç³» == 'å—åˆ¶å…³ç³»':
            å¤§è¿å¤©å¹²å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
        else:
            å¤§è¿å¤©å¹²å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'
            
        # è®¾ç½®æµå¹´å¤©å¹²çš„æ—ºå¼±çŠ¶æ€
        if å¤§è¿å¯¹æµå¹´å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
            æµå¹´å¤©å¹²å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'æ—º'
        elif å¤§è¿å¯¹æµå¹´å…³ç³» == 'å—åˆ¶å…³ç³»':
            æµå¹´å¤©å¹²å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
        else:
            æµå¹´å¤©å¹²å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'

        if åŸå±€å±æ€§ == 'å…¨é˜´':
            if å¤§è¿å¤©å¹²å±æ€§['é˜´é˜³å±æ€§'] != æµå¹´å¤©å¹²å±æ€§['é˜´é˜³å±æ€§']:
                if å¤§è¿å¤©å¹²å±æ€§['é˜´é˜³å±æ€§'] == 'é˜³':
                    æ›´æ–°æ—ºå¼±çŠ¶æ€(å¤§è¿å¤©å¹²å±æ€§, æµå¹´å¤©å¹²å±æ€§)
                    å¤©å¹²ä½œç”¨åŸå±€(æµå¹´å¤©å¹²å±æ€§)
                else:
                    æ›´æ–°æ—ºå¼±çŠ¶æ€(æµå¹´å¤©å¹²å±æ€§, å¤§è¿å¤©å¹²å±æ€§)
                    å¤©å¹²ä½œç”¨åŸå±€(å¤§è¿å¤©å¹²å±æ€§)
        elif åŸå±€å±æ€§ == 'å…¨é˜³':
            if å¤§è¿å¤©å¹²å±æ€§['é˜´é˜³å±æ€§'] != æµå¹´å¤©å¹²å±æ€§['é˜´é˜³å±æ€§']:
                if å¤§è¿å¤©å¹²å±æ€§['é˜´é˜³å±æ€§'] == 'é˜´':
                    æ›´æ–°æ—ºå¼±çŠ¶æ€(å¤§è¿å¤©å¹²å±æ€§, æµå¹´å¤©å¹²å±æ€§)
                    å¤©å¹²ä½œç”¨åŸå±€(æµå¹´å¤©å¹²å±æ€§)
                else:
                    æ›´æ–°æ—ºå¼±çŠ¶æ€(æµå¹´å¤©å¹²å±æ€§, å¤§è¿å¤©å¹²å±æ€§)
                    å¤©å¹²ä½œç”¨åŸå±€(å¤§è¿å¤©å¹²å±æ€§)
        else:
            # åŸå±€æœ‰é˜´æœ‰é˜³
            for ä½ç½® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']:
                åŸå±€å¤©å¹²å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
                åŸå±€é˜´é˜³ = åŸå±€å¤©å¹²å±æ€§['é˜´é˜³å±æ€§']
                for å¤©å¹²å±æ€§ in [å¤§è¿å¤©å¹²å±æ€§, æµå¹´å¤©å¹²å±æ€§]:
                    if å¤©å¹²å±æ€§['é˜´é˜³å±æ€§'] == åŸå±€é˜´é˜³:
                        æ›´æ–°æ—ºå¼±çŠ¶æ€(å¤©å¹²å±æ€§, åŸå±€å¤©å¹²å±æ€§)

    def å¤„ç†åœ°æ”¯é˜´é˜³(åŸå±€å±æ€§, å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§):
        å¤§è¿å¯¹æµå¹´å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿åœ°æ”¯å±æ€§['åå­—'], æµå¹´åœ°æ”¯å±æ€§['åå­—'])    # å…ˆåˆ¤æ–­å¤§è¿åœ°æ”¯å’Œæµå¹´åœ°æ”¯çš„å…³ç³»
        æµå¹´å¯¹å¤§è¿å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æµå¹´åœ°æ”¯å±æ€§['åå­—'], å¤§è¿åœ°æ”¯å±æ€§['åå­—'])
        # è®¾ç½®å¤§è¿åœ°æ”¯çš„æ—ºå¼±çŠ¶æ€
        if æµå¹´å¯¹å¤§è¿å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
            å¤§è¿åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'æ—º'
        elif æµå¹´å¯¹å¤§è¿å…³ç³» == 'å—åˆ¶å…³ç³»':
            å¤§è¿åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
        else:
            å¤§è¿åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'
        # è®¾ç½®æµå¹´åœ°æ”¯çš„æ—ºå¼±çŠ¶æ€
        if å¤§è¿å¯¹æµå¹´å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
            æµå¹´åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'æ—º'
        elif å¤§è¿å¯¹æµå¹´å…³ç³» == 'å—åˆ¶å…³ç³»':
            æµå¹´åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
        else:
            æµå¹´åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'

        if åŸå±€å±æ€§ == 'å…¨é˜´':
            if å¤§è¿åœ°æ”¯å±æ€§['é˜´é˜³å±æ€§'] != æµå¹´åœ°æ”¯å±æ€§['é˜´é˜³å±æ€§']:
                if å¤§è¿åœ°æ”¯å±æ€§['é˜´é˜³å±æ€§'] == 'é˜³':
                    æ›´æ–°æ—ºå¼±çŠ¶æ€(å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§)
                    åœ°æ”¯ä½œç”¨åŸå±€(æµå¹´åœ°æ”¯å±æ€§)
                else:
                    æ›´æ–°æ—ºå¼±çŠ¶æ€(æµå¹´åœ°æ”¯å±æ€§, å¤§è¿åœ°æ”¯å±æ€§)
                    åœ°æ”¯ä½œç”¨åŸå±€(å¤§è¿åœ°æ”¯å±æ€§)
        elif åŸå±€å±æ€§ == 'å…¨é˜³':
            if å¤§è¿åœ°æ”¯å±æ€§['é˜´é˜³å±æ€§'] != æµå¹´åœ°æ”¯å±æ€§['é˜´é˜³å±æ€§']:
                if å¤§è¿åœ°æ”¯å±æ€§['é˜´é˜³å±æ€§'] == 'é˜´':
                    æ›´æ–°æ—ºå¼±çŠ¶æ€(å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§)
                    åœ°æ”¯ä½œç”¨åŸå±€(æµå¹´åœ°æ”¯å±æ€§)
                else:
                    æ›´æ–°æ—ºå¼±çŠ¶æ€(æµå¹´åœ°æ”¯å±æ€§, å¤§è¿åœ°æ”¯å±æ€§)
                    åœ°æ”¯ä½œç”¨åŸå±€(å¤§è¿åœ°æ”¯å±æ€§)
        else:
            # åŸå±€æœ‰é˜´æœ‰é˜³
            for åœ°æ”¯å±æ€§ in [å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§]:
                for ä½ç½® in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']:
                    åŸå±€åœ°æ”¯å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
                    if åŸå±€åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                        åŸå±€åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'
                        continue
                    if åœ°æ”¯å±æ€§['é˜´é˜³å±æ€§'] == åŸå±€åœ°æ”¯å±æ€§['é˜´é˜³å±æ€§']:
                        æ›´æ–°æ—ºå¼±çŠ¶æ€(åœ°æ”¯å±æ€§, åŸå±€åœ°æ”¯å±æ€§)

    def å¤„ç†åœ°æ”¯ç©ºäº¡(å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§):
        if å¤§è¿åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
            å¤§è¿åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'
            if æµå¹´åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') != 'ç©ºäº¡':
                åè½¬ç»“è®º(æµå¹´åœ°æ”¯å±æ€§)
        elif æµå¹´åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
            æµå¹´åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'
            åè½¬ç»“è®º(å¤§è¿åœ°æ”¯å±æ€§)

    def åˆ¤æ–­åœ°æ”¯ä½œç”¨(å¤§è¿åœ°æ”¯å±æ€§, æµå¹´åœ°æ”¯å±æ€§, åŸå±€åœ°æ”¯å±æ€§):
        if åŸå±€åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':   # å¦‚æœåŸå±€åœ°æ”¯æ˜¯ç©ºäº¡ï¼Œç›´æ¥è¿”å›ä¸æ—ºä¸å¼±
            åŸå±€åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'
            return
        å¤§è¿å¯¹åŸå±€å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å¤§è¿åœ°æ”¯å±æ€§['åå­—'], åŸå±€åœ°æ”¯å±æ€§['åå­—'])    # è·å–ä½œç”¨å…³ç³»
        æµå¹´å¯¹åŸå±€å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(æµå¹´åœ°æ”¯å±æ€§['åå­—'], åŸå±€åœ°æ”¯å±æ€§['åå­—'])
        
        éœ€è¦åè½¬ = (å¤§è¿åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡' or æµå¹´åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡')  # åˆ¤æ–­æ˜¯å¦éœ€è¦åè½¬ç»“æœï¼ˆå½“å¤§è¿æˆ–æµå¹´åœ°æ”¯æ˜¯ç©ºäº¡æ—¶ï¼‰
        
        if å¤§è¿å¯¹åŸå±€å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' or æµå¹´å¯¹åŸå±€å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':   # ç¡®å®šåŸºç¡€çŠ¶æ€
            åŸºç¡€çŠ¶æ€ = 'æ—º' if not éœ€è¦åè½¬ else 'å¼±'
        elif å¤§è¿å¯¹åŸå±€å…³ç³» == 'å—åˆ¶å…³ç³»' or æµå¹´å¯¹åŸå±€å…³ç³» == 'å—åˆ¶å…³ç³»':
            åŸºç¡€çŠ¶æ€ = 'å¼±' if not éœ€è¦åè½¬ else 'æ—º'
        else:
            åŸºç¡€çŠ¶æ€ = 'ä¸æ—ºä¸å¼±'

        åŸå±€åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = åŸºç¡€çŠ¶æ€

        if åŸºç¡€çŠ¶æ€ == 'å¼±':     # åè½¬ç»“è®ºå¦‚æœçŠ¶æ€æ˜¯å¼±
            åè½¬ç»“è®º(åŸå±€åœ°æ”¯å±æ€§)

    def åè½¬ç»“è®º(å±æ€§å­—å…¸):
        åŸç»“è®º = å±æ€§å­—å…¸.get('ç¯å¢ƒç»“è®º', '')
        if åŸç»“è®º == 'å‰':
            å±æ€§å­—å…¸['ç¯å¢ƒç»“è®º'] = 'å‡¶'
        elif åŸç»“è®º == 'å‡¶':
            å±æ€§å­—å…¸['ç¯å¢ƒç»“è®º'] = 'å‰'

    def æ›´æ–°æ—ºå¼±çŠ¶æ€(ä½œç”¨è€…å±æ€§, è¢«ä½œç”¨è€…å±æ€§):
        å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(ä½œç”¨è€…å±æ€§['åå­—'], è¢«ä½œç”¨è€…å±æ€§['åå­—'])
        æ˜¯åŒæ€§ = ä½œç”¨è€…å±æ€§['é˜´é˜³å±æ€§'] == è¢«ä½œç”¨è€…å±æ€§['é˜´é˜³å±æ€§']
        if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»':
            åŸºç¡€çŠ¶æ€ = 'æ—º' if æ˜¯åŒæ€§ else 'å¼±'
        elif å…³ç³» == 'å—åˆ¶å…³ç³»':
            åŸºç¡€çŠ¶æ€ = 'å¼±' if æ˜¯åŒæ€§ else 'æ—º'
        else:
            åŸºç¡€çŠ¶æ€ = 'ä¸æ—ºä¸å¼±'
        if ä½œç”¨è€…å±æ€§['æ˜¯å¦å®ç¥'] == 'å®ç¥':
            åŸºç¡€çŠ¶æ€ += '+'
        è¢«ä½œç”¨è€…å±æ€§['æ—ºå¼±çŠ¶æ€'] = åŸºç¡€çŠ¶æ€
  
        if åŸºç¡€çŠ¶æ€.startswith('å¼±'):   # åè½¬ç»“è®ºå¦‚æœçŠ¶æ€æ˜¯å¼±
            åè½¬ç»“è®º(è¢«ä½œç”¨è€…å±æ€§)

    def å¤©å¹²ä½œç”¨åŸå±€(å¤©å¹²å±æ€§):
        for ä½ç½® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']:
            åŸå±€å¤©å¹²å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
            æ›´æ–°æ—ºå¼±çŠ¶æ€(å¤©å¹²å±æ€§, åŸå±€å¤©å¹²å±æ€§)

    def åœ°æ”¯ä½œç”¨åŸå±€(åœ°æ”¯å±æ€§):
        for ä½ç½® in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']:
            åŸå±€åœ°æ”¯å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
            if åŸå±€åœ°æ”¯å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                åŸå±€åœ°æ”¯å±æ€§['æ—ºå¼±çŠ¶æ€'] = 'ä¸æ—ºä¸å¼±'
                continue
            æ›´æ–°æ—ºå¼±çŠ¶æ€(åœ°æ”¯å±æ€§, åŸå±€åœ°æ”¯å±æ€§)
   
   
    # åœ¨å³ä¾§æ¡†æ¶ä¸­æ·»åŠ æŒ‰é’®ï¼Œç»‘å®šå‡½æ•°
    æŸ¥çœ‹å¤§è¿æµå¹´ä½œç”¨æŒ‰é’® = tk.Button(å³ä¾§æ¡†æ¶, text="æŸ¥çœ‹å¤§è¿æµå¹´ä½œç”¨", command=å¤„ç†å¤§è¿æµå¹´å…±åŒä½œç”¨)
    æŸ¥çœ‹å¤§è¿æµå¹´ä½œç”¨æŒ‰é’®.pack(pady=10)




    def å‘é€åˆ°Cozeçš„API(æ–‡æœ¬):
        import requests
        import json
        import time
        session = requests.Session() # åˆ›å»ºæ–°çš„ä¼šè¯
        # Cozeçš„APIé…ç½®ä¿¡æ¯
        bot_id = "7430070428481470472"  # ä½ çš„æœºå™¨äººID
        api_token = "pat_N0P8ThAsnNn7RhlWQXKHJamRR1fqmE6jZRgGzPdxTwpudzbUsjm0gL7SV1j5ksvK"  # ä½ çš„APIä»¤ç‰Œ
        api_url = "https://api.coze.com/v3/chat"  # å®˜æ–¹æä¾›çš„APIåœ°å€
        # è®¾ç½®è¯·æ±‚å¤´
        headers = {"Authorization": f"Bearer {api_token}", "Content-Type": "application/json"}
        # è®¾ç½®è¯·æ±‚ä½“ï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£ç¤ºä¾‹
        message = {"bot_id": bot_id, "user_id": f"user_{int(time.time())}", "stream": True, "auto_save_history": False,
            "additional_messages": [{"role": "user","content": æ–‡æœ¬, "content_type": "text"}]}
        try:  # å‘é€POSTè¯·æ±‚ï¼Œå¯ç”¨æµå¼å“åº”
            response = session.post(api_url, headers=headers, json=message, stream=True)
            print(f"çŠ¶æ€ç : {response.status_code}")
            if response.status_code == 200:
                print("âŒ› æ­£åœ¨ç­‰å¾…botç”Ÿæˆå®Œæ•´å›å¤...")
                time.sleep(20)  # å…ˆç­‰å¾…20ç§’,è®©botå……åˆ†æ€è€ƒå’Œç”Ÿæˆ
                full_response = ""
                for line in response.iter_lines():
                    if line:
                        line = line.decode('utf-8')
                        if line.startswith("data:"):
                            try:
                                json_str = line.replace("data:", "").strip()
                                data = json.loads(json_str)
                                if isinstance(data, dict):
                                    if data.get("type") == "answer":
                                        content = data.get("content", "")
                                        if content:
                                            full_response = content  # ç›´æ¥æ›¿æ¢è€Œä¸æ˜¯è¿½åŠ 
                            except json.JSONDecodeError:
                                continue             
                return full_response.strip() if full_response else None
            else:
                print(f"è¯·æ±‚å¤±è´¥, é”™è¯¯ä»£ç : {response.status_code}")
                print(f"é”™è¯¯ä¿¡æ¯: {response.text}")
                return None  # æ·»åŠ è¿”å›
        except requests.exceptions.RequestException as e:
            print(f"ç½‘ç»œè¯·æ±‚é”™è¯¯: {str(e)}")
            return None  # æ·»åŠ è¿”å›
        except Exception as e:
            print(f"å…¶ä»–é”™è¯¯: {str(e)}")
            return None  # æ·»åŠ è¿”å›
        finally:
            session.close()   # ç¡®ä¿ä¼šè¯è¢«å…³é—­


    # åœ¨æœ€ååˆ›å»ºä¸€ä¸ªæ–°çš„Frameç”¨äºå®¹çº³"æ–­è¯­å¥å­å®šå‘ç­›é€‰"åŒºåŸŸ
    åº•éƒ¨å®¹å™¨ = tk.Frame(åˆ†æå‘½ç›˜ç•Œé¢çª—å£, bg='#f5f5f1')
    åº•éƒ¨å®¹å™¨.pack(side=tk.BOTTOM, fill=tk.X, pady=20)
    # åˆ›å»ºåˆ†éš”çº¿
    tk.Frame(åº•éƒ¨å®¹å™¨, height=2, bg='#e0e0e0').pack(fill=tk.X, pady=10)

    def ç­›é€‰æ–­è¯­():
        é€‰ä¸­ä¸»é¢˜ = ç­›é€‰é€‰é¡¹.get()
        if é€‰ä¸­ä¸»é¢˜ == "æŠ•èµ„":
            å…³é”®è¯ = ["ã€åè´¢ã€‘"]
            ç­›é€‰ç»“æœ = [å¥å­ for å¥å­ in æ‰€æœ‰æ–­è¯­ if any(å…³é”®è¯ in å¥å­ for å…³é”®è¯ in å…³é”®è¯)]
            print("\n" + "="*50)  # æ·»åŠ åˆ†éš”çº¿
            print(f"ğŸ“„ğŸ“„ğŸ“„ğŸ“„ğŸ“„ğŸ“„æœ¬è½®â€œæŠ•èµ„â€ä¸»é¢˜çš„é€»è¾‘é“¾å¥å­æœ‰ä»¥ä¸‹ï¼š")
            for å¥å­ in ç­›é€‰ç»“æœ:
                print(å¥å­)
            print("="*50 + "\n")  # æ·»åŠ åˆ†éš”çº¿

            # æå–æ ¸å¿ƒé€»è¾‘å¹¶ç›´æ¥æ·»åŠ åˆ°ç­›é€‰ç»“æœä¸­
            for å¥å­ in ç­›é€‰ç»“æœ.copy():  # ä½¿ç”¨copy()é¿å…åœ¨éå†æ—¶ä¿®æ”¹åˆ—è¡¨
                if "æ¨å¯¼è¿‡ç¨‹ï¼š" in å¥å­:
                    if "ã€æ—¥å¹²ã€‘" in å¥å­ or "ã€æ—¥æ”¯ã€‘" in å¥å­:
                        ä¸»ä½“ = "ã€æ—¥å¹²ã€‘" if "ã€æ—¥å¹²ã€‘" in å¥å­ else "ã€æ—¥æ”¯ã€‘"
                        ç»“æœ = "ã€å‰ã€‘" if "ã€å‰ã€‘" in å¥å­ else "ã€å‡¶ã€‘"
                        æ—¥å¹²æ”¯ä½œç”¨çš„ç®€åŒ–å¥å­ = f"{ä¸»ä½“}è®©{å…³é”®è¯[0]}{ç»“æœ}"
                        ç­›é€‰ç»“æœ.append(æ—¥å¹²æ”¯ä½œç”¨çš„ç®€åŒ–å¥å­)  # ç›´æ¥æ·»åŠ åˆ°ç­›é€‰ç»“æœä¸­
            # åˆå¹¶æ‰€æœ‰å¥å­
            æ‰€æœ‰ç­›é€‰å¥å­ = "\n".join(ç­›é€‰ç»“æœ)
            print("\n æ­£åœ¨è¿æ¥Cozeæœºå™¨äºº è¯·ç¨å€™...âŒ›")
            cozeå›å¤ = å‘é€åˆ°Cozeçš„API(f"æ ¹æ®å‘½ä¸»å…«å­—ç”Ÿæˆçš„å…³äºã€æŠ•èµ„ã€‘ä¸»ä½“ä½œç”¨é“¾è·¯çš„å¥å­å¦‚ä¸‹ï¼Œè¯·å¯¹æ ¸å¿ƒå†…å®¹è¿›è¡Œç­›é€‰ä¸ç²¾ç®€ï¼Œé’ˆå¯¹ã€æŠ•èµ„ã€‘ç»™å‡ºæ–­è¯­ï¼š\n{æ‰€æœ‰ç­›é€‰å¥å­}")
            if cozeå›å¤:
                print("\nğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤– Cozeåˆ†æç»“æœ:")
                print(cozeå›å¤)
            else:
                print("âŒ è·å–åˆ†æç»“æœå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")




    # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸ 1. æ–­è¯­å¥å­å®šå‘ç­›é€‰åŒºåŸŸ - æ”¾åœ¨å·¦ä¾§
    ç­›é€‰åŒºåŸŸæ¡†æ¶ = tk.Frame(å·¦ä¾§æ¡†æ¶, bg='#f5f5f1')
    ç­›é€‰åŒºåŸŸæ¡†æ¶.pack(anchor='w', pady=(10, 0))  # anchor='w' ç¡®ä¿å·¦å¯¹é½
    æ°´å¹³æ¡†æ¶ = tk.Frame(ç­›é€‰åŒºåŸŸæ¡†æ¶, bg='#f5f5f1')
    æ°´å¹³æ¡†æ¶.pack(fill='x')
    ç­›é€‰é€‰é¡¹ = ttk.Combobox(æ°´å¹³æ¡†æ¶, values=["æŠ•èµ„"], font=("Arial", 8), width=15, state="readonly")
    ç­›é€‰é€‰é¡¹.set("è¯·é€‰æ‹©ç­›é€‰ä¸»é¢˜")
    ç­›é€‰é€‰é¡¹.pack(side=tk.LEFT, padx=(0, 5))
    ç­›é€‰é€‰é¡¹.bind('<<ComboboxSelected>>', lambda e: æç¤ºæ–‡æœ¬.config(text="å°†ç­›é€‰æ‰€æœ‰å¸¦ã€åè´¢ã€‘ç›¸å…³çš„å¥å­" if ç­›é€‰é€‰é¡¹.get() == "æŠ•èµ„" else ""))   # æ·»åŠ äº‹ä»¶ç»‘å®š
    # åˆ›å»ºç¡®å®šæŒ‰é’®
    ç¡®å®šæŒ‰é’® = tk.Button(æ°´å¹³æ¡†æ¶, text="ç¡®å®š", command=ç­›é€‰æ–­è¯­, font=("Arial", 7), width=3, height=1, relief="solid", bd=0.5) 
    ç¡®å®šæŒ‰é’®.pack(side=tk.LEFT)
    # åˆ›å»ºæç¤ºæ–‡æœ¬
    æç¤ºæ–‡æœ¬ = tk.Label(ç­›é€‰åŒºåŸŸæ¡†æ¶, text="", font=("Arial", 8), fg="gray", bg='#f5f5f1') 
    æç¤ºæ–‡æœ¬.pack(pady=5)  






    # ğŸ–¥ï¸ğŸ–¥ï¸ğŸ–¥ï¸åœ¨å·¦ä¾§æ¡†æ¶æ·»åŠ æ–°æŒ‰é’®ï¼ˆæ”¾åœ¨ç­›é€‰åŒºåŸŸæ¡†æ¶ä¸‹æ–¹ï¼‰
    ä½œç”¨å…³ç³»æŒ‰é’® = tk.Button(å·¦ä¾§æ¡†æ¶, text="æŸ¥çœ‹ä»»æ„ä¸¤ä¸ªå…ƒç´ çš„ä½œç”¨å‰å‡¶", font=("Arial", 10),
        command=lambda: æ˜¾ç¤ºä½œç”¨å…³ç³»çª—å£(åˆ†æå‘½ç›˜ç•Œé¢çª—å£,æ€§åˆ«,æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨,æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨,
            å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨,ç©ºäº¡_åœ°æ”¯_åˆ—è¡¨,å…«å­—ä¿¡æ¯ä¸»å­—å…¸,æœªç°æ­£ååç¥ä¸»å­—å…¸,å…ƒç´ é—´å…³ç³»åˆ†æ,åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶),
        relief="solid",bd=0.5)
    ä½œç”¨å…³ç³»æŒ‰é’®.pack(anchor='w', pady=(10, 0))



    return æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨,æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨,ç©ºäº¡_åœ°æ”¯_åˆ—è¡¨



def æ˜¾ç¤ºä½œç”¨å…³ç³»çª—å£(parent, æ€§åˆ«, æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨, å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨, ç©ºäº¡_åœ°æ”¯_åˆ—è¡¨, å…«å­—ä¿¡æ¯ä¸»å­—å…¸, æœªç°æ­£ååç¥ä¸»å­—å…¸, å…ƒç´ é—´å…³ç³»åˆ†æ, åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶):
    global é€‰ä¸­å€¼
    # åˆ›å»ºæ–°çª—å£å’Œå·¦å³åŒºåŸŸæ¡†æ¶
    ä½œç”¨å…³ç³»çª—å£ = tk.Toplevel(parent)
    ä½œç”¨å…³ç³»çª—å£.title("å…ƒç´ ä½œç”¨å…³ç³»åˆ†æ")
    ä½œç”¨å…³ç³»çª—å£.geometry("1000x800")
    ä½œç”¨å…³ç³»çª—å£.configure(bg='#f5f5f1')
    å·¦åŒºåŸŸ = tk.Frame(ä½œç”¨å…³ç³»çª—å£, bg='#f5f5f1')
    å·¦åŒºåŸŸ.pack(side=tk.LEFT, padx=20, pady=20, expand=True)
    å³åŒºåŸŸ = tk.Frame(ä½œç”¨å…³ç³»çª—å£, bg='#f5f5f1')
    å³åŒºåŸŸ.pack(side=tk.RIGHT, padx=20, pady=20, expand=True)

    # åŒºåŸŸæ ‡é¢˜
    tk.Label(å·¦åŒºåŸŸ, text="ä½œç”¨æ–¹", font=("Arial", 12), bg='#f5f5f1').pack()
    tk.Label(å³åŒºåŸŸ, text="è¢«ä½œç”¨æ–¹", font=("Arial", 12), bg='#f5f5f1').pack()

    # åˆ›å»ºé€‰é¡¹å€¼
    å·²ç°å¤©å¹²é€‰é¡¹ = [f"ã€{å¤©å¹²}ã€‘ã€{ä½ç½®}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['åç¥']}ã€‘"
                for å¤©å¹², ä½ç½® in zip(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²'])]

    æœªç°å¤©å¹²é€‰é¡¹ = [f"ã€{å±æ€§['åå­—']}ã€‘ã€{å±æ€§['åç¥']}ã€‘"
                for å±æ€§ in æœªç°æ­£ååç¥ä¸»å­—å…¸.values()]

    åœ°æ”¯é€‰é¡¹ = [f"ã€{åœ°æ”¯}ã€‘ã€{ä½ç½®}ã€‘"
             for åœ°æ”¯, ä½ç½® in zip(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨, ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯'])]

    # åˆ›å»ºä¸‹æ‹‰æ¡†
    tk.Label(å·¦åŒºåŸŸ, text="å·²ç°å¤©å¹²", font=("Arial", 9), bg='#f5f5f1').pack(pady=(10, 0))
    ä½œç”¨æ–¹å¤©å¹²_å·²ç° = ttk.Combobox(å·¦åŒºåŸŸ, values=[''] + å·²ç°å¤©å¹²é€‰é¡¹, width=30, state='readonly', name='ä½œç”¨æ–¹å¤©å¹²_å·²ç°')
    ä½œç”¨æ–¹å¤©å¹²_å·²ç°.pack()

    tk.Label(å·¦åŒºåŸŸ, text="æœªç°å¤©å¹²", font=("Arial", 9), bg='#f5f5f1').pack(pady=(10, 0))
    ä½œç”¨æ–¹å¤©å¹²_æœªç° = ttk.Combobox(å·¦åŒºåŸŸ, values=[''] + æœªç°å¤©å¹²é€‰é¡¹, width=30, state='readonly', name='ä½œç”¨æ–¹å¤©å¹²_æœªç°')
    ä½œç”¨æ–¹å¤©å¹²_æœªç°.pack()

    tk.Label(å·¦åŒºåŸŸ, text="å·²ç°åœ°æ”¯", font=("Arial", 9), bg='#f5f5f1').pack(pady=(10, 0))
    ä½œç”¨æ–¹åœ°æ”¯ = ttk.Combobox(å·¦åŒºåŸŸ, values=[''] + åœ°æ”¯é€‰é¡¹, width=30, state='readonly', name='ä½œç”¨æ–¹åœ°æ”¯')
    ä½œç”¨æ–¹åœ°æ”¯.pack()

    tk.Label(å³åŒºåŸŸ, text="å·²ç°å¤©å¹²", font=("Arial", 9), bg='#f5f5f1').pack(pady=(10, 0))
    è¢«ä½œç”¨æ–¹å¤©å¹²_å·²ç° = ttk.Combobox(å³åŒºåŸŸ, values=[''] + å·²ç°å¤©å¹²é€‰é¡¹, width=30, state='readonly', name='è¢«ä½œç”¨æ–¹å¤©å¹²_å·²ç°')
    è¢«ä½œç”¨æ–¹å¤©å¹²_å·²ç°.pack()

    tk.Label(å³åŒºåŸŸ, text="æœªç°å¤©å¹²", font=("Arial", 9), bg='#f5f5f1').pack(pady=(10, 0))
    è¢«ä½œç”¨æ–¹å¤©å¹²_æœªç° = ttk.Combobox(å³åŒºåŸŸ, values=[''] + æœªç°å¤©å¹²é€‰é¡¹, width=30, state='readonly', name='è¢«ä½œç”¨æ–¹å¤©å¹²_æœªç°')
    è¢«ä½œç”¨æ–¹å¤©å¹²_æœªç°.pack()

    tk.Label(å³åŒºåŸŸ, text="å·²ç°åœ°æ”¯", font=("Arial", 9), bg='#f5f5f1').pack(pady=(10, 0))
    è¢«ä½œç”¨æ–¹åœ°æ”¯ = ttk.Combobox(å³åŒºåŸŸ, values=[''] + åœ°æ”¯é€‰é¡¹, width=30, state='readonly', name='è¢«ä½œç”¨æ–¹åœ°æ”¯')
    è¢«ä½œç”¨æ–¹åœ°æ”¯.pack()

    é€‰ä¸­å€¼ = {'ä½œç”¨æ–¹å¤©å¹²': '', 'ä½œç”¨æ–¹åœ°æ”¯': '', 'è¢«ä½œç”¨æ–¹å¤©å¹²': '', 'è¢«ä½œç”¨æ–¹åœ°æ”¯': ''}


    def ä»é€‰é¡¹æå–ä¿¡æ¯(é€‰é¡¹æ–‡æœ¬, ç±»å‹=''):
        if not é€‰é¡¹æ–‡æœ¬:
            return {}
        
        parts = é€‰é¡¹æ–‡æœ¬.strip('ã€ã€‘').split('ã€‘ã€')
        å¤©å¹²å = parts[0]
        ç»“æœ = {
            'å…ƒç´ ': parts[0],
            'ç±»å‹': ç±»å‹
        }
        
        if ç±»å‹ == 'å·²ç°å¤©å¹²':
            ç»“æœ.update({
                'ä½ç½®': parts[1],
                'åç¥': parts[2] if len(parts) > 2 else ''
            })
        elif ç±»å‹ == 'æœªç°å¤©å¹²':
            ç»“æœ.update({
                'åç¥': parts[1] if len(parts) > 1 else ''
            })
        elif ç±»å‹ == 'å·²ç°åœ°æ”¯':
            ç»“æœ.update({
                'ä½ç½®': parts[1]
            })
        
        return ç»“æœ


    def æ›´æ–°é€‰ä¸­å€¼(event, é”®å):
        é€‰ä¸­é¡¹ = event.widget.get()
        if not é€‰ä¸­é¡¹:
            é€‰ä¸­å€¼[é”®å] = ''
            return
        ç»„ä»¶åç§° = event.widget.winfo_name()
        # æ¸…é™¤å…¶ä»–ç›¸å…³é€‰é¡¹
        if 'å¤©å¹²' in é”®å:
            if 'ä½œç”¨æ–¹' in é”®å:
                if 'æœªç°' in ç»„ä»¶åç§°:
                    ä½œç”¨æ–¹å¤©å¹²_å·²ç°.set('')
                    é€‰ä¸­å€¼['ä½œç”¨æ–¹æ¥æº'] = 'æœªç°å¤©å¹²'
                else:
                    ä½œç”¨æ–¹å¤©å¹²_æœªç°.set('')
                    é€‰ä¸­å€¼['ä½œç”¨æ–¹æ¥æº'] = 'å·²ç°å¤©å¹²'
            else:
                if 'æœªç°' in ç»„ä»¶åç§°:
                    è¢«ä½œç”¨æ–¹å¤©å¹²_å·²ç°.set('')
                    é€‰ä¸­å€¼['è¢«ä½œç”¨æ–¹æ¥æº'] = 'æœªç°å¤©å¹²'
                else:
                    è¢«ä½œç”¨æ–¹å¤©å¹²_æœªç°.set('')
                    é€‰ä¸­å€¼['è¢«ä½œç”¨æ–¹æ¥æº'] = 'å·²ç°å¤©å¹²'
        
        # æ ¹æ®ä¸åŒç±»å‹çš„ä¸‹æ‹‰æ¡†ï¼Œè®¾ç½®ä¸åŒçš„ç±»å‹æ ‡è®°
        if 'å¤©å¹²' in é”®å:
            if 'æœªç°' in event.widget._name:
                é€‰ä¸­å€¼[é”®å] = ä»é€‰é¡¹æå–ä¿¡æ¯(é€‰ä¸­é¡¹, ç±»å‹='æœªç°å¤©å¹²')
            else:
                é€‰ä¸­å€¼[é”®å] = ä»é€‰é¡¹æå–ä¿¡æ¯(é€‰ä¸­é¡¹, ç±»å‹='å·²ç°å¤©å¹²')
        else:  # åœ°æ”¯
            é€‰ä¸­å€¼[é”®å] = ä»é€‰é¡¹æå–ä¿¡æ¯(é€‰ä¸­é¡¹, ç±»å‹='å·²ç°åœ°æ”¯')


    # ç»‘å®šäº‹ä»¶
    ä½œç”¨æ–¹å¤©å¹²_å·²ç°.bind('<<ComboboxSelected>>', lambda e: æ›´æ–°é€‰ä¸­å€¼(e, 'ä½œç”¨æ–¹å¤©å¹²'))
    ä½œç”¨æ–¹å¤©å¹²_æœªç°.bind('<<ComboboxSelected>>', lambda e: æ›´æ–°é€‰ä¸­å€¼(e, 'ä½œç”¨æ–¹å¤©å¹²'))
    ä½œç”¨æ–¹åœ°æ”¯.bind('<<ComboboxSelected>>', lambda e: æ›´æ–°é€‰ä¸­å€¼(e, 'ä½œç”¨æ–¹åœ°æ”¯'))
    è¢«ä½œç”¨æ–¹å¤©å¹²_å·²ç°.bind('<<ComboboxSelected>>', lambda e: æ›´æ–°é€‰ä¸­å€¼(e, 'è¢«ä½œç”¨æ–¹å¤©å¹²'))
    è¢«ä½œç”¨æ–¹å¤©å¹²_æœªç°.bind('<<ComboboxSelected>>', lambda e: æ›´æ–°é€‰ä¸­å€¼(e, 'è¢«ä½œç”¨æ–¹å¤©å¹²'))
    è¢«ä½œç”¨æ–¹åœ°æ”¯.bind('<<ComboboxSelected>>', lambda e: æ›´æ–°é€‰ä¸­å€¼(e, 'è¢«ä½œç”¨æ–¹åœ°æ”¯'))

    def è·å–ä½œç”¨è·¯å¾„(èµ·å§‹ä¿¡æ¯, ç›®æ ‡ä¿¡æ¯, ç±»å‹='å¤©å¹²'):
        if ç±»å‹ == 'å¤©å¹²':
            ä½ç½®é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
        else:
            ä½ç½®é¡ºåº = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']
        
        # 1. å¤„ç†è¢«ä½œç”¨æ–¹æ˜¯"æœªç°å¤©å¹²"çš„ç‰¹æ®Šæƒ…å†µ
        if isinstance(ç›®æ ‡ä¿¡æ¯, dict) and ç›®æ ‡ä¿¡æ¯.get('ç±»å‹') == 'æœªç°å¤©å¹²':
            çª—å£ä½ç½® = æœªç°æ­£ååç¥ä¸»å­—å…¸[ç›®æ ‡ä¿¡æ¯['å…ƒç´ ']]['çª—å£ä½ç½®']
            èµ·å§‹ä½ç½® = èµ·å§‹ä¿¡æ¯['ä½ç½®']
            
            # è·å–ä»èµ·å§‹ä½ç½®åˆ°çª—å£ä½ç½®çš„è·¯å¾„
            èµ·å§‹ç´¢å¼• = ä½ç½®é¡ºåº.index(èµ·å§‹ä½ç½®)
            ç»“æŸç´¢å¼• = ä½ç½®é¡ºåº.index(çª—å£ä½ç½®)
            
            if èµ·å§‹ç´¢å¼• <= ç»“æŸç´¢å¼•:
                è·¯å¾„ = ä½ç½®é¡ºåº[èµ·å§‹ç´¢å¼•:ç»“æŸç´¢å¼•+1]
            else:
                è·¯å¾„ = ä½ç½®é¡ºåº[èµ·å§‹ç´¢å¼•:ç»“æŸç´¢å¼•-1:-1]
            return è·¯å¾„
        
        # 2. å¤„ç†ä½œç”¨æ–¹æ˜¯"æœªç°å¤©å¹²"çš„ç‰¹æ®Šæƒ…å†µ
        elif èµ·å§‹ä¿¡æ¯.get('ç±»å‹') == 'æœªç°å¤©å¹²' and ç›®æ ‡ä¿¡æ¯.get('ç±»å‹') != 'æœªç°å¤©å¹²':
            ä½œç”¨æ–¹çª—å£ä½ç½® = æœªç°æ­£ååç¥ä¸»å­—å…¸[èµ·å§‹ä¿¡æ¯['å…ƒç´ ']]['çª—å£ä½ç½®']
            è·¯å¾„ = [f"æœªç°å¤©å¹²({èµ·å§‹ä¿¡æ¯['å…ƒç´ ']})", ä½œç”¨æ–¹çª—å£ä½ç½®]
            
            # ä»çª—å£ä½ç½®åˆ°ç›®æ ‡ä½ç½®çš„è·¯å¾„
            èµ·å§‹ç´¢å¼• = ä½ç½®é¡ºåº.index(ä½œç”¨æ–¹çª—å£ä½ç½®)
            ç»“æŸç´¢å¼• = ä½ç½®é¡ºåº.index(ç›®æ ‡ä¿¡æ¯['ä½ç½®'])
            if èµ·å§‹ç´¢å¼• <= ç»“æŸç´¢å¼•:
                è·¯å¾„.extend(ä½ç½®é¡ºåº[èµ·å§‹ç´¢å¼•+1:ç»“æŸç´¢å¼•+1])
            else:
                è·¯å¾„.extend(ä½ç½®é¡ºåº[èµ·å§‹ç´¢å¼•-1:ç»“æŸç´¢å¼•-1:-1])
            return è·¯å¾„
        
        # 3. å¤„ç†ä½œç”¨æ–¹å’Œè¢«ä½œç”¨æ–¹éƒ½æ˜¯æœªç°å¤©å¹²çš„ç‰¹æ®Šæƒ…å†µ
        elif èµ·å§‹ä¿¡æ¯.get('ç±»å‹') == 'æœªç°å¤©å¹²' and ç›®æ ‡ä¿¡æ¯.get('ç±»å‹') == 'æœªç°å¤©å¹²':
            ä½œç”¨æ–¹çª—å£ä½ç½® = æœªç°æ­£ååç¥ä¸»å­—å…¸[èµ·å§‹ä¿¡æ¯['å…ƒç´ ']]['çª—å£ä½ç½®']
            è¢«ä½œç”¨æ–¹çª—å£ä½ç½® = æœªç°æ­£ååç¥ä¸»å­—å…¸[ç›®æ ‡ä¿¡æ¯['å…ƒç´ ']]['çª—å£ä½ç½®']
            
            # å¦‚æœæ˜¯åŒä¸€ä¸ªçª—å£
            if ä½œç”¨æ–¹çª—å£ä½ç½® == è¢«ä½œç”¨æ–¹çª—å£ä½ç½®:
                return [
                    f"æœªç°å¤©å¹²({èµ·å§‹ä¿¡æ¯['å…ƒç´ ']})",
                    ä½œç”¨æ–¹çª—å£ä½ç½®,
                    f"æœªç°å¤©å¹²({ç›®æ ‡ä¿¡æ¯['å…ƒç´ ']})"]
            
            # å¦‚æœæ˜¯ä¸åŒçª—å£
            è·¯å¾„ = [f"æœªç°å¤©å¹²({èµ·å§‹ä¿¡æ¯['å…ƒç´ ']})", ä½œç”¨æ–¹çª—å£ä½ç½®]
            èµ·å§‹ç´¢å¼• = ä½ç½®é¡ºåº.index(ä½œç”¨æ–¹çª—å£ä½ç½®)
            ç»“æŸç´¢å¼• = ä½ç½®é¡ºåº.index(è¢«ä½œç”¨æ–¹çª—å£ä½ç½®)
            
            if èµ·å§‹ç´¢å¼• <= ç»“æŸç´¢å¼•:
                è·¯å¾„.extend(ä½ç½®é¡ºåº[èµ·å§‹ç´¢å¼•+1:ç»“æŸç´¢å¼•+1])
            else:
                è·¯å¾„.extend(ä½ç½®é¡ºåº[èµ·å§‹ç´¢å¼•-1:ç»“æŸç´¢å¼•-1:-1])
            
            è·¯å¾„.append(f"æœªç°å¤©å¹²({ç›®æ ‡ä¿¡æ¯['å…ƒç´ ']})")
            return è·¯å¾„
        
        # 4. å¤„ç†æ™®é€šæƒ…å†µï¼ˆå·²ç°å¤©å¹²/åœ°æ”¯ä¹‹é—´çš„ä½œç”¨ï¼‰
        if isinstance(èµ·å§‹ä¿¡æ¯, dict):
            èµ·å§‹ä½ç½® = èµ·å§‹ä¿¡æ¯['ä½ç½®']
        else:
            èµ·å§‹ä½ç½® = èµ·å§‹ä¿¡æ¯
        if isinstance(ç›®æ ‡ä¿¡æ¯, dict):
            ç›®æ ‡ä½ç½® = ç›®æ ‡ä¿¡æ¯['ä½ç½®']
        else:
            ç›®æ ‡ä½ç½® = ç›®æ ‡ä¿¡æ¯

        if ç±»å‹ == 'å¤©å¹²':
            ä½ç½®é¡ºåº = ['å¹´å¹²', 'æœˆå¹²', 'æ—¥å¹²', 'æ—¶å¹²']
        else:
            ä½ç½®é¡ºåº = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']

        èµ·å§‹ç´¢å¼• = ä½ç½®é¡ºåº.index(èµ·å§‹ä½ç½®)
        ç»“æŸç´¢å¼• = ä½ç½®é¡ºåº.index(ç›®æ ‡ä½ç½®)

        if èµ·å§‹ç´¢å¼• == ç»“æŸç´¢å¼•:
            # èµ·å§‹ä½ç½®å’Œç›®æ ‡ä½ç½®ç›¸åŒ
            è·¯å¾„ = [èµ·å§‹ä½ç½®]
        elif èµ·å§‹ç´¢å¼• < ç»“æŸç´¢å¼•:
            # é¡ºåºå‰è¿›
            è·¯å¾„ = ä½ç½®é¡ºåº[èµ·å§‹ç´¢å¼•:ç»“æŸç´¢å¼•+1]
        else:
            # é€†åºå‰è¿›
            è·¯å¾„ = ä½ç½®é¡ºåº[èµ·å§‹ç´¢å¼•:ç»“æŸç´¢å¼•-1:-1]
        return è·¯å¾„


    def åˆ¤æ–­æ­£åå…³ç³»(åç¥):
        äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ = ['æ­£å°', 'æ­£å®˜', 'æ­£è´¢', 'åŠ«è´¢', 'ä¼¤å®˜'] 
        return 'æ­£åç¥' if åç¥ in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'


    def æ£€æŸ¥ä½œç”¨å…³ç³»(æ˜¾ç¤ºè¿‡ç¨‹=True):
        global é€‰ä¸­å€¼
        nonlocal å…«å­—ä¿¡æ¯ä¸»å­—å…¸
        def æ‰“å°ä¿¡æ¯(ä¿¡æ¯):
            if æ˜¾ç¤ºè¿‡ç¨‹:
                print(ä¿¡æ¯)
            

        ä½œç”¨è·¯å¾„ = []
        è¢«ä½œç”¨æ–¹ä¿¡æ¯ = {}
        è¢«ä½œç”¨æ–¹å±æ€§ = {}

        äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ = ['æ­£å°', 'æ­£å®˜', 'æ­£è´¢', 'åŠ«è´¢', 'ä¼¤å®˜']
        ä½œç”¨æ–¹_å¤©å¹² = é€‰ä¸­å€¼.get('ä½œç”¨æ–¹å¤©å¹²')
        ä½œç”¨æ–¹_åœ°æ”¯ = é€‰ä¸­å€¼.get('ä½œç”¨æ–¹åœ°æ”¯')
        è¢«ä½œç”¨æ–¹_å¤©å¹² = é€‰ä¸­å€¼.get('è¢«ä½œç”¨æ–¹å¤©å¹²')
        è¢«ä½œç”¨æ–¹_åœ°æ”¯ = é€‰ä¸­å€¼.get('è¢«ä½œç”¨æ–¹åœ°æ”¯')
        

        # å¦‚æœæ˜¯å¤©å¹²ä½œç”¨
        if ä½œç”¨æ–¹_å¤©å¹² and è¢«ä½œç”¨æ–¹_å¤©å¹²:
            if ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'å·²ç°å¤©å¹²' and è¢«ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'å·²ç°å¤©å¹²':
                ä½œç”¨è·¯å¾„.append(ä½œç”¨æ–¹_å¤©å¹²['ä½ç½®'])
                è¢«ä½œç”¨æ–¹ä¿¡æ¯ = {'ä½ç½®': è¢«ä½œç”¨æ–¹_å¤©å¹²['ä½ç½®']}
            ä½œç”¨æ–¹ = ä½œç”¨æ–¹_å¤©å¹²['ä½ç½®']
            è¢«ä½œç”¨æ–¹ = è¢«ä½œç”¨æ–¹_å¤©å¹²['ä½ç½®']
        # å¦‚æœæ˜¯åœ°æ”¯ä½œç”¨
        elif ä½œç”¨æ–¹_åœ°æ”¯ and è¢«ä½œç”¨æ–¹_åœ°æ”¯:
            if ä½œç”¨æ–¹_åœ°æ”¯.get('ç±»å‹') == 'å·²ç°åœ°æ”¯' and è¢«ä½œç”¨æ–¹_åœ°æ”¯.get('ç±»å‹') == 'å·²ç°åœ°æ”¯':
                ä½œç”¨è·¯å¾„.append(ä½œç”¨æ–¹_åœ°æ”¯['ä½ç½®'])
                è¢«ä½œç”¨æ–¹ä¿¡æ¯ = {'ä½ç½®': è¢«ä½œç”¨æ–¹_åœ°æ”¯['ä½ç½®']}
                ä½œç”¨æ–¹ = ä½œç”¨æ–¹_åœ°æ”¯['ä½ç½®']
                è¢«ä½œç”¨æ–¹ = è¢«ä½œç”¨æ–¹_åœ°æ”¯['ä½ç½®']



        if ä½œç”¨æ–¹_å¤©å¹²:
            æ‰“å°ä¿¡æ¯(f"ä½œç”¨æ–¹å¤©å¹²ç±»å‹={ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹')}")
        if è¢«ä½œç”¨æ–¹_å¤©å¹²:
            æ‰“å°ä¿¡æ¯(f"è¢«ä½œç”¨æ–¹å¤©å¹²ç±»å‹={è¢«ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹')}")

        # æƒ…å†µ1ï¼šä½œç”¨æ–¹"å·²ç°å¤©å¹²" + è¢«ä½œç”¨æ–¹"å·²ç°å¤©å¹²"ğŸŒŸ
        if (ä½œç”¨æ–¹_å¤©å¹² and è¢«ä½œç”¨æ–¹_å¤©å¹² and ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'å·²ç°å¤©å¹²' and è¢«ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'å·²ç°å¤©å¹²'):
            æ‰“å°ä¿¡æ¯("\nè¿›å…¥æƒ…å†µ1ï¼šä½œç”¨æ–¹â€œå·²ç°å¤©å¹²â€ + è¢«ä½œç”¨æ–¹â€œå·²ç°å¤©å¹²â€")
            
            # è·å–ä½œç”¨è·¯å¾„
            ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(ä½œç”¨æ–¹_å¤©å¹², è¢«ä½œç”¨æ–¹_å¤©å¹², ç±»å‹='å¤©å¹²')
            if not ä½œç”¨è·¯å¾„:  # å¦‚æœæ­£å‘è·¯å¾„ä¸ºç©ºï¼Œå°è¯•é€†å‘è·¯å¾„
                ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(è¢«ä½œç”¨æ–¹_å¤©å¹², ä½œç”¨æ–¹_å¤©å¹², ç±»å‹='å¤©å¹²')
                if ä½œç”¨è·¯å¾„:  # å¦‚æœæ‰¾åˆ°é€†å‘è·¯å¾„ï¼Œå°†å…¶åè½¬
                    ä½œç”¨è·¯å¾„ = ä½œç”¨è·¯å¾„[::-1]

            æ‰“å°ä¿¡æ¯("\nä½œç”¨è·¯å¾„ï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
            
            æœ€ç»ˆä½œç”¨ç»“æœ = None
            
            # éå†ä½œç”¨è·¯å¾„ï¼Œé€æ­¥å¤„ç†æ¯ä¸€æ­¥çš„ä½œç”¨
            for i in range(len(ä½œç”¨è·¯å¾„) - 1):
                å½“å‰ä½ç½® = ä½œç”¨è·¯å¾„[i]
                ä¸‹ä¸€ä¸ªä½ç½® = ä½œç”¨è·¯å¾„[i + 1]
                å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®]
                ä¸‹ä¸€ä¸ªå…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä¸ªä½ç½®]
                å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                ä¸‹ä¸€ä¸ªå…ƒç´ åå­— = ä¸‹ä¸€ä¸ªå…ƒç´ ['åå­—']
                å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ åå­—, ä¸‹ä¸€ä¸ªå…ƒç´ åå­—)
                æœ€ç»ˆå…³ç³» = å…³ç³»
                if å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®].get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                    æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³»[1] == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                
                æ‰“å°ä¿¡æ¯(f"\nã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{ä¸‹ä¸€ä¸ªä½ç½®}ã€‘ã€{ä¸‹ä¸€ä¸ªå…ƒç´ åå­—}ã€‘")
                æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®].get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºï¼š{æœ€ç»ˆå…³ç³»}")
                if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä¸ªä½ç½®]['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä¸ªä½ç½®}ã€‘ã€{ä¸‹ä¸€ä¸ªå…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºï¼šã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä¸ªä½ç½®].get('æ—ºå¼±çŠ¶æ€')}ã€‘")

                æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»               # è®°å½•æœ€åä¸€æ¬¡çš„ä½œç”¨å…³ç³»ï¼Œç”¨äºæœ€ç»ˆç»“è®º
            
                if i == len(ä½œç”¨è·¯å¾„) - 2:          # -2æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨çœ‹å½“å‰ä½ç½®åˆ°ä¸‹ä¸€ä¸ªä½ç½®çš„å…³ç³»
                    æœ€ç»ˆè¢«ä½œç”¨æ–¹ = ä¸‹ä¸€ä¸ªä½ç½®
                    æœ€ç»ˆå…³ç³»ç»“æœ = æœ€ç»ˆå…³ç³»

            # è·å–æœ€ç»ˆè¢«ä½œç”¨æ–¹çš„ä¿¡æ¯
            æœ€ç»ˆè¢«ä½œç”¨æ–¹ä½ç½® = ä½œç”¨è·¯å¾„[-1]
            æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æœ€ç»ˆè¢«ä½œç”¨æ–¹ä½ç½®]
            æœ€ç»ˆè¢«ä½œç”¨æ–¹å¿Œç”¨ç¥ = æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯.get('å¿Œç”¨ç¥å½’å±')
            
            # åˆ¤æ–­è¢«ä½œç”¨ç¯å¢ƒç»“è®º
            if æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
            else:
                if æœ€ç»ˆè¢«ä½œç”¨æ–¹å¿Œç”¨ç¥ == 'ç”¨ç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶å…³ç³»' else 'å‡¶'
                elif æœ€ç»ˆè¢«ä½œç”¨æ–¹å¿Œç”¨ç¥ == 'å¿Œç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'å—åˆ¶å…³ç³»' else 'å‡¶'
                else:
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'æœªçŸ¥'
            
            # è¾“å‡ºæœ€ç»ˆç»“è®º
            æ‰“å°ä¿¡æ¯(f"\nğŸ”æœ€ç»ˆè¢«ä½œç”¨æ–¹ï¼šã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹ä½ç½®}ã€‘ã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯['åå­—']}ã€‘è¢«å‰ä¸€å…ƒç´ ã€{æœ€ç»ˆä½œç”¨ç»“æœ}ã€‘ï¼Œâˆµè¢«ä½œç”¨æ–¹ä¸ºã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹å¿Œç”¨ç¥}ã€‘ï¼Œâˆ´æœ€ç»ˆã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹ä½ç½®}ã€‘ã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åç¥']}ã€‘è¢«ã€{ä½œç”¨è·¯å¾„[0]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æœ€ç»ˆè¢«ä½œç”¨æ–¹ä½ç½®]['åç¥']}ã€‘ä½œç”¨ç»“è®ºä¸ºï¼šã€{è¢«ä½œç”¨ç¯å¢ƒç»“è®º}ã€‘")
            
            return {'ä½œç”¨æ–¹': ä½œç”¨æ–¹,'è¢«ä½œç”¨æ–¹': è¢«ä½œç”¨æ–¹,'ä½œç”¨ç»“è®º': è¢«ä½œç”¨ç¯å¢ƒç»“è®º}



        # æƒ…å†µ2ï¼šä½œç”¨æ–¹"å·²ç°å¤©å¹²" + è¢«ä½œç”¨æ–¹"æœªç°å¤©å¹²"ğŸŒŸ
        elif (ä½œç”¨æ–¹_å¤©å¹² and è¢«ä½œç”¨æ–¹_å¤©å¹² and ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'å·²ç°å¤©å¹²' and è¢«ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'æœªç°å¤©å¹²'):
            æ‰“å°ä¿¡æ¯("\nè¿›å…¥æƒ…å†µ2ï¼šä½œç”¨æ–¹â€œå·²ç°å¤©å¹²â€ + è¢«ä½œç”¨æ–¹â€œæœªç°å¤©å¹²â€")
            # ç¬¬ä¸€æ­¥ï¼šè·å–ä½œç”¨æ–¹ä¿¡æ¯
            ä½œç”¨æ–¹ä¿¡æ¯ = ä½œç”¨æ–¹_å¤©å¹²
            è¢«ä½œç”¨æ–¹ä¿¡æ¯ = è¢«ä½œç”¨æ–¹_å¤©å¹²
            è¢«ä½œç”¨æ–¹å¤©å¹²å = è¢«ä½œç”¨æ–¹ä¿¡æ¯['å…ƒç´ ']
            è¢«ä½œç”¨æ–¹å±æ€§ = æœªç°æ­£ååç¥ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹å¤©å¹²å]
            ä½œç”¨æ–¹å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']]
            çª—å£ä½ç½® = è¢«ä½œç”¨æ–¹å±æ€§['çª—å£ä½ç½®']

            # ç¬¬äºŒæ­¥ï¼šè·å–ä½œç”¨è·¯å¾„ï¼ˆä»ä½œç”¨æ–¹ä½ç½®åˆ°çª—å£ä½ç½®ï¼‰
            if ä½œç”¨æ–¹ä¿¡æ¯['çª—å£ä½ç½®'] == çª—å£ä½ç½®:
                ä½œç”¨è·¯å¾„ = [ä½œç”¨æ–¹ä¿¡æ¯['çª—å£ä½ç½®']]
            else:
                ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(ä½œç”¨æ–¹ä¿¡æ¯, çª—å£ä½ç½®, ç±»å‹='å¤©å¹²')
            ä½œç”¨è·¯å¾„.append(f"æœªç°å¤©å¹²({è¢«ä½œç”¨æ–¹å¤©å¹²å})")
            æ‰“å°ä¿¡æ¯("ä½œç”¨è·¯å¾„ï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
            æœ€ç»ˆä½œç”¨ç»“æœ = None
            # ç¬¬ä¸‰æ­¥ï¼šä¾æ¬¡ä½œç”¨åˆ°çª—å£
            for i in range(len(ä½œç”¨è·¯å¾„)-2):  # ä¸åŒ…æ‹¬æœ€åçš„æœªç°å¤©å¹²
                å½“å‰ä½ç½® = ä½œç”¨è·¯å¾„[i]
                ä¸‹ä¸€ä¸ªä½ç½® = ä½œç”¨è·¯å¾„[i+1]
                å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®]
                ä¸‹ä¸€ä¸ªå…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä¸ªä½ç½®]
                å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                ä¸‹ä¸€ä¸ªå…ƒç´ åå­— = ä¸‹ä¸€ä¸ªå…ƒç´ ['åå­—']
                å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ ['åå­—'], ä¸‹ä¸€ä¸ªå…ƒç´ ['åå­—'])
                æœ€ç»ˆå…³ç³» = å…³ç³»
                if å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®].get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                    æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³»[1] == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                æ‰“å°ä¿¡æ¯(f"\nã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{ä¸‹ä¸€ä¸ªä½ç½®}ã€‘ã€{ä¸‹ä¸€ä¸ªå…ƒç´ åå­—}ã€‘")
                æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®].get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºï¼š{æœ€ç»ˆå…³ç³»}")
                if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä¸ªä½ç½®]['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä¸ªä½ç½®}ã€‘ã€{ä¸‹ä¸€ä¸ªå…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºï¼šã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä¸ªä½ç½®].get('æ—ºå¼±çŠ¶æ€')}ã€‘")

            # ç¬¬å››æ­¥ï¼šçª—å£å¤©å¹²ä½œç”¨æœªç°å¤©å¹²ï¼ˆè€ƒè™‘é•œåƒåè½¬ï¼‰
            çª—å£å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®]
            çª—å£åç¥ = è¢«ä½œç”¨æ–¹å±æ€§['çª—å£åç¥']
            è¢«ä½œç”¨æ–¹åç¥ = è¢«ä½œç”¨æ–¹ä¿¡æ¯.get('åç¥') 
            çª—å£åç¥ = è¢«ä½œç”¨æ–¹å±æ€§.get('çª—å£åç¥')
            æœ€ç»ˆå…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(çª—å£å¤©å¹²['åå­—'], è¢«ä½œç”¨æ–¹å¤©å¹²å)[1]

            # åˆ¤æ–­æ˜¯å¦éœ€è¦é•œåƒåè½¬ï¼ˆæ­£åæ€§ä¸åŒï¼‰
            è¢«ä½œç”¨æ–¹æ­£å = 'æ­£åç¥' if str(è¢«ä½œç”¨æ–¹åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
            çª—å£æ­£å = 'æ­£åç¥' if str(çª—å£åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
            
            if è¢«ä½œç”¨æ–¹æ­£å != çª—å£æ­£å:
                æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if æœ€ç»ˆå…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                æ‰“å°ä¿¡æ¯(f"\nâˆµæœªç°å¤©å¹²ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{çª—å£åç¥}ã€‘æ­£åæ€§ä¸åŒï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆ{æœ€ç»ˆå…³ç³»}")
            else:
                æ‰“å°ä¿¡æ¯(f"\nâˆµæœªç°å¤©å¹²ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{çª—å£åç¥}ã€‘æ­£åç›¸åŒï¼Œâˆ´å®ƒä»¬æ˜¯ä½œç”¨å…³ç³»â€œ{æœ€ç»ˆå…³ç³»}â€ä¸ç”¨å˜")
            # åˆ¤æ–­æ˜¯å¦éœ€è¦é•œåƒåè½¬ï¼ˆçª—å£å¤©å¹²ä¸ºå¼±ï¼‰
            if çª—å£å¤©å¹².get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if æœ€ç»ˆå…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                æ‰“å°ä¿¡æ¯(f"\nâˆµçª—å£å¤©å¹²ä¸ºå¼±ï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆ{æœ€ç»ˆå…³ç³»}")
            
            æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»

            # åˆ¤æ–­è¢«ä½œç”¨ç¯å¢ƒç»“è®º
            if è¢«ä½œç”¨æ–¹å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
            else:
                if è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'ç”¨ç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶å…³ç³»' else 'å‡¶'
                elif è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'å¿Œç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'å—åˆ¶å…³ç³»' else 'å‡¶'
                else:
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'æœªçŸ¥'

            # è¾“å‡ºæœ€ç»ˆç»“è®º
            æ‰“å°ä¿¡æ¯(f"\nğŸ”æœ€ç»ˆè¢«ä½œç”¨æ–¹ï¼šã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘è¢«çª—å£ã€{æœ€ç»ˆä½œç”¨ç»“æœ}ã€‘ï¼Œâˆµè¢«ä½œç”¨æ–¹ä¸ºã€{è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±']}ã€‘ï¼Œâˆ´æœ€ç»ˆã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘ã€{è¢«ä½œç”¨æ–¹åç¥}ã€‘è¢«ã€{ä½œç”¨è·¯å¾„[0]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åç¥']}ã€‘ä½œç”¨ç»“è®ºä¸ºï¼šã€{è¢«ä½œç”¨ç¯å¢ƒç»“è®º}ã€‘")
            return {'ä½œç”¨æ–¹': ä½œç”¨æ–¹,'è¢«ä½œç”¨æ–¹': è¢«ä½œç”¨æ–¹,'ä½œç”¨ç»“è®º': è¢«ä½œç”¨ç¯å¢ƒç»“è®º}


        # æƒ…å†µ3ï¼šä½œç”¨æ–¹"æœªç°å¤©å¹²" + è¢«ä½œç”¨æ–¹"å·²ç°å¤©å¹²"ğŸŒŸ
        elif (ä½œç”¨æ–¹_å¤©å¹² and è¢«ä½œç”¨æ–¹_å¤©å¹² and ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'æœªç°å¤©å¹²' and è¢«ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'å·²ç°å¤©å¹²'):
            æ‰“å°ä¿¡æ¯("\nè¿›å…¥æƒ…å†µ3ï¼šä½œç”¨æ–¹â€œæœªç°å¤©å¹²â€ + è¢«ä½œç”¨æ–¹â€œå·²ç°å¤©å¹²â€")
            # ç¬¬ä¸€æ­¥ï¼šè·å–ä½œç”¨æ–¹ä¿¡æ¯
            ä½œç”¨æ–¹ä¿¡æ¯ = ä½œç”¨æ–¹_å¤©å¹²
            è¢«ä½œç”¨æ–¹ä¿¡æ¯ = è¢«ä½œç”¨æ–¹_å¤©å¹²
            ä½œç”¨æ–¹å¤©å¹²å = ä½œç”¨æ–¹ä¿¡æ¯['å…ƒç´ ']
            è¢«ä½œç”¨æ–¹å¤©å¹²å = è¢«ä½œç”¨æ–¹ä¿¡æ¯['å…ƒç´ ']
            ä½œç”¨æ–¹å±æ€§ = æœªç°æ­£ååç¥ä¸»å­—å…¸[ä½œç”¨æ–¹å¤©å¹²å]
            è¢«ä½œç”¨æ–¹å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹å¤©å¹²å]
            çª—å£ä½ç½® = ä½œç”¨æ–¹å±æ€§['çª—å£ä½ç½®']
            çª—å£å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®]

            # ç¬¬äºŒæ­¥ï¼šæ‰“å°ä½œç”¨è·¯å¾„
            çª—å£ä¿¡æ¯ = {'ç±»å‹': 'å·²ç°å¤©å¹²', 'çª—å£ä½ç½®': çª—å£ä½ç½®, 'åå­—': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®]['åå­—']}

            if è¢«ä½œç”¨æ–¹ä¿¡æ¯['çª—å£ä½ç½®'] == çª—å£ä½ç½®:    # å¤„ç†ç‰¹æ®Šæƒ…å†µï¼šè¢«ä½œç”¨æ–¹å°±æ˜¯çª—å£
                ä½œç”¨è·¯å¾„ = [çª—å£ä½ç½®]
            else:
                ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(çª—å£ä¿¡æ¯, è¢«ä½œç”¨æ–¹ä¿¡æ¯, ç±»å‹='å¤©å¹²')     # è·å–ä»çª—å£åˆ°è¢«ä½œç”¨æ–¹çš„è·¯å¾„
                if not ä½œç”¨è·¯å¾„:
                    ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(è¢«ä½œç”¨æ–¹ä¿¡æ¯, çª—å£ä¿¡æ¯, ç±»å‹='å¤©å¹²')
                    if ä½œç”¨è·¯å¾„: 
                        ä½œç”¨è·¯å¾„ = ä½œç”¨è·¯å¾„[::-1]
            æ‰“å°ä¿¡æ¯("\nä½œç”¨è·¯å¾„ï¼š" + "â†’".join([f"æœªç°å¤©å¹²({ä½œç”¨æ–¹å¤©å¹²å})"] + ä½œç”¨è·¯å¾„))

            # ç¬¬ä¸‰æ­¥ï¼šä½œç”¨æ–¹æœªç°å¤©å¹²ä½œç”¨åˆ°çª—å£ï¼ˆè€ƒè™‘é•œåƒåè½¬ and å—åˆ¶åè¦å˜â€˜å¼±â€™ï¼‰
            å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(ä½œç”¨æ–¹å¤©å¹²å, çª—å£å¤©å¹²['åå­—'])
            æœ€ç»ˆå…³ç³» = å…³ç³»
            # åˆ¤æ–­æ˜¯å¦éœ€è¦é•œåƒåè½¬ï¼ˆæ­£åæ€§ä¸åŒï¼‰
            ä½œç”¨æ–¹åç¥ = ä½œç”¨æ–¹å±æ€§['åç¥']
            çª—å£åç¥ = ä½œç”¨æ–¹å±æ€§['çª—å£åç¥']
            ä½œç”¨æ–¹æ­£å = 'æ­£åç¥' if str(ä½œç”¨æ–¹åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
            çª—å£æ­£å = 'æ­£åç¥' if str(çª—å£åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
            if ä½œç”¨æ–¹æ­£å != çª—å£æ­£å:
                æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if æœ€ç»ˆå…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                æ‰“å°ä¿¡æ¯(f"\nâˆµæœªç°å¤©å¹²ã€{ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{çª—å£åç¥}ã€‘æ­£åæ€§ä¸åŒï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆ{æœ€ç»ˆå…³ç³»}")
            else:
                æ‰“å°ä¿¡æ¯(f"\nâˆµæœªç°å¤©å¹²ã€{ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{çª—å£åç¥}ã€‘æ­£åç›¸åŒï¼Œâˆ´å®ƒä»¬æ˜¯ä½œç”¨å…³ç³»ã€{æœ€ç»ˆå…³ç³»}ã€‘ä¸ç”¨å˜")
            # åˆ¤æ–­çª—å£ä½œç”¨äºä¸‹ä¸€ä¸ªå…ƒç´ æ—¶å…³ç³»ç»“è®ºæ˜¯å¦éœ€è¦é•œåƒåè½¬ï¼ˆçª—å£å¤©å¹²ä¸ºå¼±ï¼‰
            if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                çª—å£å¤©å¹²['æ—ºå¼±çŠ¶æ€'] = 'å¼±'

            for i in range(len(ä½œç”¨è·¯å¾„)-1):
                å½“å‰ä½ç½® = ä½œç”¨è·¯å¾„[i]
                ä¸‹ä¸€ä¸ªä½ç½® = ä½œç”¨è·¯å¾„[i+1]
                å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®]
                ä¸‹ä¸€ä¸ªå…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä¸ªä½ç½®]
                å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                ä¸‹ä¸€ä¸ªå…ƒç´ åå­— = ä¸‹ä¸€ä¸ªå…ƒç´ ['åå­—']
                å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ åå­—, ä¸‹ä¸€ä¸ªå…ƒç´ åå­—)
                æœ€ç»ˆå…³ç³» = å…³ç³»
                æ‰“å°ä¿¡æ¯(f"\nã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{ä¸‹ä¸€ä¸ªä½ç½®}ã€‘ã€{ä¸‹ä¸€ä¸ªå…ƒç´ åå­—}ã€‘")
                if å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®].get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                    æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³»[1] == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                    
                    æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®].get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºï¼š{æœ€ç»ˆå…³ç³»}")
                if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                    å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä¸ªä½ç½®]['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä¸ªä½ç½®}ã€‘ã€{ä¸‹ä¸€ä¸ªå…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºï¼šã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä¸ªä½ç½®].get('æ—ºå¼±çŠ¶æ€')}ã€‘")
                
                æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»
                
                if i == len(ä½œç”¨è·¯å¾„) - 2:  # è®°å½•æœ€åä¸€æ¬¡ä½œç”¨å…³ç³»
                    æœ€ç»ˆè¢«ä½œç”¨æ–¹ = ä¸‹ä¸€ä¸ªä½ç½®
                    æœ€ç»ˆå…³ç³»ç»“æœ = æœ€ç»ˆå…³ç³»
            
            # è·å–æœ€ç»ˆè¢«ä½œç”¨æ–¹çš„ä¿¡æ¯
            æœ€ç»ˆè¢«ä½œç”¨æ–¹ä½ç½® = ä½œç”¨è·¯å¾„[-1]
            æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[æœ€ç»ˆè¢«ä½œç”¨æ–¹ä½ç½®]
            æœ€ç»ˆè¢«ä½œç”¨æ–¹å¿Œç”¨ç¥ = æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯.get('å¿Œç”¨ç¥å½’å±')
            æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»
            # ç¬¬å››æ­¥ï¼šåˆ¤æ–­æœ€ç»ˆç»“æœ
            if æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯.get('æ˜¯å¦ç©ºäº¡')  == 'ç©ºäº¡':
                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
            else:
                if æœ€ç»ˆè¢«ä½œç”¨æ–¹å¿Œç”¨ç¥ == 'ç”¨ç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶å…³ç³»' else 'å‡¶'
                elif æœ€ç»ˆè¢«ä½œç”¨æ–¹å¿Œç”¨ç¥ == 'å¿Œç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'å—åˆ¶å…³ç³»' else 'å‡¶'
                else:
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'æœªçŸ¥'


            # æœ€åçš„è¾“å‡º
            æ‰“å°ä¿¡æ¯(f"\nğŸ”æœ€ç»ˆè¢«ä½œç”¨æ–¹ï¼šã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹ä½ç½®}ã€‘ã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯['åå­—']}ã€‘è¢«å‰ä¸€å…ƒç´ ã€{æœ€ç»ˆä½œç”¨ç»“æœ}ã€‘ï¼Œâˆµè¢«ä½œç”¨æ–¹ä¸ºã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹å¿Œç”¨ç¥}ã€‘ï¼Œâˆ´æœ€ç»ˆã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹ä½ç½®}ã€‘ã€{æœ€ç»ˆè¢«ä½œç”¨æ–¹ä¿¡æ¯['åå­—']}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åç¥']}ã€‘è¢«â€œæœªç°å¤©å¹²â€ã€{ä½œç”¨æ–¹å¤©å¹²å}ã€‘ã€{ä½œç”¨æ–¹å±æ€§['åç¥']}ã€‘ä½œç”¨ç»“è®ºä¸ºï¼šã€{è¢«ä½œç”¨ç¯å¢ƒç»“è®º}ã€‘")
            return {'ä½œç”¨æ–¹': ä½œç”¨æ–¹,'è¢«ä½œç”¨æ–¹': è¢«ä½œç”¨æ–¹,'ä½œç”¨ç»“è®º': è¢«ä½œç”¨ç¯å¢ƒç»“è®º}



        # æƒ…å†µ4ï¼šä½œç”¨æ–¹"æœªç°å¤©å¹²" + è¢«ä½œç”¨æ–¹"æœªç°å¤©å¹²"â­ï¸
        elif (ä½œç”¨æ–¹_å¤©å¹² and è¢«ä½œç”¨æ–¹_å¤©å¹² and ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'æœªç°å¤©å¹²' and è¢«ä½œç”¨æ–¹_å¤©å¹².get('ç±»å‹') == 'æœªç°å¤©å¹²'):
            æ‰“å°ä¿¡æ¯("\nè¿›å…¥æƒ…å†µ4ï¼šä½œç”¨æ–¹â€œæœªç°å¤©å¹²â€ + è¢«ä½œç”¨æ–¹â€œæœªç°å¤©å¹²â€")
            # ç¬¬ä¸€æ­¥ï¼šè·å–åŒæ–¹ä¿¡æ¯
            ä½œç”¨æ–¹ä¿¡æ¯ = ä½œç”¨æ–¹_å¤©å¹²
            è¢«ä½œç”¨æ–¹ä¿¡æ¯ = è¢«ä½œç”¨æ–¹_å¤©å¹²
            ä½œç”¨æ–¹å¤©å¹²å = ä½œç”¨æ–¹ä¿¡æ¯['å…ƒç´ ']
            è¢«ä½œç”¨æ–¹å¤©å¹²å = è¢«ä½œç”¨æ–¹ä¿¡æ¯['å…ƒç´ ']
            ä½œç”¨æ–¹å±æ€§ = æœªç°æ­£ååç¥ä¸»å­—å…¸[ä½œç”¨æ–¹å¤©å¹²å]
            è¢«ä½œç”¨æ–¹å±æ€§ = æœªç°æ­£ååç¥ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹å¤©å¹²å]
            ä½œç”¨æ–¹çª—å£ä½ç½® = ä½œç”¨æ–¹å±æ€§['çª—å£ä½ç½®']
            è¢«ä½œç”¨æ–¹çª—å£ä½ç½® = è¢«ä½œç”¨æ–¹å±æ€§['çª—å£ä½ç½®']
            ä½œç”¨æ–¹åç¥ = ä½œç”¨æ–¹å±æ€§['åç¥']
            è¢«ä½œç”¨æ–¹åç¥ = è¢«ä½œç”¨æ–¹å±æ€§['åç¥']

            # ç¬¬äºŒæ­¥ï¼šè·å–ä½œç”¨è·¯å¾„
            if ä½œç”¨æ–¹çª—å£ä½ç½® == è¢«ä½œç”¨æ–¹çª—å£ä½ç½®:
                # ç‰¹æ®Šæƒ…å†µï¼šåŒä¸€ä¸ªçª—å£
                ä½œç”¨è·¯å¾„ = [ä½œç”¨æ–¹çª—å£ä½ç½®]
                å®Œæ•´ä½œç”¨è·¯å¾„ = [f"æœªç°å¤©å¹²({ä½œç”¨æ–¹å¤©å¹²å})", ä½œç”¨æ–¹çª—å£ä½ç½®, f"æœªç°å¤©å¹²({è¢«ä½œç”¨æ–¹å¤©å¹²å})"]
                æ‰“å°ä¿¡æ¯("ä½œç”¨è·¯å¾„ï¼š" + "â†’".join(å®Œæ•´ä½œç”¨è·¯å¾„))
                
                # å¤„ç† ä½œç”¨æ–¹æœªç°å¤©å¹² åˆ° çª—å£ çš„ä½œç”¨
                ä½œç”¨æ–¹çª—å£å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨æ–¹çª—å£ä½ç½®]
                å…³ç³»1 = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(ä½œç”¨æ–¹å¤©å¹²å, ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—'])
                
                # åˆ¤æ–­ä½œç”¨æ–¹æ˜¯å¦éœ€è¦é•œåƒåè½¬
                ä½œç”¨æ–¹åç¥ = ä½œç”¨æ–¹å±æ€§['åç¥']
                ä½œç”¨æ–¹çª—å£åç¥ = ä½œç”¨æ–¹å±æ€§['çª—å£åç¥']
                ä½œç”¨æ–¹æ­£å = 'æ­£åç¥' if str(ä½œç”¨æ–¹åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
                çª—å£æ­£å = 'æ­£åç¥' if str(ä½œç”¨æ–¹çª—å£åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
                
                if ä½œç”¨æ–¹æ­£å != çª—å£æ­£å:
                    å…³ç³»1 = 'å—åˆ¶å…³ç³»' if å…³ç³»1 == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                    æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨æ–¹æœªç°å¤©å¹²ã€{ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{ä½œç”¨æ–¹çª—å£åç¥}ã€‘æ­£åæ€§ä¸åŒï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆã€{å…³ç³»1}ã€‘")
                else:
                    æ‰“å°ä¿¡æ¯(f"\nä½œç”¨æ–¹æœªç°å¤©å¹²ã€{ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{ä½œç”¨æ–¹çª—å£åç¥}ã€‘æ­£åç›¸åŒï¼Œâˆ´å®ƒä»¬æ˜¯ä½œç”¨å…³ç³»ã€{å…³ç³»1}ã€‘ä¸ç”¨å˜")

                if å…³ç³»1 == 'å—åˆ¶å…³ç³»':
                    ä½œç”¨æ–¹çª—å£å¤©å¹²['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                    æ‰“å°ä¿¡æ¯(f"âˆµå…³ç³»ä¸ºå—åˆ¶å…³ç³»ï¼Œâˆ´çª—å£å¤©å¹²ã€{ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„æ—ºå¼±çŠ¶æ€å˜ä¸ºã€å¼±ã€‘")
                else:
                    æ‰“å°ä¿¡æ¯(f"âˆµå…³ç³»ä¸ºç”Ÿæ‰¶å…³ç³»ï¼Œâˆ´çª—å£å¤©å¹²ã€{ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸å˜")
                # å¤„ç†çª—å£ åˆ° è¢«ä½œç”¨æ–¹æœªç°å¤©å¹² çš„ä½œç”¨
                è¢«ä½œç”¨æ–¹çª—å£å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹çª—å£ä½ç½®]
                å…³ç³»2 = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—'], è¢«ä½œç”¨æ–¹å¤©å¹²å)
                
                # åˆ¤æ–­è¢«ä½œç”¨æ–¹æ˜¯å¦éœ€è¦é•œåƒåè½¬
                è¢«ä½œç”¨æ–¹åç¥ = è¢«ä½œç”¨æ–¹å±æ€§['åç¥']
                è¢«ä½œç”¨æ–¹çª—å£åç¥ = è¢«ä½œç”¨æ–¹å±æ€§['çª—å£åç¥']
                è¢«ä½œç”¨æ–¹æ­£å = 'æ­£åç¥' if str(è¢«ä½œç”¨æ–¹åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
                
                if è¢«ä½œç”¨æ–¹æ­£å != çª—å£æ­£å:
                    å…³ç³»2 = 'å—åˆ¶å…³ç³»' if å…³ç³»2 == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                    æ‰“å°ä¿¡æ¯(f"\nâˆµè¢«ä½œç”¨æ–¹æœªç°å¤©å¹²ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{è¢«ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹çª—å£åç¥}ã€‘æ­£åæ€§ä¸åŒï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆ{å…³ç³»2}")
                else:
                    æ‰“å°ä¿¡æ¯(f"\nä½œç”¨æ–¹æœªç°å¤©å¹²ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{è¢«ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹çª—å£åç¥}ã€‘æ­£åç›¸åŒï¼Œâˆ´å®ƒä»¬æ˜¯ä½œç”¨å…³ç³»ã€{å…³ç³»2}ã€‘ä¸ç”¨å˜")
                if è¢«ä½œç”¨æ–¹çª—å£å¤©å¹².get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                    å…³ç³»2 = 'å—åˆ¶å…³ç³»' if å…³ç³»2 == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                    æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²ã€{è¢«ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€å¼±ã€‘ï¼Œâˆ´ä½œç”¨å…³ç³»å‘ç”Ÿåè½¬ï¼Œå˜æˆã€{å…³ç³»2}ã€‘")
                
                æœ€ç»ˆå…³ç³» = å…³ç³»2  # ç”¨äºåç»­åˆ¤æ–­å‰å‡¶ç»“è®º
                


            else:
                # éç‰¹æ®Šæƒ…å†µï¼šä¸åŒçª—å£ã€‚ åŸæœ‰çš„éç‰¹æ®Šæƒ…å†µä»£ç ä¿æŒä¸å˜
                ä½œç”¨æ–¹çª—å£ä¿¡æ¯ = {'ç±»å‹': 'å·²ç°å¤©å¹²', 'ä½ç½®': ä½œç”¨æ–¹çª—å£ä½ç½®, 'åå­—': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨æ–¹çª—å£ä½ç½®]['åå­—']}
                è¢«ä½œç”¨æ–¹çª—å£ä¿¡æ¯ = {'ç±»å‹': 'å·²ç°å¤©å¹²', 'ä½ç½®': è¢«ä½œç”¨æ–¹çª—å£ä½ç½®, 'åå­—': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹çª—å£ä½ç½®]['åå­—']}
                ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(ä½œç”¨æ–¹çª—å£ä¿¡æ¯, è¢«ä½œç”¨æ–¹çª—å£ä¿¡æ¯, ç±»å‹='å¤©å¹²')
                å®Œæ•´ä½œç”¨è·¯å¾„ = [f"æœªç°å¤©å¹²({ä½œç”¨æ–¹å¤©å¹²å})"] + ä½œç”¨è·¯å¾„ + [f"æœªç°å¤©å¹²({è¢«ä½œç”¨æ–¹å¤©å¹²å})"]
                æ‰“å°ä¿¡æ¯("ä½œç”¨è·¯å¾„ï¼š" + "â†’".join(å®Œæ•´ä½œç”¨è·¯å¾„))

                # ç¬¬ä¸‰æ­¥ï¼šä½œç”¨æ–¹æœªç°å¤©å¹²ä½œç”¨åˆ°å…¶çª—å£ï¼ˆè€ƒè™‘é•œåƒåè½¬ï¼‰
                ä½œç”¨æ–¹çª—å£å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨æ–¹çª—å£ä½ç½®]
                å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(ä½œç”¨æ–¹å¤©å¹²å, ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—'])
                æ‰“å°ä¿¡æ¯(f"\nã€æœªç°å¤©å¹²ã€‘ã€{ä½œç”¨æ–¹å¤©å¹²å}ã€‘ä½œç”¨äºã€{ä½œç”¨æ–¹çª—å£ä½ç½®}ã€‘ã€{ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘ï¼Œä¸¤è€…ä½œç”¨å…³ç³»ä¸ºï¼š{å…³ç³»}")

                # åˆ¤æ–­æ˜¯å¦éœ€è¦é•œåƒåè½¬ï¼ˆæ­£åæ€§ä¸åŒï¼‰
                ä½œç”¨æ–¹åç¥ = ä½œç”¨æ–¹å±æ€§['åç¥']
                ä½œç”¨æ–¹çª—å£åç¥ = ä½œç”¨æ–¹å±æ€§['çª—å£åç¥']
                ä½œç”¨æ–¹æ­£å = 'æ­£åç¥' if str(ä½œç”¨æ–¹åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
                çª—å£æ­£å = 'æ­£åç¥' if str(ä½œç”¨æ–¹çª—å£åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
                
                if ä½œç”¨æ–¹æ­£å != çª—å£æ­£å:
                    å…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                    æ‰“å°ä¿¡æ¯(f"\nâˆµæœªç°å¤©å¹²ã€{ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{ä½œç”¨æ–¹çª—å£åç¥}ã€‘æ­£åæ€§ä¸åŒï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆ{å…³ç³»}")

                if å…³ç³» == 'å—åˆ¶å…³ç³»':
                    ä½œç”¨æ–¹çª—å£å¤©å¹²['æ—ºå¼±çŠ¶æ€'] = 'å¼±'

                # ç¬¬å››æ­¥ï¼šçª—å£é—´çš„é€æ­¥ä½œç”¨
                for i in range(len(ä½œç”¨è·¯å¾„)-1):
                    å½“å‰ä½ç½® = ä½œç”¨è·¯å¾„[i]
                    ä¸‹ä¸€ä½ç½® = ä½œç”¨è·¯å¾„[i+1]
                    å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®]
                    ä¸‹ä¸€å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä½ç½®]
                    å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ ['åå­—'], ä¸‹ä¸€å…ƒç´ ['åå­—'])
                    
                    æ‰“å°ä¿¡æ¯(f"\nã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ ['åå­—']}ã€‘ä½œç”¨äºã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ ['åå­—']}ã€‘")
                    if å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                        å…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                        æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ ['åå­—']}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€å¼±ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºï¼š{å…³ç³»}")
                    
                    if å…³ç³» == 'å—åˆ¶å…³ç³»':
                        ä¸‹ä¸€å…ƒç´ ['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                    æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ ['åå­—']}ã€‘å› ä¸ºâ€œ{å…³ç³»}â€ï¼Œæ‰€ä»¥æ—ºå¼±çŠ¶æ€ä¸ºã€{ä¸‹ä¸€å…ƒç´ .get('æ—ºå¼±çŠ¶æ€', 'æ­£å¸¸')}ã€‘")

                # ç¬¬äº”æ­¥ï¼šæœ€åçª—å£ä½œç”¨åˆ°è¢«ä½œç”¨æ–¹æœªç°å¤©å¹²
                è¢«ä½œç”¨æ–¹çª—å£å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹çª—å£ä½ç½®]
                æœ€ç»ˆå…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(è¢«ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—'], è¢«ä½œç”¨æ–¹å¤©å¹²å)
                
                # åˆ¤æ–­æ˜¯å¦éœ€è¦é•œåƒåè½¬ï¼ˆæ­£åæ€§ä¸åŒï¼‰
                è¢«ä½œç”¨æ–¹åç¥ = è¢«ä½œç”¨æ–¹å±æ€§['åç¥']
                è¢«ä½œç”¨æ–¹çª—å£åç¥ = è¢«ä½œç”¨æ–¹å±æ€§['çª—å£åç¥']
                è¢«ä½œç”¨æ–¹æ­£å = 'æ­£åç¥' if str(è¢«ä½œç”¨æ–¹åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
                çª—å£æ­£å = 'æ­£åç¥' if str(è¢«ä½œç”¨æ–¹çª—å£åç¥) in äº”ä¸ªæ­£åç¥åˆ—è¡¨å¤§å…¨ else 'ååç¥'
                
                if è¢«ä½œç”¨æ–¹æ­£å != çª—å£æ­£å:
                    æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if æœ€ç»ˆå…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                    æ‰“å°ä¿¡æ¯(f"\nâˆµæœªç°å¤©å¹²ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{è¢«ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹çª—å£åç¥}ã€‘æ­£åæ€§ä¸åŒï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆ{æœ€ç»ˆå…³ç³»}")
                else:
                    æ‰“å°ä¿¡æ¯(f"\nâˆµæœªç°å¤©å¹²ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹åç¥}ã€‘ä¸çª—å£å¤©å¹²ã€{è¢«ä½œç”¨æ–¹çª—å£å¤©å¹²['åå­—']}ã€‘çš„åç¥ã€{è¢«ä½œç”¨æ–¹çª—å£åç¥}ã€‘æ­£åç›¸åŒï¼Œâˆ´å®ƒä»¬æ˜¯ä½œç”¨å…³ç³»â€œ{æœ€ç»ˆå…³ç³»}â€ä¸ç”¨å˜")
                if è¢«ä½œç”¨æ–¹çª—å£å¤©å¹².get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                    æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if æœ€ç»ˆå…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                    æ‰“å°ä¿¡æ¯(f"\nâˆµçª—å£å¤©å¹²ä¸ºå¼±ï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆ{æœ€ç»ˆå…³ç³»}")

            # ç¬¬å…­æ­¥ï¼šåˆ¤æ–­æœ€ç»ˆç»“è®º
            if è¢«ä½œç”¨æ–¹å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
            else:
                if è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'ç”¨ç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆå…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'å‡¶'
                elif è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'å¿Œç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»' else 'å‡¶'
                else:
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'

            # æœ€åè¾“å‡ºç»“è®º
            æ‰“å°ä¿¡æ¯(f"\nğŸ”æœ€ç»ˆè¢«ä½œç”¨æ–¹ï¼šã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘è¢«çª—å£ã€{æœ€ç»ˆå…³ç³»}ã€‘ï¼Œâˆµè¢«ä½œç”¨æ–¹ä¸ºã€{è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±']}ã€‘ï¼Œâˆ´æœ€ç»ˆã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘ã€{è¢«ä½œç”¨æ–¹åç¥}ã€‘è¢«ã€æœªç°å¤©å¹²ã€‘ã€{ä½œç”¨æ–¹å¤©å¹²å}ã€‘ã€{ä½œç”¨æ–¹åç¥}ã€‘ä½œç”¨ç»“è®ºä¸ºï¼šã€{è¢«ä½œç”¨ç¯å¢ƒç»“è®º}ã€‘")
            return {'ä½œç”¨æ–¹': ä½œç”¨æ–¹,'è¢«ä½œç”¨æ–¹': è¢«ä½œç”¨æ–¹,'ä½œç”¨ç»“è®º': è¢«ä½œç”¨ç¯å¢ƒç»“è®º}



        #æƒ…å†µ5ã€ä½œç”¨æ–¹â€œå·²ç°åœ°æ”¯â€+è¢«ä½œç”¨æ–¹â€œå·²ç°å¤©å¹²â€     æƒ…å†µ6ã€ä½œç”¨æ–¹â€œå·²ç°åœ°æ”¯â€+è¢«ä½œç”¨æ–¹â€œæœªç°å¤©å¹²â€
        elif ä½œç”¨æ–¹_åœ°æ”¯ and è¢«ä½œç”¨æ–¹_å¤©å¹²:
            if å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨æ–¹_åœ°æ”¯['ä½ç½®']].get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                æ‰“å°ä¿¡æ¯("ä½œç”¨æ–¹åœ°æ”¯ä¸ºç©ºäº¡ï¼Œæ— æ³•ä½œç”¨ï¼")
                return
            # ç¬¬ä¸€æ­¥ï¼šè·å–åŸºæœ¬ä¿¡æ¯
            ä½œç”¨æ–¹ä¿¡æ¯ = ä½œç”¨æ–¹_åœ°æ”¯
            è¢«ä½œç”¨æ–¹ä¿¡æ¯ = è¢«ä½œç”¨æ–¹_å¤©å¹²

            # å…ˆåˆ¤æ–­æ˜¯æƒ…å†µ5è¿˜æ˜¯æƒ…å†µ6
            if è¢«ä½œç”¨æ–¹ä¿¡æ¯.get('ç±»å‹') == 'å·²ç°å¤©å¹²':
                æ‰“å°ä¿¡æ¯("\nè¿›å…¥æƒ…å†µ5ï¼šä½œç”¨æ–¹â€œå·²ç°åœ°æ”¯â€+è¢«ä½œç”¨æ–¹â€œå·²ç°å¤©å¹²â€")
            else:
                æ‰“å°ä¿¡æ¯("\nè¿›å…¥æƒ…å†µ6ï¼šä½œç”¨æ–¹â€œå·²ç°åœ°æ”¯â€+è¢«ä½œç”¨æ–¹â€œæœªç°å¤©å¹²â€")
                è¢«ä½œç”¨æ–¹å¤©å¹²å = è¢«ä½œç”¨æ–¹ä¿¡æ¯['å…ƒç´ ']
                è¢«ä½œç”¨æ–¹å±æ€§ = æœªç°æ­£ååç¥ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹å¤©å¹²å]

            
            # åˆ›å»ºé€‰æ‹©çª—å£
            é€‰æ‹©çª—å£ = tk.Toplevel(ä½œç”¨å…³ç³»çª—å£)
            é€‰æ‹©çª—å£.title("é€‰æ‹©ä½œç”¨æ–¹æ¡ˆ")
            é€‰æ‹©çª—å£.geometry("400x150")
            tk.Label(é€‰æ‹©çª—å£, text="ä½ è¦çœ‹å“ªä¸€ä¸ªç»“è®ºï¼Ÿ").pack(pady=10)
            

            def é€‰æ‹©æ–¹æ¡ˆ(æ–¹æ¡ˆ):
                é€‰æ‹©çª—å£.destroy()
                
                if æ–¹æ¡ˆ == 1:  # æ–¹æ¡ˆä¸€ã€Šå¤–åœ¨æ˜é¢ä¸Šçš„ä½œç”¨è·¯å¾„ã€‹
                    if è¢«ä½œç”¨æ–¹ä¿¡æ¯.get('ç±»å‹') == 'å·²ç°å¤©å¹²':
                        # æƒ…å†µ5ï¼šä½œç”¨æ–¹"å·²ç°åœ°æ”¯"+è¢«ä½œç”¨æ–¹"å·²ç°å¤©å¹²"â­ï¸
                        # ç¬¬ä¸€æ­¥ï¼šè·å–ä½œç”¨æ–¹åœ°æ”¯çš„åŒæŸ±å¤©å¹²
                        åœ°æ”¯ä½ç½® = ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']
                        åŒæŸ±å¤©å¹²ä½ç½® = åœ°æ”¯ä½ç½®.replace('æ”¯', 'å¹²')
                        
                        # ç¬¬äºŒæ­¥ï¼šåœ°æ”¯ä½œç”¨åŒæŸ±å¤©å¹²
                        ä½œç”¨è·¯å¾„ = [åœ°æ”¯ä½ç½®, åŒæŸ±å¤©å¹²ä½ç½®]
                        æ‰“å°ä¿¡æ¯("ä½œç”¨è·¯å¾„ç¬¬ä¸€æ®µï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
                        
                        å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åœ°æ”¯ä½ç½®]
                        ä¸‹ä¸€å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŒæŸ±å¤©å¹²ä½ç½®]
                        å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                        ä¸‹ä¸€å…ƒç´ åå­— = ä¸‹ä¸€å…ƒç´ ['åå­—']
                        å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ ['åå­—'], ä¸‹ä¸€å…ƒç´ ['åå­—'])
                        éœ€è¦åè½¬ = False

                        # æ£€æŸ¥æ—ºå¼±çŠ¶æ€
                        if å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                            éœ€è¦åè½¬ = not éœ€è¦åè½¬
                            æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{åœ°æ”¯ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºå¼± âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                            
                        # æ£€æŸ¥ç©ºäº¡çŠ¶æ€
                        if 'æ”¯' in åœ°æ”¯ä½ç½® and å½“å‰å…ƒç´ .get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                            éœ€è¦åè½¬ = not éœ€è¦åè½¬
                            æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{åœ°æ”¯ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºç©ºäº¡ âˆ´è¯¥ç©ºäº¡åœ°æ”¯ä½œç”¨ç›¸é‚»åœ°æ”¯æ—¶ è¦å‘ç”Ÿä½œç”¨åè½¬")
                            
                        æœ€ç»ˆå…³ç³» = å…³ç³»
                        if éœ€è¦åè½¬:
                            æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                            
                        æ‰“å°ä¿¡æ¯(f"ã€{åœ°æ”¯ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{åŒæŸ±å¤©å¹²ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘ã€‚âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{åœ°æ”¯ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºã€{æœ€ç»ˆå…³ç³»}ã€‘")
                        
                        if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                            ä¸‹ä¸€å…ƒç´ ['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                        æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{åŒæŸ±å¤©å¹²ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{ä¸‹ä¸€å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘")
                        
                        # ç¬¬ä¸‰æ­¥ï¼šåŒæŸ±å¤©å¹²ä½œç”¨åˆ°è¢«ä½œç”¨æ–¹å¤©å¹²
                        èµ·å§‹ä½ç½®ä¿¡æ¯ = {'ä½ç½®': åŒæŸ±å¤©å¹²ä½ç½®, 'ç±»å‹': 'å·²ç°å¤©å¹²'}
                        ç›®æ ‡ä½ç½®ä¿¡æ¯ = {'ä½ç½®': è¢«ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®'], 'ç±»å‹': 'å·²ç°å¤©å¹²'}
                        åç»­è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(èµ·å§‹ä½ç½®ä¿¡æ¯, ç›®æ ‡ä½ç½®ä¿¡æ¯, ç±»å‹='å¤©å¹²')
                        ä½œç”¨è·¯å¾„.extend(åç»­è·¯å¾„[1:])
                        æ‰“å°ä¿¡æ¯("å®Œæ•´ä½œç”¨è·¯å¾„ï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
                        
                        # ç¬¬å››æ­¥ï¼šä¾æ¬¡ä½œç”¨
                        æœ€ç»ˆä½œç”¨ç»“æœ = None
                        for i in range(1, len(ä½œç”¨è·¯å¾„)-1):
                            å½“å‰ä½ç½® = ä½œç”¨è·¯å¾„[i]
                            ä¸‹ä¸€ä½ç½® = ä½œç”¨è·¯å¾„[i+1]
                            å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®]
                            ä¸‹ä¸€å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä½ç½®]
                            å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                            ä¸‹ä¸€å…ƒç´ åå­— = ä¸‹ä¸€å…ƒç´ ['åå­—']
                            å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ ['åå­—'], ä¸‹ä¸€å…ƒç´ ['åå­—'])
                            éœ€è¦åè½¬ = False
                            
                            if å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                                éœ€è¦åè½¬ = not éœ€è¦åè½¬
                                æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºã€å¼±ã€‘ âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                                
                            æœ€ç»ˆå…³ç³» = å…³ç³»
                            if éœ€è¦åè½¬:
                                æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                                
                            æ‰“å°ä¿¡æ¯(f"ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘")
                            æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºã€{æœ€ç»ˆå…³ç³»}ã€‘")
                            
                            if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                                ä¸‹ä¸€å…ƒç´ ['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                            æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{ä¸‹ä¸€å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘")
                            
                            æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»

                        # åˆ¤æ–­è¢«ä½œç”¨ç¯å¢ƒç»“è®º
                        è¢«ä½œç”¨æ–¹å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']]
                        if è¢«ä½œç”¨æ–¹å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                            è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
                        else:
                            if è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'ç”¨ç¥':
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶å…³ç³»' else 'å‡¶'
                            elif è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'å¿Œç¥':
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'å—åˆ¶å…³ç³»' else 'å‡¶'
                            else:
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'

                        # è¾“å‡ºæœ€ç»ˆç»“è®º
                        æ‰“å°ä¿¡æ¯(f"\nğŸ”æœ€ç»ˆè¢«ä½œç”¨æ–¹ï¼šã€{è¢«ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åå­—']}ã€‘è¢«å‰ä¸€å…ƒç´ ã€{æœ€ç»ˆä½œç”¨ç»“æœ}ã€‘ï¼Œâˆµè¢«ä½œç”¨æ–¹ä¸ºã€{è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±']}ã€‘ï¼Œâˆ´æœ€ç»ˆã€{è¢«ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åå­—']}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åç¥']}ã€‘è¢«ã€{ä½œç”¨è·¯å¾„[0]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åç¥']}ã€‘ä½œç”¨ç»“è®ºä¸ºï¼šã€{è¢«ä½œç”¨ç¯å¢ƒç»“è®º}ã€‘")
                        

                    else:  # æƒ…å†µ6ï¼šä½œç”¨æ–¹"å·²ç°åœ°æ”¯"+è¢«ä½œç”¨æ–¹"æœªç°å¤©å¹²"â­ï¸
                        # ç¬¬ä¸€æ­¥ï¼šè·å–åŸºæœ¬ä¿¡æ¯
                        è¢«ä½œç”¨æ–¹å¤©å¹²å = è¢«ä½œç”¨æ–¹ä¿¡æ¯['å…ƒç´ ']
                        è¢«ä½œç”¨æ–¹å±æ€§ = æœªç°æ­£ååç¥ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹å¤©å¹²å]
                        çª—å£ä½ç½® = è¢«ä½œç”¨æ–¹å±æ€§['çª—å£ä½ç½®']
                        
                        # ç¬¬äºŒæ­¥ï¼šåœ°æ”¯ä½œç”¨åŒæŸ±å¤©å¹²
                        åœ°æ”¯ä½ç½® = ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']
                        åŒæŸ±å¤©å¹²ä½ç½® = åœ°æ”¯ä½ç½®.replace('æ”¯', 'å¹²')
                        ä½œç”¨è·¯å¾„ = [åœ°æ”¯ä½ç½®, åŒæŸ±å¤©å¹²ä½ç½®]
                        æ‰“å°ä¿¡æ¯("ä½œç”¨è·¯å¾„ç¬¬ä¸€æ®µï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
                        
                        å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åœ°æ”¯ä½ç½®]
                        ä¸‹ä¸€å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åŒæŸ±å¤©å¹²ä½ç½®]
                        å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                        ä¸‹ä¸€å…ƒç´ åå­— = ä¸‹ä¸€å…ƒç´ ['åå­—']
                        å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ ['åå­—'], ä¸‹ä¸€å…ƒç´ ['åå­—'])
                        éœ€è¦åè½¬ = False
                        
                        # æ£€æŸ¥æ—ºå¼±çŠ¶æ€
                        if å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                            éœ€è¦åè½¬ = not éœ€è¦åè½¬
                            æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{åœ°æ”¯ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºå¼± âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                            
                        # æ£€æŸ¥ç©ºäº¡çŠ¶æ€
                        if 'æ”¯' in åœ°æ”¯ä½ç½® and å½“å‰å…ƒç´ .get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                            éœ€è¦åè½¬ = not éœ€è¦åè½¬
                            æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{åœ°æ”¯ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºç©ºäº¡ âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                            
                        æœ€ç»ˆå…³ç³» = å…³ç³»
                        if éœ€è¦åè½¬:
                            æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                            
                        æ‰“å°ä¿¡æ¯(f"ã€{åœ°æ”¯ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{åŒæŸ±å¤©å¹²ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘")
                        æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{åœ°æ”¯ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºï¼š{æœ€ç»ˆå…³ç³»}")
                        
                        if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                            ä¸‹ä¸€å…ƒç´ ['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                        æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{åŒæŸ±å¤©å¹²ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{ä¸‹ä¸€å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘")
                        
                        # ç¬¬ä¸‰æ­¥ï¼šåŒæŸ±å¤©å¹²ä½œç”¨åˆ°çª—å£ä½ç½®
                        èµ·å§‹ä½ç½®ä¿¡æ¯ = {'ä½ç½®': åŒæŸ±å¤©å¹²ä½ç½®, 'ç±»å‹': 'å·²ç°å¤©å¹²'}
                        ç›®æ ‡ä½ç½®ä¿¡æ¯ = {'ä½ç½®': çª—å£ä½ç½®, 'ç±»å‹': 'å·²ç°å¤©å¹²'}
                        ä¸­é—´è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(èµ·å§‹ä½ç½®ä¿¡æ¯, ç›®æ ‡ä½ç½®ä¿¡æ¯, ç±»å‹='å¤©å¹²')
                        ä½œç”¨è·¯å¾„.extend(ä¸­é—´è·¯å¾„[1:])
                        
                        # ç¬¬å››æ­¥ï¼šä¾æ¬¡ä½œç”¨
                        æœ€ç»ˆä½œç”¨ç»“æœ = None
                        for i in range(1, len(ä½œç”¨è·¯å¾„)-1):
                            å½“å‰ä½ç½® = ä½œç”¨è·¯å¾„[i]
                            ä¸‹ä¸€ä½ç½® = ä½œç”¨è·¯å¾„[i+1]
                            å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®]
                            ä¸‹ä¸€å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä½ç½®]
                            å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                            ä¸‹ä¸€å…ƒç´ åå­— = ä¸‹ä¸€å…ƒç´ ['åå­—']
                            å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ ['åå­—'], ä¸‹ä¸€å…ƒç´ ['åå­—'])
                            éœ€è¦åè½¬ = False
                            
                            if å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                                éœ€è¦åè½¬ = not éœ€è¦åè½¬
                                æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºå¼± âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                                
                            æœ€ç»ˆå…³ç³» = å…³ç³»
                            if éœ€è¦åè½¬:
                                æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                                
                            æ‰“å°ä¿¡æ¯(f"ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘")
                            æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºã€{æœ€ç»ˆå…³ç³»}ã€‘")
                            
                            if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                                ä¸‹ä¸€å…ƒç´ ['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                            æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{ä¸‹ä¸€å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘")
                            æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»
                        # ç¬¬äº”æ­¥ï¼šçª—å£å¤©å¹²ä½œç”¨æœªç°å¤©å¹²ï¼ˆè€ƒè™‘é•œåƒåè½¬ï¼‰
                        ä½œç”¨è·¯å¾„.append(f"æœªç°å¤©å¹²({è¢«ä½œç”¨æ–¹å¤©å¹²å})")
                        æ‰“å°ä¿¡æ¯("å®Œæ•´ä½œç”¨è·¯å¾„ï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
                        
                        çª—å£å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®]
                        éœ€è¦åè½¬ = åˆ¤æ–­æ­£åå…³ç³»(è¢«ä½œç”¨æ–¹å±æ€§['åç¥']) != åˆ¤æ–­æ­£åå…³ç³»(çª—å£å¤©å¹²['åç¥'])
                        å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(çª—å£å¤©å¹²['åå­—'], è¢«ä½œç”¨æ–¹å¤©å¹²å)
                        æœ€ç»ˆå…³ç³» = å…³ç³»
                        
                        if çª—å£å¤©å¹².get('æ—ºå¼±çŠ¶æ€') == 'å¼±' or éœ€è¦åè½¬:
                            æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                            if çª—å£å¤©å¹².get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                                æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²ã€{çª—å£å¤©å¹²['åå­—']}ã€‘ä¸ºã€å¼±ã€‘ï¼Œâˆ´ä½œç”¨ã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘æ—¶å‘ç”Ÿé•œåƒåè½¬")
                            if éœ€è¦åè½¬:
                                æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²ä¸æœªç°å¤©å¹²çš„åç¥ æ­£åæ€§ä¸åŒï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬")
                        else:
                            æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²ã€{çª—å£å¤©å¹²['åå­—']}ã€‘ä¸ºã€æ—ºã€‘ä¸”ä¸æœªç°å¤©å¹²çš„åç¥ æ­£åæ€§ç›¸åŒï¼Œâˆ´ä¿æŒæ­£å¸¸ä½œç”¨ã€{æœ€ç»ˆå…³ç³»}ã€‘")
                        
                        æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»

                        # åˆ¤æ–­è¢«ä½œç”¨ç¯å¢ƒç»“è®º
                        if è¢«ä½œç”¨æ–¹å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                            è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
                        else:
                            if è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'ç”¨ç¥':
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶å…³ç³»' else 'å‡¶'
                            elif è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'å¿Œç¥':
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'å—åˆ¶å…³ç³»' else 'å‡¶'
                            else:
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'

                        # è¾“å‡ºæœ€ç»ˆç»“è®º
                        æ‰“å°ä¿¡æ¯(f"\nğŸ”æœ€ç»ˆè¢«ä½œç”¨æ–¹ï¼šã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘è¢«å‰ä¸€å…ƒç´ ã€{æœ€ç»ˆä½œç”¨ç»“æœ}ã€‘ï¼Œâˆµè¢«ä½œç”¨æ–¹ä¸ºã€{è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±']}ã€‘ï¼Œâˆ´æœ€ç»ˆã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åç¥']}ã€‘è¢«ã€{ä½œç”¨è·¯å¾„[0]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åç¥']}ã€‘ä½œç”¨ç»“è®ºä¸ºï¼šã€{è¢«ä½œç”¨ç¯å¢ƒç»“è®º}ã€‘")
                    



                else:  # æ–¹æ¡ˆäºŒã€Šäººç‰©å†…å¿ƒæƒ³æ³•/å†…åœ¨å¥åº·çš„ä½œç”¨è·¯å¾„ã€‹
                    if è¢«ä½œç”¨æ–¹ä¿¡æ¯.get('ç±»å‹') == 'å·²ç°å¤©å¹²':
                        
                        # æƒ…å†µ5ï¼šä½œç”¨æ–¹â€œå·²ç°åœ°æ”¯â€+è¢«ä½œç”¨æ–¹â€œå·²ç°å¤©å¹²â€â­ï¸
                        # ç¬¬ä¸€æ­¥ï¼šè·å–è¢«ä½œç”¨æ–¹å¤©å¹²çš„åŒæŸ±åœ°æ”¯
                        å¤©å¹²ä½ç½® = è¢«ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']
                        ç›®æ ‡åœ°æ”¯ä½ç½® = å¤©å¹²ä½ç½®.replace('å¹²', 'æ”¯')
                        
                        # ç¬¬äºŒæ­¥ï¼šä½œç”¨æ–¹åœ°æ”¯ä½œç”¨åˆ°ç›®æ ‡åœ°æ”¯
                        èµ·å§‹ä¿¡æ¯ = {'ä½ç½®': ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®'], 'ç±»å‹': 'å·²ç°åœ°æ”¯'}
                        ç›®æ ‡ä¿¡æ¯ = {'ä½ç½®': ç›®æ ‡åœ°æ”¯ä½ç½®, 'ç±»å‹': 'å·²ç°åœ°æ”¯'}
                        ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(èµ·å§‹ä¿¡æ¯, ç›®æ ‡ä¿¡æ¯, ç±»å‹='åœ°æ”¯')
                        æ‰“å°ä¿¡æ¯("ä½œç”¨è·¯å¾„ç¬¬ä¸€æ®µï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
                        
                        # ç¬¬ä¸‰æ­¥ï¼šä¾æ¬¡ä½œç”¨
                        æœ€ç»ˆä½œç”¨ç»“æœ = None
                        for i in range(len(ä½œç”¨è·¯å¾„)-1):
                            å½“å‰ä½ç½® = ä½œç”¨è·¯å¾„[i]
                            ä¸‹ä¸€ä½ç½® = ä½œç”¨è·¯å¾„[i+1]
                            å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®]
                            ä¸‹ä¸€å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä½ç½®]
                            å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                            ä¸‹ä¸€å…ƒç´ åå­— = ä¸‹ä¸€å…ƒç´ ['åå­—']
                            å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ ['åå­—'], ä¸‹ä¸€å…ƒç´ ['åå­—'])
                            éœ€è¦åè½¬ = False     
                            if å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                                éœ€è¦åè½¬ = not éœ€è¦åè½¬
                                æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºå¼± âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                            # æ£€æŸ¥ç©ºäº¡çŠ¶æ€
                            if 'æ”¯' in å½“å‰ä½ç½® and å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®].get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                                éœ€è¦åè½¬ = not éœ€è¦åè½¬
                                æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºç©ºäº¡ âˆ´è¯¥ç©ºäº¡åœ°æ”¯ä½œç”¨ç›¸é‚»åœ°æ”¯æ—¶ è¦å‘ç”Ÿä½œç”¨åè½¬")
                            if 'æ”¯' in ä¸‹ä¸€ä½ç½® and å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä½ç½®].get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                                éœ€è¦åè½¬ = not éœ€è¦åè½¬
                                æ‰“å°ä¿¡æ¯(f"\nâˆµè¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘ä¸ºç©ºäº¡ âˆ´è¯¥ç©ºäº¡åœ°æ”¯ä½œç”¨åŒæŸ±å¤©å¹²æ—¶ è¦å‘ç”Ÿä½œç”¨åè½¬")
                            æœ€ç»ˆå…³ç³» = å…³ç³»
                            if éœ€è¦åè½¬:
                                æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                            æ‰“å°ä¿¡æ¯(f"ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘")
                            æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºï¼š{æœ€ç»ˆå…³ç³»}")

                            if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                                ä¸‹ä¸€å…ƒç´ ['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                            æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{ä¸‹ä¸€å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘")

                        # ç¬¬å››æ­¥ï¼šç›®æ ‡åœ°æ”¯ ä½œç”¨äº å…¶åŒæŸ±å¤©å¹²
                        ä½œç”¨è·¯å¾„.append(å¤©å¹²ä½ç½®)
                        æ‰“å°ä¿¡æ¯("å®Œæ•´ä½œç”¨è·¯å¾„ï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
                        ç›®æ ‡åœ°æ”¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ç›®æ ‡åœ°æ”¯ä½ç½®]
                        è¢«ä½œç”¨æ–¹å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²ä½ç½®]
                        å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(ç›®æ ‡åœ°æ”¯['åå­—'], è¢«ä½œç”¨æ–¹å¤©å¹²['åå­—'])
                        æœ€ç»ˆå…³ç³» = å…³ç³»
                        if ç›®æ ‡åœ°æ”¯.get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                            æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                            æ‰“å°ä¿¡æ¯(f"âˆµç›®æ ‡å¤©å¹²çš„åŒæŸ±åœ°æ”¯ä¸ºå¼±ï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆã€{æœ€ç»ˆå…³ç³»}ã€‘") 
                        else:
                            æ‰“å°ä¿¡æ¯(f"âˆµç›®æ ‡å¤©å¹²çš„åŒæŸ±åœ°æ”¯ä¸ä¸ºå¼±ï¼Œâˆ´ä¿æŒåŸå…³ç³»ã€{æœ€ç»ˆå…³ç³»}ã€‘") 
                        if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                            è¢«ä½œç”¨æ–¹å¤©å¹²['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                        æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»

                        
                        # åˆ¤æ–­è¢«ä½œç”¨ç¯å¢ƒç»“è®º
                        è¢«ä½œç”¨æ–¹å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']]
                        if è¢«ä½œç”¨æ–¹å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                            è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
                        else:
                            if è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'ç”¨ç¥':
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶å…³ç³»' else 'å‡¶'
                            elif è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'å¿Œç¥':
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'å—åˆ¶å…³ç³»' else 'å‡¶'
                            else:
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'

                        # è¾“å‡ºæœ€ç»ˆç»“è®º
                        æ‰“å°ä¿¡æ¯(f"\nğŸ”æœ€ç»ˆè¢«ä½œç”¨æ–¹ï¼šã€{å¤©å¹²ä½ç½®}ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²['åå­—']}ã€‘è¢«å‰ä¸€å…ƒç´ ã€{æœ€ç»ˆä½œç”¨ç»“æœ}ã€‘ï¼Œâˆµè¢«ä½œç”¨æ–¹ä¸ºã€{è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±']}ã€‘ï¼Œâˆ´æœ€ç»ˆã€{å¤©å¹²ä½ç½®}ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²['åå­—']}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åç¥']}ã€‘è¢«ã€{ä½œç”¨è·¯å¾„[0]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åç¥']}ã€‘ä½œç”¨ç»“è®ºä¸ºï¼šã€{è¢«ä½œç”¨ç¯å¢ƒç»“è®º}ã€‘")


                        
                    else:  
                        # æƒ…å†µ6ï¼šä½œç”¨æ–¹"å·²ç°åœ°æ”¯"+è¢«ä½œç”¨æ–¹"æœªç°å¤©å¹²"â­ï¸
                        # ç¬¬ä¸€æ­¥ï¼šè·å–åŸºæœ¬ä¿¡æ¯
                        è¢«ä½œç”¨æ–¹å¤©å¹²å = è¢«ä½œç”¨æ–¹ä¿¡æ¯['å…ƒç´ ']
                        è¢«ä½œç”¨æ–¹å±æ€§ = æœªç°æ­£ååç¥ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹å¤©å¹²å]
                        çª—å£ä½ç½® = è¢«ä½œç”¨æ–¹å±æ€§['çª—å£ä½ç½®']
                        çª—å£åœ°æ”¯ä½ç½® = çª—å£ä½ç½®.replace('å¹²', 'æ”¯')
                        
                        # ç¬¬äºŒæ­¥ï¼šä½œç”¨æ–¹åœ°æ”¯ä½œç”¨åˆ°çª—å£åœ°æ”¯
                        èµ·å§‹ä¿¡æ¯ = {'ä½ç½®': ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®'], 'ç±»å‹': 'å·²ç°åœ°æ”¯'}
                        ç›®æ ‡ä¿¡æ¯ = {'ä½ç½®': çª—å£åœ°æ”¯ä½ç½®, 'ç±»å‹': 'å·²ç°åœ°æ”¯'}
                        ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(èµ·å§‹ä¿¡æ¯, ç›®æ ‡ä¿¡æ¯, ç±»å‹='åœ°æ”¯')
                        æ‰“å°ä¿¡æ¯("ä½œç”¨è·¯å¾„ç¬¬ä¸€æ®µï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
                        
                        # ç¬¬ä¸‰æ­¥ï¼šä¾æ¬¡ä½œç”¨
                        æœ€ç»ˆä½œç”¨ç»“æœ = None
                        for i in range(len(ä½œç”¨è·¯å¾„)-1):
                            å½“å‰ä½ç½® = ä½œç”¨è·¯å¾„[i]
                            ä¸‹ä¸€ä½ç½® = ä½œç”¨è·¯å¾„[i+1]
                            å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®]
                            ä¸‹ä¸€å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä½ç½®]
                            å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                            ä¸‹ä¸€å…ƒç´ åå­— = ä¸‹ä¸€å…ƒç´ ['åå­—']
                            å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ ['åå­—'], ä¸‹ä¸€å…ƒç´ ['åå­—'])
                            éœ€è¦åè½¬ = False     
                            æœ€ç»ˆå…³ç³» = å…³ç³»
                            æ‰“å°ä¿¡æ¯(f"ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘")

                            if å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                                éœ€è¦åè½¬ = not éœ€è¦åè½¬
                                æ‰“å°ä¿¡æ¯(f"âˆµä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºå¼± âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                            # æ£€æŸ¥ç©ºäº¡çŠ¶æ€
                            if 'æ”¯' in å½“å‰ä½ç½® and å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®].get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                                éœ€è¦åè½¬ = not éœ€è¦åè½¬
                                æ‰“å°ä¿¡æ¯(f"âˆµä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºç©ºäº¡ âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                            if 'æ”¯' in ä¸‹ä¸€ä½ç½® and å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä½ç½®].get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                                éœ€è¦åè½¬ = not éœ€è¦åè½¬
                                æ‰“å°ä¿¡æ¯(f"âˆµè¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘ä¸ºç©ºäº¡ âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                            
                            if éœ€è¦åè½¬:
                                æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                            
                            æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºï¼š{æœ€ç»ˆå…³ç³»}")

                            if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                                ä¸‹ä¸€å…ƒç´ ['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                            æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{ä¸‹ä¸€å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘")

                        # ç¬¬å››æ­¥ï¼šçª—å£åœ°æ”¯ä½œç”¨çª—å£å¤©å¹²
                        ä½œç”¨è·¯å¾„.extend([çª—å£ä½ç½®, f"æœªç°å¤©å¹²({è¢«ä½œç”¨æ–¹å¤©å¹²å})"])
                        æ‰“å°ä¿¡æ¯("å®Œæ•´ä½œç”¨è·¯å¾„ï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))
                        
                        çª—å£åœ°æ”¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£åœ°æ”¯ä½ç½®]
                        çª—å£å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[çª—å£ä½ç½®]
                        å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(çª—å£åœ°æ”¯['åå­—'], çª—å£å¤©å¹²['åå­—'])
                        æœ€ç»ˆå…³ç³» = å…³ç³»
                        if çª—å£åœ°æ”¯.get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                            æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                            æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²çš„åŒæŸ±åœ°æ”¯ã€{çª—å£åœ°æ”¯ä½ç½®}ã€‘ã€{çª—å£åœ°æ”¯['åå­—']}ã€‘ä¸ºå¼±ï¼Œâˆ´å®ƒä¿©å‘ç”Ÿé•œåƒåè½¬ï¼Œå˜æˆã€{æœ€ç»ˆå…³ç³»}ã€‘")
                        else:
                            æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²çš„åŒæŸ±åœ°æ”¯ã€{çª—å£åœ°æ”¯ä½ç½®}ã€‘ã€{çª—å£åœ°æ”¯['åå­—']}ã€‘ä¸ä¸ºå¼±ï¼Œâˆ´å®ƒä¿©ä¿æŒåŸå…³ç³»ã€{æœ€ç»ˆå…³ç³»}ã€‘")
                        if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                            çª—å£å¤©å¹²['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                        
                        # ç¬¬äº”æ­¥ï¼šçª—å£å¤©å¹²ä½œç”¨æœªç°å¤©å¹²ï¼ˆè€ƒè™‘é•œåƒåè½¬ï¼‰
                        éœ€è¦åè½¬ = åˆ¤æ–­æ­£åå…³ç³»(è¢«ä½œç”¨æ–¹å±æ€§['åç¥']) != åˆ¤æ–­æ­£åå…³ç³»(çª—å£å¤©å¹²['åç¥'])
                        å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(çª—å£å¤©å¹²['åå­—'], è¢«ä½œç”¨æ–¹å¤©å¹²å)
                        æœ€ç»ˆå…³ç³» = å…³ç³»
                        if çª—å£å¤©å¹².get('æ—ºå¼±çŠ¶æ€') == 'å¼±' or éœ€è¦åè½¬:
                            æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                            if çª—å£å¤©å¹².get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                                æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²ã€{çª—å£å¤©å¹²['åå­—']}ã€‘è¢«åŒæŸ±åœ°æ”¯ä½œç”¨åä¸ºã€å¼±ã€‘ï¼Œâˆ´ã€{çª—å£å¤©å¹²['åå­—']}ã€‘ä½œç”¨ã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘æ—¶å‘ç”Ÿé•œåƒåè½¬")
                            else:
                                æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²ã€{çª—å£å¤©å¹²['åå­—']}ã€‘è¢«åŒæŸ±åœ°æ”¯ä½œç”¨åä¸ºã€æ—ºã€‘ï¼Œâˆ´ã€{çª—å£å¤©å¹²['åå­—']}ã€‘ä½œç”¨ã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘æ—¶ä¿æŒæ­£å¸¸ä½œç”¨")

                            if éœ€è¦åè½¬:
                                æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²ä¸æœªç°å¤©å¹²çš„åç¥ æ­£åæ€§ä¸åŒï¼Œâˆ´å‘ç”Ÿé•œåƒåè½¬")
                            else:
                                æ‰“å°ä¿¡æ¯(f"âˆµçª—å£å¤©å¹²ä¸æœªç°å¤©å¹²çš„åç¥ æ­£åæ€§ç›¸åŒï¼Œâˆ´ä¿æŒæ­£å¸¸ä½œç”¨")
                        æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»

                        # åˆ¤æ–­è¢«ä½œç”¨ç¯å¢ƒç»“è®º
                        if è¢«ä½œç”¨æ–¹å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                            è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
                        else:
                            if è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'ç”¨ç¥':
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶å…³ç³»' else 'å‡¶'
                            elif è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'å¿Œç¥':
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'å—åˆ¶å…³ç³»' else 'å‡¶'
                            else:
                                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'

                        # è¾“å‡ºæœ€ç»ˆç»“è®º
                        æ‰“å°ä¿¡æ¯(f"\nğŸ”æœ€ç»ˆè¢«ä½œç”¨æ–¹ï¼šã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘è¢«å‰ä¸€å…ƒç´ ã€{æœ€ç»ˆä½œç”¨ç»“æœ}ã€‘ï¼Œâˆµè¢«ä½œç”¨æ–¹ä¸ºã€{è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±']}ã€‘ï¼Œâˆ´æœ€ç»ˆã€æœªç°å¤©å¹²ã€‘ã€{è¢«ä½œç”¨æ–¹å¤©å¹²å}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åç¥']}ã€‘è¢«ã€{ä½œç”¨è·¯å¾„[0]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åç¥']}ã€‘ä½œç”¨ç»“è®ºä¸ºï¼šã€{è¢«ä½œç”¨ç¯å¢ƒç»“è®º}ã€‘")
                

        
            # æ·»åŠ é€‰æ‹©æŒ‰é’®
            tk.Button(é€‰æ‹©çª—å£, text="æ–¹æ¡ˆä¸€ã€Šå¤–åœ¨æ˜é¢ä¸Šçš„ä½œç”¨è·¯å¾„ã€‹", command=lambda: é€‰æ‹©æ–¹æ¡ˆ(1)).pack(pady=5)
            tk.Button(é€‰æ‹©çª—å£, text="æ–¹æ¡ˆäºŒã€Šäººç‰©å†…å¿ƒæƒ³æ³•/å†…åœ¨å¥åº·çš„ä½œç”¨è·¯å¾„ã€‹", command=lambda: é€‰æ‹©æ–¹æ¡ˆ(2)).pack(pady=5)
            return {'ä½œç”¨æ–¹': ä½œç”¨æ–¹,'è¢«ä½œç”¨æ–¹': è¢«ä½œç”¨æ–¹,'ä½œç”¨ç»“è®º': è¢«ä½œç”¨ç¯å¢ƒç»“è®º}


        # æƒ…å†µ7ï¼šä½œç”¨æ–¹"å·²ç°åœ°æ”¯" + è¢«ä½œç”¨æ–¹"å·²ç°åœ°æ”¯"â­ï¸
        elif ä½œç”¨æ–¹_åœ°æ”¯ and è¢«ä½œç”¨æ–¹_åœ°æ”¯:
            æ‰“å°ä¿¡æ¯("\nè¿›å…¥æƒ…å†µ7ï¼šä½œç”¨æ–¹â€œå·²ç°åœ°æ”¯â€ + è¢«ä½œç”¨æ–¹â€œå·²ç°åœ°æ”¯â€")
            def åˆ¤æ–­åœ°æ”¯å¿Œç”¨ç¥å½’å±(åœ°æ”¯ä½ç½®):
                nonlocal å…«å­—ä¿¡æ¯ä¸»å­—å…¸
                å¤©å¹²ä½ç½® = åœ°æ”¯ä½ç½®.replace('æ”¯', 'å¹²')

                å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å¤©å¹²ä½ç½®]
                if å¤©å¹²['å¿Œç”¨ç¥å½’å±'] == 'å¿Œç¥':
                    if å¤©å¹².get('æ˜¯å¦æœ‰æ ¹') == 'æœ‰æ ¹':
                        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åœ°æ”¯ä½ç½®]['å¿Œç”¨ç¥å½’å±'] = 'å¿Œç¥'
                    else:
                        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åœ°æ”¯ä½ç½®]['å¿Œç”¨ç¥å½’å±'] = 'ç”¨ç¥'
                elif å¤©å¹²['å¿Œç”¨ç¥å½’å±'] == 'ç”¨ç¥':
                    if å¤©å¹².get('æ˜¯å¦æœ‰æ ¹') == 'æœ‰æ ¹':
                        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åœ°æ”¯ä½ç½®]['å¿Œç”¨ç¥å½’å±'] = 'ç”¨ç¥'
                    else:
                        å…«å­—ä¿¡æ¯ä¸»å­—å…¸[åœ°æ”¯ä½ç½®]['å¿Œç”¨ç¥å½’å±'] = 'å¿Œç¥'
            # ä¸ºæ‰€æœ‰åœ°æ”¯è®¾ç½®å¿Œç”¨ç¥å½’å±
            for åœ°æ”¯ä½ç½® in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ—¶æ”¯']:
                åˆ¤æ–­åœ°æ”¯å¿Œç”¨ç¥å½’å±(åœ°æ”¯ä½ç½®)

            # ç¬¬ä¸€æ­¥ï¼šè·å–åŒæ–¹ä¿¡æ¯
            ä½œç”¨æ–¹ä¿¡æ¯ = {'ä½ç½®': ä½œç”¨æ–¹_åœ°æ”¯['ä½ç½®'], 'ç±»å‹': 'å·²ç°åœ°æ”¯'}
            è¢«ä½œç”¨æ–¹ä¿¡æ¯ = {'ä½ç½®': è¢«ä½œç”¨æ–¹_åœ°æ”¯['ä½ç½®'], 'ç±»å‹': 'å·²ç°åœ°æ”¯'}

            # ç¬¬äºŒæ­¥ï¼šè·å–ä½œç”¨è·¯å¾„
            ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(ä½œç”¨æ–¹ä¿¡æ¯, è¢«ä½œç”¨æ–¹ä¿¡æ¯, ç±»å‹='åœ°æ”¯')
            if not ä½œç”¨è·¯å¾„:  # å¦‚æœæ­£å‘è·¯å¾„ä¸ºç©ºï¼Œå°è¯•é€†å‘è·¯å¾„
                ä½œç”¨è·¯å¾„ = è·å–ä½œç”¨è·¯å¾„(è¢«ä½œç”¨æ–¹ä¿¡æ¯, ä½œç”¨æ–¹ä¿¡æ¯, ç±»å‹='åœ°æ”¯')
                if ä½œç”¨è·¯å¾„:  # å¦‚æœæ‰¾åˆ°é€†å‘è·¯å¾„ï¼Œå°†å…¶åè½¬
                    ä½œç”¨è·¯å¾„ = ä½œç”¨è·¯å¾„[::-1]
            æ‰“å°ä¿¡æ¯("ä½œç”¨è·¯å¾„ï¼š" + "â†’".join(ä½œç”¨è·¯å¾„))

            # ç¬¬ä¸‰æ­¥ï¼šä¾æ¬¡ä½œç”¨
            æœ€ç»ˆä½œç”¨ç»“æœ = None
            for i in range(len(ä½œç”¨è·¯å¾„)-1):
                å½“å‰ä½ç½® = ä½œç”¨è·¯å¾„[i]
                ä¸‹ä¸€ä½ç½® = ä½œç”¨è·¯å¾„[i+1]
                å½“å‰å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[å½“å‰ä½ç½®]
                ä¸‹ä¸€å…ƒç´  = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä¸‹ä¸€ä½ç½®]
                å½“å‰å…ƒç´ åå­— = å½“å‰å…ƒç´ ['åå­—']
                ä¸‹ä¸€å…ƒç´ åå­— = ä¸‹ä¸€å…ƒç´ ['åå­—']
                å…³ç³» = åˆ¤æ–­ä¸¤è€…æ˜¯å¦ç”Ÿæ‰¶å—åˆ¶(å½“å‰å…ƒç´ ['åå­—'], ä¸‹ä¸€å…ƒç´ ['åå­—'])
                éœ€è¦åè½¬ = False

                # æ£€æŸ¥æ—ºå¼±çŠ¶æ€
                if å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€') == 'å¼±':
                    éœ€è¦åè½¬ = not éœ€è¦åè½¬
                    æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºå¼± âˆ´ä½œç”¨å‘ç”Ÿåè½¬")
                
                # æ£€æŸ¥ç©ºäº¡çŠ¶æ€
                if 'æ”¯' in å½“å‰ä½ç½® and å½“å‰å…ƒç´ .get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                    éœ€è¦åè½¬ = not éœ€è¦åè½¬
                    æ‰“å°ä¿¡æ¯(f"\nâˆµä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä¸ºç©ºäº¡ âˆ´è¯¥ç©ºäº¡åœ°æ”¯ä½œç”¨ç›¸é‚»åœ°æ”¯æ—¶ è¦å‘ç”Ÿä½œç”¨åè½¬")
                
                æœ€ç»ˆå…³ç³» = å…³ç³»
                if éœ€è¦åè½¬:
                    æœ€ç»ˆå…³ç³» = 'å—åˆ¶å…³ç³»' if å…³ç³» == 'ç”Ÿæ‰¶å…³ç³»' else 'ç”Ÿæ‰¶å…³ç³»'
                
                æ‰“å°ä¿¡æ¯(f"ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘ä½œç”¨äºã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘")
                æ‰“å°ä¿¡æ¯(f"âˆµæœ¬æ¬¡ä½œç”¨è€…ã€{å½“å‰ä½ç½®}ã€‘ã€{å½“å‰å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{å½“å‰å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘ï¼Œâˆ´ä¸¤è€…ä½œç”¨å…³ç³»ä¸ºï¼š{æœ€ç»ˆå…³ç³»}")
                
                if æœ€ç»ˆå…³ç³» == 'å—åˆ¶å…³ç³»':
                    ä¸‹ä¸€å…ƒç´ ['æ—ºå¼±çŠ¶æ€'] = 'å¼±'
                æ‰“å°ä¿¡æ¯(f"æœ¬æ¬¡è¢«ä½œç”¨è€…ã€{ä¸‹ä¸€ä½ç½®}ã€‘ã€{ä¸‹ä¸€å…ƒç´ åå­—}ã€‘çš„æ—ºå¼±çŠ¶æ€ä¸ºã€{ä¸‹ä¸€å…ƒç´ .get('æ—ºå¼±çŠ¶æ€')}ã€‘")
                
                æœ€ç»ˆä½œç”¨ç»“æœ = æœ€ç»ˆå…³ç³»

            # ç¬¬å››æ­¥ï¼šåˆ¤æ–­è¢«ä½œç”¨ç¯å¢ƒç»“è®º
            è¢«ä½œç”¨æ–¹å±æ€§ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']]
            if è¢«ä½œç”¨æ–¹å±æ€§.get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
            # æ£€æŸ¥ä½œç”¨æ–¹æ˜¯å¦ç©ºäº¡
            elif å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]].get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡':
                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'
            # æ£€æŸ¥ä½œç”¨è·¯å¾„ä¸­æ˜¯å¦æœ‰ç©ºäº¡å…ƒç´ 
            elif any(å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®].get('æ˜¯å¦ç©ºäº¡') == 'ç©ºäº¡' for ä½ç½® in ä½œç”¨è·¯å¾„[1:-1]):
                è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'

            else:
                if è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'ç”¨ç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'ç”Ÿæ‰¶å…³ç³»' else 'å‡¶'
                elif è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±'] == 'å¿Œç¥':
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'å‰' if æœ€ç»ˆä½œç”¨ç»“æœ == 'å—åˆ¶å…³ç³»' else 'å‡¶'
                else:
                    è¢«ä½œç”¨ç¯å¢ƒç»“è®º = 'ä¸å‰ä¸å‡¶'

            # ç¬¬äº”æ­¥ï¼šè¾“å‡ºæœ€ç»ˆç»“è®º
            æ‰“å°ä¿¡æ¯(f"\næœ€ç»ˆè¢«ä½œç”¨æ–¹ï¼šã€{è¢«ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åå­—']}ã€‘è¢«å‰ä¸€å…ƒç´ ã€{æœ€ç»ˆä½œç”¨ç»“æœ}ã€‘ï¼Œâˆµè¢«ä½œç”¨æ–¹ä¸ºã€{è¢«ä½œç”¨æ–¹å±æ€§['å¿Œç”¨ç¥å½’å±']}ã€‘ï¼Œâˆ´æœ€ç»ˆã€{è¢«ä½œç”¨æ–¹ä¿¡æ¯['ä½ç½®']}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åå­—']}ã€‘ã€{è¢«ä½œç”¨æ–¹å±æ€§['åç¥']}ã€‘è¢«ã€{ä½œç”¨è·¯å¾„[0]}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åå­—']}ã€‘ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨è·¯å¾„[0]]['åç¥']}ã€‘ä½œç”¨ç»“è®ºä¸ºï¼šã€{è¢«ä½œç”¨ç¯å¢ƒç»“è®º}ã€‘")
            return {'ä½œç”¨æ–¹': ä½œç”¨æ–¹,'è¢«ä½œç”¨æ–¹': è¢«ä½œç”¨æ–¹,'ä½œç”¨ç»“è®º': è¢«ä½œç”¨ç¯å¢ƒç»“è®º}
        
        else:
            æ‰“å°ä¿¡æ¯("æ— æ³•å¾—å‡ºç»“è®ºï¼Œå› ä¸ºå¤©å¹²åªèƒ½ä½œç”¨å¤©å¹²ï¼Œå¤©å¹²ç»å¯¹ä¸èƒ½ä½œç”¨åœ°æ”¯")
            return {'ä½œç”¨æ–¹': None,'è¢«ä½œç”¨æ–¹': None,'ä½œç”¨ç»“è®º': "å¤©å¹²åªèƒ½ä½œç”¨å¤©å¹²ï¼Œå¤©å¹²ç»å¯¹ä¸èƒ½ä½œç”¨åœ°æ”¯ï¼Œæ— æ³•å¾—å‡ºç»“è®º"}






    def è‡ªåŠ¨è·å–ä½œç”¨ç»“è®º(ä½œç”¨æ–¹, è¢«ä½œç”¨æ–¹):

        global é€‰ä¸­å€¼
        é€‰ä¸­å€¼ = {'ä½œç”¨æ–¹å¤©å¹²': '', 'ä½œç”¨æ–¹åœ°æ”¯': '', 'è¢«ä½œç”¨æ–¹å¤©å¹²': '', 'è¢«ä½œç”¨æ–¹åœ°æ”¯': ''}

        # è®¾ç½®ä½œç”¨æ–¹ä¿¡æ¯
        if 'å¹²' in ä½œç”¨æ–¹:
            é€‰ä¸­å€¼['ä½œç”¨æ–¹å¤©å¹²'] = {
                'å…ƒç´ ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨æ–¹]['åå­—'],
                'ä½ç½®': ä½œç”¨æ–¹,
                'åç¥': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨æ–¹]['åç¥'],
                'ç±»å‹': 'å·²ç°å¤©å¹²'
            }
            é€‰ä¸­å€¼['ä½œç”¨æ–¹æ¥æº'] = 'å·²ç°å¤©å¹²'

        elif 'æ”¯' in ä½œç”¨æ–¹:
            é€‰ä¸­å€¼['ä½œç”¨æ–¹åœ°æ”¯'] = {
                'å…ƒç´ ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½œç”¨æ–¹]['åå­—'],
                'ä½ç½®': ä½œç”¨æ–¹,
                'ç±»å‹': 'å·²ç°åœ°æ”¯'
            }
            é€‰ä¸­å€¼['ä½œç”¨æ–¹æ¥æº'] = 'å·²ç°åœ°æ”¯'

        # è®¾ç½®è¢«ä½œç”¨æ–¹ä¿¡æ¯
        if 'å¹²' in è¢«ä½œç”¨æ–¹:
            é€‰ä¸­å€¼['è¢«ä½œç”¨æ–¹å¤©å¹²'] = {
                'å…ƒç´ ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹]['åå­—'],
                'ä½ç½®': è¢«ä½œç”¨æ–¹,
                'åç¥': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹]['åç¥'],
                'ç±»å‹': 'å·²ç°å¤©å¹²'
            }
            é€‰ä¸­å€¼['è¢«ä½œç”¨æ–¹æ¥æº'] = 'å·²ç°å¤©å¹²'

        elif 'æ”¯' in è¢«ä½œç”¨æ–¹:
            é€‰ä¸­å€¼['è¢«ä½œç”¨æ–¹åœ°æ”¯'] = {
                'å…ƒç´ ': å…«å­—ä¿¡æ¯ä¸»å­—å…¸[è¢«ä½œç”¨æ–¹]['åå­—'],
                'ä½ç½®': è¢«ä½œç”¨æ–¹,
                'ç±»å‹': 'å·²ç°åœ°æ”¯'
            }
            é€‰ä¸­å€¼['è¢«ä½œç”¨æ–¹æ¥æº'] = 'å·²ç°åœ°æ”¯'

        
        for key in å…«å­—ä¿¡æ¯ä¸»å­—å…¸:
            å…«å­—ä¿¡æ¯ä¸»å­—å…¸[key]['æ—ºå¼±çŠ¶æ€'] = 'None'


        ç»“æœ = æ£€æŸ¥ä½œç”¨å…³ç³»(æ˜¾ç¤ºè¿‡ç¨‹=False)
        print(f"æ£€æŸ¥ä½œç”¨å…³ç³»è¿”å›ç»“æœï¼š{ç»“æœ}")
        return ç»“æœ



    # åˆ›å»ºå‘½ä¸»å…³é”®ä¿¡æ¯æŒ‰é’®
    def æ˜¾ç¤ºå‘½ä¸»å…³é”®ä¿¡æ¯():

        print("\nå‘½ä¸»å…³é”®ä¿¡æ¯ç½—åˆ—å¦‚ä¸‹ï¼š") 
        # å­˜å‚¨ä½œç”¨ç»“è®ºçš„å­—å…¸
        æ—¥å¹²ä½œç”¨ç»“è®ºå­—å…¸ = {}
        è¢«æ—¥å¹²ä½œç”¨ç»“è®ºå­—å…¸ = {}
        æ—¥æ”¯ä½œç”¨ç»“è®ºå­—å…¸ = {}
        è¢«æ—¥æ”¯ä½œç”¨ç»“è®ºå­—å…¸ = {}

        # è·å–æ—¥å¹²ä½œç”¨å…¶ä»–å¤©å¹²çš„ç»“è®º
        for ä½ç½® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¶å¹²']:
            ç»“è®º = è‡ªåŠ¨è·å–ä½œç”¨ç»“è®º('æ—¥å¹²', ä½ç½®)
            æ—¥å¹²ä½œç”¨ç»“è®ºå­—å…¸[ä½ç½®] = ç»“è®º['ä½œç”¨ç»“è®º']

        # è·å–å…¶ä»–å¤©å¹²ä½œç”¨æ—¥å¹²çš„ç»“è®º
        for ä½ç½® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¶å¹²']:
            ç»“è®º = è‡ªåŠ¨è·å–ä½œç”¨ç»“è®º(ä½ç½®, 'æ—¥å¹²')
            è¢«æ—¥å¹²ä½œç”¨ç»“è®ºå­—å…¸[ä½ç½®] = ç»“è®º['ä½œç”¨ç»“è®º']

        # è·å–æ—¥æ”¯ä½œç”¨å…¶ä»–åœ°æ”¯çš„ç»“è®º
        for ä½ç½® in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¶æ”¯']:
            ç»“è®º = è‡ªåŠ¨è·å–ä½œç”¨ç»“è®º('æ—¥æ”¯', ä½ç½®)
            æ—¥æ”¯ä½œç”¨ç»“è®ºå­—å…¸[ä½ç½®] = ç»“è®º['ä½œç”¨ç»“è®º']

        # è·å–å…¶ä»–åœ°æ”¯ä½œç”¨æ—¥æ”¯çš„ç»“è®º
        for ä½ç½® in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¶æ”¯']:
            ç»“è®º = è‡ªåŠ¨è·å–ä½œç”¨ç»“è®º(ä½ç½®, 'æ—¥æ”¯')
            è¢«æ—¥æ”¯ä½œç”¨ç»“è®ºå­—å…¸[ä½ç½®] = ç»“è®º['ä½œç”¨ç»“è®º']

        # è¾“å‡ºå…³é”®ç»“è®º
        print(f"\nÂ·{'ç”·å‘½' if æ€§åˆ« == 'ç”·' else 'å¥³å‘½'}ï¼Œå‡ºç”Ÿåœ°[æœªçŸ¥]")

        # è¾“å‡ºå‘½å±€é€å‡ºåç¥
        print("\nÂ·å‘½å±€é€å‡ºåç¥ï¼š")
        for ä½ç½® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¶å¹²']:
            å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
            print(f"{ä½ç½®}-{å¤©å¹²['åå­—']}-{å¤©å¹²['åç¥']}-{å¤©å¹²['å¿Œç”¨ç¥å½’å±']}", end="  ")
        for ä½ç½® in ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¶æ”¯']:
            åœ°æ”¯ = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
            print(f"{ä½ç½®}-{åœ°æ”¯['åå­—']}-{åœ°æ”¯['å¿Œç”¨ç¥å½’å±']}", end="  ")

        # è¾“å‡ºæ‰€æœ‰æœªç°åç¥
        print("\nÂ·æ‰€æœ‰æœªç°åç¥ï¼š")
        for å¤©å¹², ä¿¡æ¯ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            print(f"{å¤©å¹²}-{ä¿¡æ¯['åç¥']}-{ä¿¡æ¯['å¿Œç”¨ç¥å½’å±']}", end="  ")

        # è¾“å‡ºå‘½å±€é€å‡ºåç¥çš„ç¯å¢ƒå‰å‡¶
        print("\nÂ·å‘½å±€é€å‡ºåç¥çš„ç¯å¢ƒçš„å‰å‡¶ï¼š")
        for ä½ç½® in ['å¹´å¹²', 'æœˆå¹²', 'æ—¶å¹²']:
            å¤©å¹² = å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]
            print(f"{ä½ç½®}-{å¤©å¹²['åå­—']}-{å¤©å¹²['åç¥']}-{å¤©å¹²['å¿Œç”¨ç¥å½’å±']}ï¼š", end="")
            print(f"å¤–ç¯å¢ƒã€{å¤©å¹²['å¤–ç¯å¢ƒ']}ã€‘ã€å†…ç¯å¢ƒã€{å¤©å¹²['å†…ç¯å¢ƒ']}ã€‘ã€ç¤¾ä¼šç¯å¢ƒã€{å¤©å¹²['å·¦ç¯å¢ƒ']}ã€‘ã€å†…å¿ƒç¯å¢ƒã€{å¤©å¹²['å³ç¯å¢ƒ']}ã€‘ã€å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒã€{å¤©å¹²['å†…ç¯å¢ƒå·¦ç¯å¢ƒ']}ã€‘ã€å†…ç¯å¢ƒçš„å³ç¯å¢ƒã€{å¤©å¹²['å†…ç¯å¢ƒå³ç¯å¢ƒ']}ã€‘ã€å›½å¤–ç¯å¢ƒã€{å¤©å¹²['å›½å¤–ç¯å¢ƒ']}ã€‘")


        # è¾“å‡ºæœªç°åç¥çš„ç¯å¢ƒå‰å‡¶
        print("\nÂ·æœªç°åç¥çš„ç¯å¢ƒçš„å‰å‡¶ï¼š")
        for å¤©å¹², ä¿¡æ¯ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            print(f"{å¤©å¹²}-{ä¿¡æ¯['åç¥']}-{ä¿¡æ¯['å¿Œç”¨ç¥å½’å±']}ï¼š", end="")
            print(f"å¤–ç¯å¢ƒã€{ä¿¡æ¯['å¤–ç¯å¢ƒ']}ã€‘ã€å†…ç¯å¢ƒã€{ä¿¡æ¯['å†…ç¯å¢ƒ']}ã€‘ã€ç¤¾ä¼šç¯å¢ƒã€{ä¿¡æ¯['å·¦ç¯å¢ƒ']}ã€‘ã€å†…å¿ƒç¯å¢ƒã€{ä¿¡æ¯['å³ç¯å¢ƒ']}ã€‘ã€å†…ç¯å¢ƒçš„å·¦ç¯å¢ƒã€{ä¿¡æ¯['å†…ç¯å¢ƒå·¦ç¯å¢ƒ']}ã€‘ã€å†…ç¯å¢ƒçš„å³ç¯å¢ƒã€{ä¿¡æ¯['å†…ç¯å¢ƒå³ç¯å¢ƒ']}ã€‘")

        # è¾“å‡ºæ—¥å¹²ä½œç”¨ç»“è®º
        print("\nÂ·ã€æ—¥å¹²ã€‘ä½œç”¨æ‰€æœ‰å‘½å±€é€å‡ºåç¥åçš„å‰å‡¶ï¼š")
        for ä½ç½®, ç»“è®º in æ—¥å¹²ä½œç”¨ç»“è®ºå­—å…¸.items():
            print(f"ã€æ—¥å¹²ã€‘è®©ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['åç¥']}ã€‘ã€{ç»“è®º}ã€‘")

        # è¾“å‡ºè¢«æ—¥å¹²ä½œç”¨ç»“è®º
        print("\nÂ·æ¯ä¸ªé€å‡ºåç¥è®©ã€æ—¥å¹²ã€‘åº”å‰å‡¶ï¼š")
        for ä½ç½®, ç»“è®º in è¢«æ—¥å¹²ä½œç”¨ç»“è®ºå­—å…¸.items():
            print(f"ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ä½ç½®]['åç¥']}ã€‘è®©ã€æ—¥å¹²ã€‘ã€{ç»“è®º}ã€‘")

        # è¾“å‡ºæ—¥æ”¯ä½œç”¨ç»“è®º
        print("\nÂ·ã€æ—¥æ”¯ã€‘è®©æ¯ä¸ªé€å‡ºåç¥çš„æ ¹åº”å‰å‡¶ï¼š")
        for ä½ç½®, ç»“è®º in æ—¥æ”¯ä½œç”¨ç»“è®ºå­—å…¸.items():
            ç›¸åº”å¤©å¹²ä½ç½® = ä½ç½®.replace('æ”¯', 'å¹²')
            print(f"ã€æ—¥æ”¯ã€‘è®©ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ç›¸åº”å¤©å¹²ä½ç½®]['åç¥']}ã€‘çš„æ ¹ã€{ç»“è®º}ã€‘")

        # è¾“å‡ºè¢«æ—¥æ”¯ä½œç”¨ç»“è®º
        print("\nÂ·æ¯ä¸ªé€å‡ºåç¥çš„æ ¹è®©ã€æ—¥æ”¯ã€‘åº”å‰å‡¶ï¼š")
        for ä½ç½®, ç»“è®º in è¢«æ—¥æ”¯ä½œç”¨ç»“è®ºå­—å…¸.items():
            ç›¸åº”å¤©å¹²ä½ç½® = ä½ç½®.replace('æ”¯', 'å¹²')
            print(f"ã€{å…«å­—ä¿¡æ¯ä¸»å­—å…¸[ç›¸åº”å¤©å¹²ä½ç½®]['åç¥']}ã€‘çš„æ ¹è®©ã€æ—¥æ”¯ã€‘ã€{ç»“è®º}ã€‘")

        # è¾“å‡ºæ‰€æœ‰æœªç°åç¥çš„çª—å£åç¥
        print("\nÂ·æ‰€æœ‰æœªç°åç¥çš„'çª—å£åç¥'ï¼š")
        for å¤©å¹², ä¿¡æ¯ in æœªç°æ­£ååç¥ä¸»å­—å…¸.items():
            print(f"{å¤©å¹²}çš„çª—å£åç¥æ˜¯ã€{ä¿¡æ¯['çª—å£åç¥']}ã€‘(ä½äº{ä¿¡æ¯['çª—å£ä½ç½®']}çš„{ä¿¡æ¯['çª—å£åå­—']})")





    å‘½ä¸»å…³é”®ä¿¡æ¯æŒ‰é’® = tk.Button(ä½œç”¨å…³ç³»çª—å£,text="å‘½ä¸»å…³é”®ä¿¡æ¯è‡ªåŠ¨è·å–",font=("Arial", 10),
    command=æ˜¾ç¤ºå‘½ä¸»å…³é”®ä¿¡æ¯,relief="solid",bd=0.5)
    å‘½ä¸»å…³é”®ä¿¡æ¯æŒ‰é’®.pack(anchor='w', pady=(10, 0))



    # æ·»åŠ ç¡®è®¤æŒ‰é’®
    ç¡®è®¤æŒ‰é’® = tk.Button(
        ä½œç”¨å…³ç³»çª—å£,
        text="æŸ¥è¯¢ä½œç”¨å…³ç³»",
        font=("Arial", 10),
        command=æ£€æŸ¥ä½œç”¨å…³ç³»,
        relief="solid",
        bd=0.5
    )
    ç¡®è®¤æŒ‰é’®.pack(side=tk.BOTTOM, pady=(0, 20))









#ã€åŸºæœ¬ä¿¡æ¯æå–ã€‘æå–æ—¥ä¸»ï¼ˆmeï¼‰å’Œæœˆæ”¯ï¼ˆmonthï¼‰ï¼Œå¹¶æ•´ç†å¤©å¹²åœ°æ”¯ä¿¡æ¯
me = æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨.day
month = æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨.month
alls = list(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨) + list(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨)

#ã€å¤©å¹²åç¥è®¡ç®—ã€‘
å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨ = []
for seq, item in enumerate(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨):   #è¿™è¡Œä»£ç éå†å››æŸ±çš„å¤©å¹²ï¼ˆå¹´ã€æœˆã€æ—¥ã€æ—¶ï¼‰
    if seq == 2:
        å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨.append('--')  # å¦‚æœæ˜¯ç¬¬ä¸‰ä¸ªå¤©å¹²ï¼ˆseq == 2ï¼Œå› ä¸ºç´¢å¼•ä»0å¼€å§‹ï¼‰ï¼Œä¹Ÿå°±æ˜¯æ—¥æŸ±å¤©å¹²ï¼Œç›´æ¥æ·»åŠ '--'ã€‚è¿™æ˜¯å› ä¸ºæ—¥ä¸»ä¸è‡ªå·±æ²¡æœ‰åç¥å…³ç³»ã€‚
    else:
        å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨.append(åç¥å…³ç³»è¡¨[me][item]) # å…¶ä»–å¤©å¹²ï¼Œä½¿ç”¨ åç¥å…³ç³»è¡¨[me][item] æ¥ç¡®å®šåç¥
print("æœ¬å‘½å±€é‡Œå››ä¸ªå¤©å¹²åç¥åˆ—è¡¨ï¼š", å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨)

#ã€åœ°æ”¯åç¥è®¡ç®—ã€‘
å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨ = [] 
for item in æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨:
    d = åœ°æ”¯è—å¹²å­—å…¸[item]
    å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨.append(åç¥å…³ç³»è¡¨[me][max(d, key=d.get)])
print("æœ¬å‘½å±€é‡Œå››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨ï¼š", å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨)

shens = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨ + å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨


å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨2 = [] # åœ°æ”¯çš„æ‰€æœ‰ç¥ï¼ŒåŒ…å«ä½™æ°”å’Œå°¾æ°”, æ··åˆåœ¨ä¸€èµ·
åœ°æ”¯_shen3 = [] 
for item in æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨:
    d = åœ°æ”¯è—å¹²å­—å…¸[item]
    tmp = ''
    for item2 in d:
        å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨2.append(åç¥å…³ç³»è¡¨[me][item2])
        tmp += åç¥å…³ç³»è¡¨[me][item2]
    åœ°æ”¯_shen3.append(tmp)
shens2 = å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨ + å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨2



# è®¡ç®—å¤§è¿çš„æ–¹å‘
# å®šä¹‰å®Œæ•´çš„åå¤©å¹²å’ŒåäºŒåœ°æ”¯åˆ—è¡¨ï¼Œç”¨äºè®¡ç®—å¤§è¿
é˜³å±æ€§å¤©å¹²åˆ—è¡¨ = ["ç”²","ä¸™","æˆŠ","åºš","å£¬"]
é˜´å±æ€§å¤©å¹²åˆ—è¡¨ = ["ä¹™","ä¸","å·±","è¾›","ç™¸"]
é˜³å±æ€§åœ°æ”¯åˆ—è¡¨ = ["å­", "å¯…","è¾°","åˆ","ç”³","æˆŒ"]
é˜´å±æ€§åœ°æ”¯åˆ—è¡¨ = ["ä¸‘", "å¯","å·³","æœª","é…‰","äº¥"]
å¤©å¹²åˆ—è¡¨ = ["ç”²", "ä¹™", "ä¸™", "ä¸", "æˆŠ", "å·±", "åºš", "è¾›", "å£¬", "ç™¸"]
åœ°æ”¯åˆ—è¡¨ = ["å­", "ä¸‘", "å¯…", "å¯", "è¾°", "å·³", "åˆ", "æœª", "ç”³", "é…‰", "æˆŒ", "äº¥"]
# è·å–å¹´å¹²åœ¨å¤©å¹²åˆ—è¡¨ä¸­çš„ç´¢å¼•
å¹´å¹²ç´¢å¼• = å¤©å¹²åˆ—è¡¨.index(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨.year)
# åˆ¤æ–­å¤§è¿çš„é¡ºé€†æ–¹å‘ï¼Œæ ¹æ®å¹´å¹²çš„é˜´é˜³å±æ€§å’Œæ€§åˆ«ç¡®å®š
if options.n:  # ç”·æ€§
    if å¹´å¹²ç´¢å¼• % 2 == 0:
        direction = -1  # é˜³å¹´ç”·é€†æ’
    else:
        direction = 1   # é˜´å¹´ç”·é¡ºæ’
else:          # å¥³æ€§
    if å¹´å¹²ç´¢å¼• % 2 == 0:
        direction = 1   # é˜³å¹´å¥³é¡ºæ’
    else:
        direction = -1  # é˜´å¹´å¥³é€†æ’

# è®¡ç®—å¤§è¿çš„å…·ä½“å†…å®¹
# è·å–æœˆå¹²å’Œæœˆæ”¯åœ¨å¤©å¹²åˆ—è¡¨å’Œåœ°æ”¯åˆ—è¡¨ä¸­çš„ç´¢å¼•
å¤©å¹²_åºåˆ— = å¤©å¹²åˆ—è¡¨.index(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨.month)        #åŸæ–‡ï¼šgan_seq = Gan.index(gans.month)
åœ°æ”¯_åºåˆ— = åœ°æ”¯åˆ—è¡¨.index(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨.month)        #åŸæ–‡ï¼šzhi_seq = Zhi.index(zhis.month)
zhus = [item for item in zip(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨)]
for i in range(12):
    # æŒ‰ç…§æ–¹å‘æ›´æ–°ç´¢å¼•ï¼Œå¹¶ä½¿ç”¨å–æ¨¡å®ç°å¾ªç¯
    å¤©å¹²_åºåˆ— = (å¤©å¹²_åºåˆ— + direction) % 10
    åœ°æ”¯_åºåˆ— = (åœ°æ”¯_åºåˆ— + direction) % 12
    # è·å–å¯¹åº”çš„å¤§è¿å¤©å¹²å’Œå¤§è¿åœ°æ”¯
    å¤§è¿å¤©å¹² = å¤©å¹²åˆ—è¡¨[å¤©å¹²_åºåˆ—]
    å¤§è¿åœ°æ”¯ = åœ°æ”¯åˆ—è¡¨[åœ°æ”¯_åºåˆ—]


yun = ba.getYun(not options.n) 
for dayun in yun.getDaYun()[1:]:   
    gan_ = dayun.getGanZhi()[0]     
    zhi_ = dayun.getGanZhi()[1]
    fu = '*' if (gan_, zhi_) in zhus else " "
    åœ°æ”¯è—å¹²å­—å…¸_ = ''                 #è®¡ç®—åˆå§‹åŒ–ä¸€ä¸ªç©ºå­—ç¬¦ä¸²åœ°æ”¯è—å¹²å­—å…¸_ï¼Œç”¨äºå­˜å‚¨å¤§è¿åœ°æ”¯çš„è—å¹²ä¿¡æ¯
    for gan in åœ°æ”¯è—å¹²å­—å…¸[zhi_]:     #éå†å½“å‰å¤§è¿çš„åœ°æ”¯è—å¹²,åœ°æ”¯è—å¹²å­—å…¸æ˜¯ã€Šåœ°æ”¯è—å¹²å­—å…¸ã€‹
        åœ°æ”¯è—å¹²å­—å…¸_ = åœ°æ”¯è—å¹²å­—å…¸_ + "{}{}ã€€".format(gan, åç¥å…³ç³»è¡¨[me][gan])   #ä¸ºæ¯ä¸ªè—å¹²æ·»åŠ å…¶ä¸æ—¥ä¸»çš„åç¥å…³ç³»
    
    zhi__ = set()             #åˆ›å»ºä¸€ä¸ªç©ºé›†åˆzhi__ï¼Œç”¨äºå­˜å‚¨å¤§è¿åœ°æ”¯ä¸æœ¬å‘½ç›˜åœ°æ”¯çš„å…³ç³»
    
    for item in æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨:        #éå† æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯æœ¬å‘½ç›˜çš„å››æŸ±åœ°æ”¯ï¼ˆå¹´æ”¯ã€æœˆæ”¯ã€æ—¥æ”¯ã€æ—¶æ”¯ï¼‰
    
        for type_ in åœ°æ”¯åˆä¼šç ´åˆ‘å®³å­—å…¸[zhi_]:      #éå†å½“å‰å¤§è¿åœ°æ”¯ zhi_ åœ¨ åœ°æ”¯åˆä¼šç ´åˆ‘å®³å­—å…¸ å­—å…¸ã€Šåœ°æ”¯åˆ‘å†²åˆå®³å­—å…¸ã€‹ä¸­çš„å…³ç³»
            if item in åœ°æ”¯åˆä¼šç ´åˆ‘å®³å­—å…¸[zhi_][type_]:   #æ£€æŸ¥æœ¬å‘½ç›˜ä¸­çš„åœ°æ”¯ item æ˜¯å¦ä¸å½“å‰å¤§è¿åœ°æ”¯ zhi_ å­˜åœ¨ã€Šåœ°æ”¯åˆ‘å†²åˆå®³å­—å…¸ã€‹ä¸­çš„å…³ç³»
                zhi__.add(type_ + ":" + item)  #å¦‚æœå­˜åœ¨å…³ç³»ï¼Œå°±å°†è¿™ä¸ªå…³ç³»ä¿¡æ¯æ·»åŠ åˆ° zhi__ é›†åˆä¸­ã€‚æ ¼å¼ä¸º "å…³ç³»ç±»å‹:åœ°æ”¯"
    zhi__ = '  '.join(zhi__)   #æœ€åzhi__ åŒ…å«äº†å½“å‰å¤§è¿åœ°æ”¯ä¸æœ¬å‘½ç›˜å››æŸ±åœ°æ”¯ä¹‹é—´æ‰€æœ‰çš„ç‰¹æ®Šå…³ç³»ï¼ˆå¦‚åˆ‘ã€å†²ã€åˆã€å®³ï¼‰çš„å­—ç¬¦ä¸²å¤§å…¨ï¼ˆå®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š"åˆ‘:å¯…  å†²:ç”³  åˆ:é…‰  å®³:æœª"ï¼‰
    
    empty = chr(12288)
    if zhi_ in åœ°æ”¯ç©ºäº¡å­—å…¸[zhus[2]]:  
        empty = 'åœ°æ”¯ç©ºäº¡'        
    


    #ã€Šæ‰“å°å¤§è¿ã€‹
    jia = ""
    if gan_ in æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨:
        for i in range(4):
            if gan_ == æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨[i]:
                if abs(åœ°æ”¯åˆ—è¡¨.index(zhi_) - åœ°æ”¯åˆ—è¡¨.index(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[i])) == 2:
                    jia = jia + "  --å¤¹ï¼š" +  åœ°æ”¯åˆ—è¡¨[( åœ°æ”¯åˆ—è¡¨.index(zhi_) + åœ°æ”¯åˆ—è¡¨.index(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[i]) )//2]
                if abs(åœ°æ”¯åˆ—è¡¨.index(zhi_) - åœ°æ”¯åˆ—è¡¨.index(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[i]) ) == 10:
                    jia = jia + "  --å¤¹ï¼š" +  åœ°æ”¯åˆ—è¡¨[(åœ°æ”¯åˆ—è¡¨.index(zhi_) + åœ°æ”¯åˆ—è¡¨.index(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨[i]))%12]
    age = dayun.getStartAge()
    year_str = 'ğŸ“’å¤§è¿'  
    ganzhi = dayun.getGanZhi()
    out = "{age:<3d}å²    {year:<7s}{ganzhi:<5s}   {shi_shen}    {empty} {fu}     {gan}:{åç¥å…³ç³»}{yinyang}      {zhi}:{åœ°æ”¯_åç¥å…³ç³»}{yinyang}          {zhi_info}".format(         
        # åŸä½œè€…å†™çš„æ˜¯ï¼š{gan}:{åç¥å…³ç³»}{yinyang}{å¤©å¹²é—´åˆå†²å…³ç³»åˆ¤æ–­:{fill}<6s}{zhi_info}{zhi}{yinyang}{åœ°æ”¯_åç¥å…³ç³»}
        #- {zhi_canggan:{fill}<10s} {other}".format(
        shi_shen=åç¥å…³ç³»è¡¨[me][gan_], empty=empty, fu=fu, age=age, year=year_str, ganzhi=ganzhi,
        gan=gan_, åç¥å…³ç³»=åç¥å…³ç³»è¡¨[me][gan_],fill=chr(12288),
        yinyang=è®¡ç®—é˜´é˜³å±æ€§(zhi_), å¤©å¹²é—´åˆå†²å…³ç³»åˆ¤æ–­=å¤©å¹²é—´åˆå†²å…³ç³»åˆ¤æ–­(gan_, æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨), zhi=zhi_, åœ°æ”¯_åç¥å…³ç³»=åç¥å…³ç³»è¡¨[me][zhi_], zhi_info=zhi__, other='')    #zhi__ æ˜¯ç”¨äºå­˜å‚¨å¤§è¿åœ°æ”¯ä¸æœ¬å‘½ç›˜åœ°æ”¯åˆ‘å†²åˆå®³å…³ç³»çš„å…³ç³»
        #zhi_canggan=åœ°æ”¯è—å¹²å­—å…¸_,
    print(out)



    gan_index = å¤©å¹²åˆ—è¡¨.index(gan_)
    zhi_index = åœ°æ”¯åˆ—è¡¨.index(zhi_)
    def get_shens(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨, gan_, zhi_):         
        all_shens = []
        for item in year_shens:
            if zhi_ in year_shens[item][æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨.year]:    
                all_shens.append(item)
                    
        for item in month_shens:
            if gan_ in month_shens[item][æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨.month] or zhi_ in month_shens[item][æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨.month]:     
                all_shens.append(item)
                    
        for item in day_shens:
            if zhi_ in day_shens[item][æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨.day]:     
                all_shens.append(item)
                    
        for item in g_shens:
            if zhi_ in g_shens[item][me]:    
                all_shens.append(item) 
        if all_shens:  
            return "  ç¥:" + ' '.join(all_shens)
        else:
            return ""
    out = out + jia + get_shens(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨, æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨, gan_, zhi_)
    #print(out)


    zhis2 = list(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨) + [zhi_]      #è®¡ç®—æ¯ä¸ªå¤§è¿ä¸­çš„æµå¹´
    gans2 = list(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨) + [gan_]
    for liunian in dayun.getLiuNian():
        gan2_ = liunian.getGanZhi()[0]     #è·å–æµå¹´çš„å¤©å¹²ï¼ˆgan2_ï¼‰å’Œåœ°æ”¯ï¼ˆzhi2_ï¼‰
        zhi2_ = liunian.getGanZhi()[1]
        fu2 = '*' if (gan2_, zhi2_) in zhus else " "  #æ£€æŸ¥è¿™ä¸ªå¹²æ”¯ç»„åˆæ˜¯å¦ä¸æœ¬å‘½ç›˜çš„å››æŸ±ç›¸åŒã€‚å¦‚æœç›¸åŒï¼Œå°±æ ‡è®°ä¸€ä¸ªæ˜Ÿå·ï¼Œè¡¨ç¤ºç‰¹æ®Šçš„æœ¬å‘½å¹´
        zhi6_ = ''   #åœ°æ”¯è—å¹²è®¡ç®—ï¼ˆåœ¨å…«å­—ä¸­ï¼Œæ¯ä¸ªåœ°æ”¯éƒ½è—æœ‰ä¸€äº›å¤©å¹²ï¼Œè¿™å«åš"è—å¹²"ã€‚ä¾‹å¦‚ï¼Œå¯…æœ¨è—ç”²ã€ä¸™ã€æˆŠï¼‰
        for gan in åœ°æ”¯è—å¹²å­—å…¸[zhi2_]:   #ä»é¢„å®šä¹‰çš„å­—å…¸ä¸­è·å–æµå¹´åœ°æ”¯çš„è—å¹²ï¼Œéå†è¿™ä¸ªåœ°æ”¯çš„æ‰€æœ‰è—å¹²  
            zhi6_ = zhi6_ + "{}{}ã€€".format(gan, åç¥å…³ç³»è¡¨[me][gan])   #å¯¹äºæµå¹´åœ°æ”¯ä¸­çš„æ¯ä¸ªç›¸å…³å¤©å¹²ï¼Œä»£ç åœ¨è®¡ç®—æ¯ä¸ªè—å¹²ä¸æ—¥ä¸»ï¼ˆmeï¼‰çš„åç¥å…³ç³»
        # å¤§è¿åœ°åœ°æ”¯ä½œç”¨å…³ç³»
        zhi__ = set()
        for item in zhis2:
            for type_ in åœ°æ”¯åˆä¼šç ´åˆ‘å®³å­—å…¸[zhi2_]:
                if type_ == 'ç ´':
                    continue
                if item in åœ°æ”¯åˆä¼šç ´åˆ‘å®³å­—å…¸[zhi2_][type_]:
                    zhi__.add(type_ + ":" + item)
        zhi__ = '  '.join(zhi__)
        #ã€Šæ‰“å°æµå¹´ã€‹
        empty = chr(12288)
        if zhi2_ in åœ°æ”¯ç©ºäº¡å­—å…¸[zhus[2]]:
            empty = 'åœ°æ”¯ç©ºäº¡'       
        age = liunian.getAge()
        year_str = str(liunian.getYear())
        ganzhi = gan2_ + zhi2_
        out = "{age:<3d}å²    {year:<7s}   {ganzhi:<5s}   {shi_shen}    {empty} {fu}     {gan}:{åç¥å…³ç³»}{yinyang}      {zhi}:{åœ°æ”¯_åç¥å…³ç³»}{yinyang}          {zhi_info}".format(
            # åŸä½œè€…å†™çš„æ˜¯ï¼š{gan}:{åç¥å…³ç³»}{yinyang}{å¤©å¹²é—´åˆå†²å…³ç³»åˆ¤æ–­:{fill}<6s}{zhi_info}{zhi}{yinyang}{åœ°æ”¯_åç¥å…³ç³»}
            # - {zhi_canggan:{fill}<10s} {other}".format(
            age=age, year=year_str, ganzhi=ganzhi, shi_shen=åç¥å…³ç³»è¡¨[me][gan2_], empty=empty, fu=fu2,gan=gan2_,fill=chr(12288),
            åç¥å…³ç³»=åç¥å…³ç³»è¡¨[me][gan2_],yinyang=è®¡ç®—é˜´é˜³å±æ€§(zhi2_), å¤©å¹²é—´åˆå†²å…³ç³»åˆ¤æ–­=å¤©å¹²é—´åˆå†²å…³ç³»åˆ¤æ–­(gan2_, gans2), zhi=zhi2_, åœ°æ”¯_åç¥å…³ç³»=åç¥å…³ç³»è¡¨[me][zhi2_],zhi_info=zhi__ ,other='')  #zhi__ æ˜¯ç”¨äºå­˜å‚¨å¤§è¿åœ°æ”¯ä¸æœ¬å‘½ç›˜åœ°æ”¯åˆ‘å†²åˆå®³å…³ç³»çš„å…³ç³»
            #zhi_canggan=zhi6_)

        print(out)



if æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨ is not None and æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨ is not None:
    user_choice = æ˜¾ç¤ºå››æŸ±å…«å­—å‘½ç›˜ç»“æœçš„ç•Œé¢(list(æœ¬å‘½ç›˜å››ä¸ªå¤©å¹²åå­—åˆ—è¡¨), list(æœ¬å‘½ç›˜å››ä¸ªåœ°æ”¯åå­—åˆ—è¡¨), å››ä¸ªå¤©å¹²åç¥åˆ—è¡¨,å››ä¸ªåœ°æ”¯åç¥åˆ—è¡¨)   # è°ƒç”¨å‡½æ•°ï¼Œåœ¨GUIä¸­æ˜¾ç¤ºå››æŸ±å…«å­—å’Œåç¥æ ‡ç­¾ï¼Œå¹¶è·å–ç”¨æˆ·é€‰æ‹©

if user_choice:   # æ ¹æ®ç”¨æˆ·é€‰æ‹©å†³å®šæ˜¯å¦ç»§ç»­æ‰“å‡ºå…¶ä»–ä¿¡æ¯
    pass  # ç”¨æˆ·é€‰æ‹©ç»§ç»­æ˜¾ç¤ºå…¶ä»–ä¿¡æ¯ï¼Œé»˜è®¤è¡Œä¸º.è¿™é‡Œå¯ä»¥ä¿ç•™åŸæœ‰çš„è„šæœ¬ç»§ç»­æ‰§è¡Œ
else:
    import sys    # ç”¨æˆ·é€‰æ‹©åªæ˜¾ç¤ºå››æŸ±å…«å­—ï¼Œç»“æŸè„šæœ¬
    sys.exit()